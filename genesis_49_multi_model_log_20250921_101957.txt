2025-09-21 10:19:57,312 - INFO - Successfully loaded environment variables from: C:\Users\ariro\OneDrive\Documents\Bible\.env
2025-09-21 10:19:57,312 - INFO - === PROCESSING GENESIS CHAPTER(S) [49] WITH MULTI-MODEL API ===
2025-09-21 10:19:57,313 - INFO - Initializing Sefaria client...
2025-09-21 10:19:57,314 - INFO - Creating database: genesis_49_multi_model_20250921_101957.db
2025-09-21 10:19:57,567 - INFO - Initializing Metaphor Validator...
2025-09-21 10:19:57,567 - INFO - Initializing Gemini multi-model API...
2025-09-21 10:19:57,567 - INFO - --- Processing Genesis 49 ---
2025-09-21 10:19:57,567 - INFO - Fetching text for Genesis 49...
2025-09-21 10:19:57,903 - INFO - Retrieved 33 verses for Genesis 49
2025-09-21 10:19:57,903 - INFO - Filtering to process 3 selected verse(s): [8, 9, 10]
2025-09-21 10:19:57,903 - INFO -   Processing Genesis 49:8 (1/3)...
2025-09-21 10:20:05,510 - INFO -     API Metadata: {'model_used': 'gemini-2.5-flash', 'context': 'poetic_blessing', 'retries': 0, 'input_tokens': 452, 'output_tokens': 1, 'all_detected_instances': [], 'raw_llm_response': '[]', 'fallback_used': False}
2025-09-21 10:20:05,523 - INFO -   Processing Genesis 49:9 (2/3)...
2025-09-21 10:20:15,765 - INFO -     VALIDATING instance: Judah is a lion’s whelp
2025-09-21 10:20:16,562 - INFO -       VALIDATION PASSED: Cross-domain comparison -  The passage uses a young lion to represent the tribe of Judah, transferring characteristics of strength and potential dominance from the animal kingdom to the human realm.  This is a clear example of a metaphor, not a literal identification.
2025-09-21 10:20:16,563 - INFO -     VALIDATING instance: On prey, my son, have you grown.
2025-09-21 10:20:17,180 - INFO -       VALIDATION PASSED: Cross-domain comparison (animal to human).  The statement likens Judah's growth and strength to that of a lion thriving on its prey, a figurative comparison highlighting Judah's success and dominance, not a literal description of his development.
2025-09-21 10:20:17,181 - INFO -     VALIDATING instance: He crouches, lies down like a lion,Like a lioness
2025-09-21 10:20:18,180 - INFO -       VALIDATION PASSED: Simile -  The passage uses "like a lion" and "like a lioness" to compare Judah's posture and demeanor to that of powerful, resting predators. This is a figurative comparison, not a literal description of Judah physically transforming into a lion.  The comparison evokes the imagery of strength, dominance, and potential for action, creating a richer understanding of Judah's character and status than a simple literal description would allow.  The use of "like" clearly indicates a simile.
2025-09-21 10:20:18,181 - INFO -     API Metadata: {'model_used': 'gemini-2.5-flash', 'context': 'poetic_blessing', 'retries': 0, 'input_tokens': 521, 'output_tokens': 629, 'all_detected_instances': [{'type': 'metaphor', 'hebrew_text': 'גּ֤וּר אַרְיֵה֙ יְהוּדָ֔ה', 'english_text': 'Judah is a lion’s whelp', 'explanation': 'Judah, a human tribe, is directly identified with a young lion, symbolizing strength, power, and potential for dominance.', 'vehicle_level_1': 'nature', 'vehicle_level_2': "animal (lion's whelp)", 'tenor_level_1': 'people', 'tenor_level_2': 'Judah (tribe/person)', 'confidence': 1.0, 'speaker': 'Narrator', 'purpose': 'To characterize Judah as powerful, strong, and dominant.', 'original_detection_type': 'metaphor'}, {'type': 'metaphor', 'hebrew_text': 'מִטֶּ֖רֶף בְּנִ֣י עָלִ֑יתָ', 'english_text': 'On prey, my son, have you grown.', 'explanation': "Judah's growth and prosperity are likened to a lion growing strong by consuming its prey, implying success and dominance achieved through conquest or acquisition.", 'vehicle_level_1': 'nature', 'vehicle_level_2': 'animal behavior (feeding on prey)', 'tenor_level_1': 'people', 'tenor_level_2': 'Judah (tribe/person)', 'confidence': 0.9, 'speaker': 'Narrator', 'purpose': "To describe the source and nature of Judah's strength and dominance.", 'original_detection_type': 'metaphor'}, {'type': 'simile', 'hebrew_text': 'כָּרַ֨ע רָבַ֧ץ כְּאַרְיֵ֛ה וּכְלָבִ֖יא', 'english_text': 'He crouches, lies down like a lion,Like a lioness', 'explanation': "Judah's posture and state of repose are explicitly compared to a powerful, resting lion and lioness, conveying a sense of unchallengeable authority, secure position, and latent power.", 'vehicle_level_1': 'nature', 'vehicle_level_2': 'animal (lion/lioness)', 'tenor_level_1': 'people', 'tenor_level_2': 'Judah (tribe/person)', 'confidence': 1.0, 'speaker': 'Narrator', 'purpose': "To emphasize Judah's formidable power and secure, unassailable position, even in rest.", 'original_detection_type': 'simile'}], 'raw_llm_response': '```json\n[\n  {\n    "type": "metaphor",\n    "hebrew_text": "גּ֤וּר אַרְיֵה֙ יְהוּדָ֔ה",\n    "english_text": "Judah is a lion’s whelp",\n    "explanation": "Judah, a human tribe, is directly identified with a young lion, symbolizing strength, power, and potential for dominance.",\n    "vehicle_level_1": "nature",\n    "vehicle_level_2": "animal (lion\'s whelp)",\n    "tenor_level_1": "people",\n    "tenor_level_2": "Judah (tribe/person)",\n    "confidence": 1.0,\n    "speaker": "Narrator",\n    "purpose": "To characterize Judah as powerful, strong, and dominant."\n  },\n  {\n    "type": "metaphor",\n    "hebrew_text": "מִטֶּ֖רֶף בְּנִ֣י עָלִ֑יתָ",\n    "english_text": "On prey, my son, have you grown.",\n    "explanation": "Judah\'s growth and prosperity are likened to a lion growing strong by consuming its prey, implying success and dominance achieved through conquest or acquisition.",\n    "vehicle_level_1": "nature",\n    "vehicle_level_2": "animal behavior (feeding on prey)",\n    "tenor_level_1": "people",\n    "tenor_level_2": "Judah (tribe/person)",\n    "confidence": 0.9,\n    "speaker": "Narrator",\n    "purpose": "To describe the source and nature of Judah\'s strength and dominance."\n  },\n  {\n    "type": "simile",\n    "hebrew_text": "כָּרַ֨ע רָבַ֧ץ כְּאַרְיֵ֛ה וּכְלָבִ֖יא",\n    "english_text": "He crouches, lies down like a lion,Like a lioness",\n    "explanation": "Judah\'s posture and state of repose are explicitly compared to a powerful, resting lion and lioness, conveying a sense of unchallengeable authority, secure position, and latent power.",\n    "vehicle_level_1": "nature",\n    "vehicle_level_2": "animal (lion/lioness)",\n    "tenor_level_1": "people",\n    "tenor_level_2": "Judah (tribe/person)",\n    "confidence": 1.0,\n    "speaker": "Narrator",\n    "purpose": "To emphasize Judah\'s formidable power and secure, unassailable position, even in rest."\n  }\n]\n```', 'fallback_used': False}
2025-09-21 10:20:18,183 - INFO -     DETECTED: 3 instances, VALIDATED: 3 instances
2025-09-21 10:20:20,418 - INFO -     FINAL: 3 valid instances stored with validation decisions
2025-09-21 10:20:20,419 - INFO -       Instance 1: metaphor - 'Judah is a lion’s whelp'
2025-09-21 10:20:20,419 - INFO -       Instance 2: metaphor - 'On prey, my son, have you grown.'
2025-09-21 10:20:20,419 - INFO -       Instance 3: simile - 'He crouches, lies down like a lion,Like a lioness'
2025-09-21 10:20:20,420 - INFO -   Processing Genesis 49:10 (3/3)...
2025-09-21 10:20:36,010 - INFO -     VALIDATING instance: scepter
2025-09-21 10:20:36,655 - INFO -       VALIDATION PASSED: The scepter is a concrete object representing the abstract concept of royal authority.  This is a genuine example of metonymy, where one thing (the scepter) stands in for another (kingship).  The text uses a physical object to represent an abstract political reality.
2025-09-21 10:20:36,656 - INFO -     VALIDATING instance: ruler’s staff
2025-09-21 10:20:37,343 - INFO -       VALIDATION PASSED: Metonymy - The "ruler's staff" is a concrete object used to represent the abstract concept of royal authority and power.  This is a classic example of metonymy, where one thing is used to represent another closely associated thing.  The staff is not merely described literally; it stands in for the king's reign and power itself.
2025-09-21 10:20:37,344 - INFO -     API Metadata: {'model_used': 'gemini-2.5-flash', 'context': 'poetic_blessing', 'retries': 0, 'input_tokens': 523, 'output_tokens': 357, 'all_detected_instances': [{'type': 'metonymy', 'hebrew_text': 'שֵׁ֙בֶט֙', 'english_text': 'scepter', 'explanation': 'The scepter, a physical object, is used to represent the abstract concept of royal authority and kingship.', 'vehicle_level_1': 'human', 'vehicle_level_2': 'scepter (royal staff)', 'tenor_level_1': 'covenant', 'tenor_level_2': 'royal authority/kingship', 'confidence': 1.0, 'speaker': 'Narrator', 'purpose': 'To symbolize the enduring royal authority and leadership promised to Judah.', 'original_detection_type': 'metonymy'}, {'type': 'metonymy', 'hebrew_text': 'וּמְחֹקֵ֖ק', 'english_text': 'ruler’s staff', 'explanation': "The ruler's staff (or lawgiver's staff), a physical implement, represents the authority and power of a ruler or lawgiver.", 'vehicle_level_1': 'human', 'vehicle_level_2': "ruler's staff", 'tenor_level_1': 'covenant', 'tenor_level_2': 'authority/leadership', 'confidence': 1.0, 'speaker': 'Narrator', 'purpose': "To symbolize the enduring authority and legislative power of Judah's leadership.", 'original_detection_type': 'metonymy'}], 'raw_llm_response': '```json\n[\n  {\n    "type": "metonymy",\n    "hebrew_text": "שֵׁ֙בֶט֙",\n    "english_text": "scepter",\n    "explanation": "The scepter, a physical object, is used to represent the abstract concept of royal authority and kingship.",\n    "vehicle_level_1": "human",\n    "vehicle_level_2": "scepter (royal staff)",\n    "tenor_level_1": "covenant",\n    "tenor_level_2": "royal authority/kingship",\n    "confidence": 1.0,\n    "speaker": "Narrator",\n    "purpose": "To symbolize the enduring royal authority and leadership promised to Judah."\n  },\n  {\n    "type": "metonymy",\n    "hebrew_text": "וּמְחֹקֵ֖ק",\n    "english_text": "ruler’s staff",\n    "explanation": "The ruler\'s staff (or lawgiver\'s staff), a physical implement, represents the authority and power of a ruler or lawgiver.",\n    "vehicle_level_1": "human",\n    "vehicle_level_2": "ruler\'s staff",\n    "tenor_level_1": "covenant",\n    "tenor_level_2": "authority/leadership",\n    "confidence": 1.0,\n    "speaker": "Narrator",\n    "purpose": "To symbolize the enduring authority and legislative power of Judah\'s leadership."\n  }\n]\n```', 'fallback_used': False}
2025-09-21 10:20:37,345 - INFO -     DETECTED: 2 instances, VALIDATED: 2 instances
2025-09-21 10:20:38,813 - INFO -     FINAL: 2 valid instances stored with validation decisions
2025-09-21 10:20:38,814 - INFO -       Instance 1: metonymy - 'scepter'
2025-09-21 10:20:38,814 - INFO -       Instance 2: metonymy - 'ruler’s staff'
2025-09-21 10:20:38,814 - INFO - Genesis 49 COMPLETED: 5 figurative instances from 3 verses
2025-09-21 10:20:38,846 - INFO - 
=== GENESIS PROCESSING COMPLETE ===
2025-09-21 10:20:38,846 - INFO - Database: genesis_49_multi_model_20250921_101957.db
2025-09-21 10:20:38,846 - INFO - Log file: genesis_49_multi_model_log_20250921_101957.txt
2025-09-21 10:20:38,847 - INFO - Total verses processed: 3
2025-09-21 10:20:38,847 - INFO - Total figurative instances: 5
2025-09-21 10:20:38,847 - INFO - Errors: 0
2025-09-21 10:20:38,847 - INFO - Processing time: 41.5 seconds
2025-09-21 10:20:38,848 - INFO - 
--- Multi-Model API Usage Statistics ---
2025-09-21 10:20:38,848 - INFO - Total Requests: 3
2025-09-21 10:20:38,848 - INFO - Primary Success: 3
2025-09-21 10:20:38,848 - INFO - Fallback Used: 0
2025-09-21 10:20:38,848 - INFO - Primary Success Rate: 1.0
2025-09-21 10:20:38,849 - INFO - Fallback Rate: 0.0
2025-09-21 10:20:38,849 - INFO - Total Input Tokens: 1496
2025-09-21 10:20:38,849 - INFO - Total Output Tokens: 987
2025-09-21 10:20:38,849 - INFO - Total Tokens: 2483
2025-09-21 10:20:38,850 - INFO - Primary Model: gemini-2.5-flash
2025-09-21 10:20:38,850 - INFO - Fallback Model: gemini-1.5-flash
2025-09-21 10:20:38,850 - INFO - Restriction Reasons: []
