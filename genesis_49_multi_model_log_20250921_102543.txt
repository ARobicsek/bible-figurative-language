2025-09-21 10:25:43,934 - INFO - Successfully loaded environment variables from: C:\Users\ariro\OneDrive\Documents\Bible\.env
2025-09-21 10:25:43,935 - INFO - === PROCESSING GENESIS CHAPTER(S) [49] WITH MULTI-MODEL API ===
2025-09-21 10:25:43,942 - INFO - Initializing Sefaria client...
2025-09-21 10:25:43,942 - INFO - Creating database: genesis_49_multi_model_20250921_102543.db
2025-09-21 10:25:44,183 - INFO - Initializing Metaphor Validator...
2025-09-21 10:25:44,183 - INFO - Initializing Gemini multi-model API...
2025-09-21 10:25:44,183 - INFO - --- Processing Genesis 49 ---
2025-09-21 10:25:44,183 - INFO - Fetching text for Genesis 49...
2025-09-21 10:25:44,526 - INFO - Retrieved 33 verses for Genesis 49
2025-09-21 10:25:44,526 - INFO - Filtering to process 10 selected verse(s): [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
2025-09-21 10:25:44,526 - INFO -   Processing Genesis 49:1 (1/10)...
2025-09-21 10:25:53,254 - INFO -     API Metadata: {'model_used': 'gemini-2.5-flash', 'context': 'poetic_blessing', 'retries': 0, 'input_tokens': 585, 'output_tokens': 650, 'all_detected_instances': [], 'llm_deliberation': 'I have carefully analyzed the provided text, "וַיִּקְרָ֥א יַעֲקֹ֖ב אֶל־בָּנָ֑יו וַיֹּ֗אמֶר הֵאָֽסְפוּ֙ וְאַגִּ֣ידָה לָכֶ֔ם אֵ֛ת אֲשֶׁר־יִקְרָ֥א אֶתְכֶ֖ם בְּאַחֲרִ֥ית הַיָּמִֽים" (And Jacob called his sons and said, “Come together that I may tell you what is to befall you in days to come."), against the provided guidelines for detecting figurative language.', 'fallback_used': False}
2025-09-21 10:25:53,280 - INFO -   Processing Genesis 49:2 (2/10)...
2025-09-21 10:25:59,544 - INFO -     API Metadata: {'model_used': 'gemini-2.5-flash', 'context': 'poetic_blessing', 'retries': 0, 'input_tokens': 533, 'output_tokens': 377, 'all_detected_instances': [], 'llm_deliberation': 'I have carefully examined the provided Hebrew text: "הִקָּבְצ֥וּ וְשִׁמְע֖וּ בְּנֵ֣י יַעֲקֹ֑ב וְשִׁמְע֖וּ אֶל־יִשְׂרָאֵ֥ל אֲבִיכֶֽם" (Assemble and hearken, O sons of Jacob; Hearken to Israel your father:).', 'fallback_used': False}
2025-09-21 10:25:59,545 - INFO -   Processing Genesis 49:3 (3/10)...
2025-09-21 10:26:38,801 - INFO -     VALIDATING instance: My might
2025-09-21 10:26:39,547 - INFO -       VALIDATION PASSED: Cross-domain transfer (Abstract to Concrete).  Reuben is not literally Jacob's "might," but the statement uses the abstract concept of strength to represent Reuben's role as a powerful and significant son, embodying his father's strength.  This is a metaphorical transfer from an abstract quality to a concrete person.
2025-09-21 10:26:39,548 - INFO -     VALIDATING instance: and first fruit of my vigor
2025-09-21 10:26:40,087 - INFO -       VALIDATION PASSED: Agricultural → Human metaphorical transfer.  The text uses the imagery of "first fruit" (agricultural term) to describe Reuben (human). This is a genuine metaphorical comparison, not a literal description.
2025-09-21 10:26:40,088 - INFO -     API Metadata: {'model_used': 'gemini-2.5-flash', 'context': 'poetic_blessing', 'retries': 0, 'input_tokens': 544, 'output_tokens': 1133, 'all_detected_instances': [{'type': 'metaphor', 'hebrew_text': 'כֹּחִ֖י', 'english_text': 'My might', 'explanation': "Reuben is identified directly with Jacob's 'might,' meaning he embodies or is the product of Jacob's procreative strength. This is a metaphor where a person is equated with an abstract quality.", 'vehicle_level_1': 'abstract', 'vehicle_level_2': 'might/strength', 'tenor_level_1': 'people', 'tenor_level_2': 'Reuben', 'confidence': 0.9, 'speaker': 'Jacob', 'purpose': "To emphasize Reuben's significance as the firstborn and the initial manifestation of Jacob's procreative power.", 'original_detection_type': 'metaphor'}, {'type': 'metaphor', 'hebrew_text': 'וְרֵאשִׁ֣ית אוֹנִ֑י', 'english_text': 'and first fruit of my vigor', 'explanation': "Reuben is identified directly with 'the beginning of Jacob's vigor,' meaning he is the first manifestation or product of Jacob's procreative power. This is a metaphor where a person is equated with an abstract concept.", 'vehicle_level_1': 'abstract', 'vehicle_level_2': 'beginning of vigor/procreative power', 'tenor_level_1': 'people', 'tenor_level_2': 'Reuben', 'confidence': 0.9, 'speaker': 'Jacob', 'purpose': "To emphasize Reuben's significance as the firstborn and the initial manifestation of Jacob's procreative power.", 'original_detection_type': 'metaphor'}], 'llm_deliberation': '1.  **"רְאוּבֵן֙ בְּכֹ֣רִי אַ֔תָּה" (Reuben, you are my first-born):**\n    *   **Considered:** Whether the term "first-born" could be interpreted figuratively.\n    *   **Reasoning:** This is a literal statement of Reuben\'s birth order and his factual status as Jacob\'s eldest son. It falls squarely under "standard genealogical language" and is therefore excluded from figurative analysis as per the instructions.', 'fallback_used': False}
2025-09-21 10:26:40,089 - INFO -     DETECTED: 2 instances, VALIDATED: 2 instances
2025-09-21 10:26:41,387 - INFO -     FINAL: 2 valid instances stored with validation decisions
2025-09-21 10:26:41,387 - INFO -       Instance 1: metaphor - 'My might'
2025-09-21 10:26:41,388 - INFO -       Instance 2: metaphor - 'and first fruit of my vigor'
2025-09-21 10:26:41,388 - INFO -   Processing Genesis 49:4 (4/10)...
2025-09-21 10:26:57,058 - INFO -     VALIDATING instance: Unstable as water
2025-09-21 10:26:57,698 - INFO -       VALIDATION PASSED: Genuine cross-domain comparison.  The simile directly compares Reuben's character (human behavior) to the unpredictable nature of water (natural phenomenon), creating a figurative image highlighting his instability and lack of reliability.  The use of "as" is clearly for figurative comparison, not literal description.
2025-09-21 10:26:57,699 - INFO -     API Metadata: {'model_used': 'gemini-2.5-flash', 'context': 'poetic_blessing', 'retries': 0, 'input_tokens': 571, 'output_tokens': 786, 'all_detected_instances': [{'type': 'simile', 'hebrew_text': 'פַּ֤חַז כַּמַּ֙יִם֙', 'english_text': 'Unstable as water', 'explanation': "Compares Reuben's impetuous, reckless, and unreliable character to the uncontrolled, flowing nature of water, indicating a lack of stability and control.", 'vehicle_level_1': 'nature', 'vehicle_level_2': 'water', 'tenor_level_1': 'people', 'tenor_level_2': "Reuben's character/disposition", 'confidence': 1.0, 'speaker': 'Narrator', 'purpose': "To vividly describe Reuben's lack of stability and control, explaining his loss of preeminence.", 'original_detection_type': 'simile'}], 'llm_deliberation': '1.  **Phrase/Concept:** פַּ֤חַז כַּמַּ֙יִם֙ (pachaz kammayim) / "Unstable as water"\n    *   **What I considered:** This phrase directly compares Reuben\'s character to the quality of water using the comparative particle "כַּ" (ka-).\n    *   **Reasoning for inclusion:** This is a clear simile, explicitly falling under the guideline "Cross-domain comparisons: \'unstable as water\'". It draws a parallel between a human characteristic (instability, impetuousness, recklessness) and a natural phenomenon (the uncontrolled, flowing nature of water). This also aligns with "Nature imagery for human qualities."\n    *   **Borderline cases debated:** None; this is a straightforward inclusion based on the explicit instruction.', 'fallback_used': False}
2025-09-21 10:26:57,699 - INFO -     DETECTED: 1 instances, VALIDATED: 1 instances
2025-09-21 10:26:58,413 - INFO -     FINAL: 1 valid instances stored with validation decisions
2025-09-21 10:26:58,414 - INFO -       Instance 1: simile - 'Unstable as water'
2025-09-21 10:26:58,414 - INFO -   Processing Genesis 49:5 (5/10)...
2025-09-21 10:27:10,587 - INFO -     API Metadata: {'model_used': 'gemini-2.5-flash', 'context': 'poetic_blessing', 'retries': 0, 'input_tokens': 510, 'output_tokens': 573, 'all_detected_instances': [], 'llm_deliberation': '1.  **"שִׁמְע֥וֹן וְלֵוִ֖י אַחִ֑ים" (Simeon and Levi are brothers/a pair)**\n    *   **What I considered:** Whether the term "אַחִ֑ים" (brothers/a pair) could be interpreted figuratively, implying a deeper, perhaps negative, bond beyond mere siblinghood, such as "partners in crime" or "two of a kind" in their violent tendencies.\n    *   **Reasoning for excluding:** "אַחִ֑ים" is the standard, literal Hebrew term for brothers. In the context of a poetic blessing or curse that often begins by identifying individuals and their relationships, stating their sibling status is a factual, genealogical statement. It falls under "standard genealogical language" which we are instructed to be conservative with. While the subsequent clause gives their pairing a negative connotation, the word itself is not a cross-domain comparison, an animal metaphor, or nature imagery for human qualities. It is a literal statement of kinship.', 'fallback_used': False}
2025-09-21 10:27:10,588 - INFO -   Processing Genesis 49:6 (6/10)...
2025-09-21 10:27:37,928 - INFO -     VALIDATING instance: ox (representing dignitary)
2025-09-21 10:27:38,645 - INFO -       VALIDATION PASSED: Cross-domain comparison - The ox, a common animal in ANE society, is used to represent a human dignitary, specifically Shechem, highlighting the severity and significance of his violent overthrow.  The comparison isn't literal; it's a figurative substitution emphasizing the power imbalance and the brutal nature of the act.
2025-09-21 10:27:38,646 - INFO -     API Metadata: {'model_used': 'gemini-2.5-flash', 'context': 'poetic_blessing', 'retries': 0, 'input_tokens': 697, 'output_tokens': 916, 'all_detected_instances': [{'type': 'metaphor', 'hebrew_text': 'שֽׁוֹר', 'english_text': 'ox (representing dignitary)', 'explanation': "The animal 'ox' is used metaphorically to represent a human dignitary or prince, specifically referring to the violent overthrow of Shechem by Simeon and Levi, as suggested by Canaanite literary usage and the context of Genesis 34.", 'vehicle_level_1': 'nature/animal', 'vehicle_level_2': 'ox/bull', 'tenor_level_1': 'people', 'tenor_level_2': 'dignitary/prince', 'confidence': 0.9, 'speaker': 'Jacob', 'purpose': 'To characterize the violent and destructive nature of Simeon and Levi, highlighting their capacity to harm even those in positions of authority.', 'original_detection_type': 'metaphor'}], 'llm_deliberation': 'I analyzed each phrase and concept in the provided text for potential figurative language, adhering strictly to the given guidelines.', 'fallback_used': False}
2025-09-21 10:27:38,646 - INFO -     DETECTED: 1 instances, VALIDATED: 1 instances
2025-09-21 10:27:39,402 - INFO -     FINAL: 1 valid instances stored with validation decisions
2025-09-21 10:27:39,403 - INFO -       Instance 1: metaphor - 'ox (representing dignitary)'
2025-09-21 10:27:39,403 - INFO -   Processing Genesis 49:7 (7/10)...
2025-09-21 10:28:04,837 - INFO -     VALIDATING instance: Cursed be their anger
2025-09-21 10:28:05,498 - INFO -       VALIDATION PASSED: Personification - The abstract concept of "anger" is given the human capacity to be cursed, a characteristic action applied to sentient beings.  This is a clear example of personification within the ANE context, where such attribution of human qualities to abstract concepts was understood figuratively.
2025-09-21 10:28:05,499 - INFO -     API Metadata: {'model_used': 'gemini-2.5-flash', 'context': 'poetic_blessing', 'retries': 0, 'input_tokens': 571, 'output_tokens': 884, 'all_detected_instances': [{'type': 'personification', 'hebrew_text': 'אָר֤וּר אַפָּם֙', 'english_text': 'Cursed be their anger', 'explanation': 'The abstract emotion of anger is treated as an entity capable of being cursed, a quality typically applied to sentient beings or objects. This attributes a human-like susceptibility to the emotion.', 'vehicle_level_1': 'human', 'vehicle_level_2': 'entity capable of being cursed', 'tenor_level_1': 'abstract', 'tenor_level_2': 'anger', 'confidence': 0.8, 'speaker': 'Narrator (Jacob)', 'purpose': 'To express a strong condemnation of the destructive nature of their anger.', 'original_detection_type': 'personification'}], 'llm_deliberation': '1.  **"Cursed be their anger" (אָר֤וּר אַפָּם֙):**\n    *   **Considered:** Whether this phrase constitutes personification. The verb "אָרוּר" (cursed) is an imprecation typically directed at individuals or entities that can be directly affected by a curse. "Anger" (אַף) is an abstract emotion.\n    *   **Reasoning for inclusion:** By applying a curse directly to the emotion itself, the text treats anger as if it were an entity capable of receiving a curse, thereby attributing a human-like susceptibility to it. This aligns with the definition of personification, where an abstract concept is given human qualities or actions. The JSON output explicitly includes "personification" as a type, indicating it should be considered. This is a stronger figurative element than merely a strong expression, as it reifies the emotion.\n    *   **Borderline cases/Debate:** One might argue it\'s simply a strong idiom or metonymy (cursing the anger as a proxy for cursing the people or their actions). However, the direct object of the curse being the abstract emotion itself, rather than the people, leans towards personification by treating the emotion as an agent or entity that can be targeted by a curse.', 'fallback_used': False}
2025-09-21 10:28:05,499 - INFO -     DETECTED: 1 instances, VALIDATED: 1 instances
2025-09-21 10:28:06,195 - INFO -     FINAL: 1 valid instances stored with validation decisions
2025-09-21 10:28:06,196 - INFO -       Instance 1: personification - 'Cursed be their anger'
2025-09-21 10:28:06,196 - INFO -   Processing Genesis 49:8 (8/10)...
2025-09-21 10:28:20,088 - INFO -     API Metadata: {'model_used': 'gemini-2.5-flash', 'context': 'poetic_blessing', 'retries': 0, 'input_tokens': 567, 'output_tokens': 649, 'all_detected_instances': [], 'llm_deliberation': '1.  **"You, O Judah, your brothers shall praise" (יְהוּדָ֗ה אַתָּה֙ יוֹד֣וּךָ אַחֶ֔יךָ):**\n    *   **Considered:** Whether "Judah" here functions as a personification of the tribe, or if "praise" is used in a non-literal sense.\n    *   **Reasoning:** "Judah" is a direct address to the tribal progenitor or the tribe itself, which is standard genealogical and tribal language. "Your brothers" refers to the other tribes/progenitors. "Praise" is a literal action of acknowledging superiority or worth. There is no animal imagery, nature imagery, or cross-domain comparison present. This is a direct statement about Judah\'s future status among his kin. I excluded it as figurative.', 'fallback_used': False}
2025-09-21 10:28:20,088 - INFO -   Processing Genesis 49:9 (9/10)...
2025-09-21 10:28:40,251 - INFO -     VALIDATING instance: Judah is a lion’s whelp
2025-09-21 10:28:40,962 - INFO -       VALIDATION PASSED: Cross-domain comparison (people as animals).  The statement directly equates Judah (a tribe/people) with a lion's whelp, transferring characteristics of strength and power from the animal kingdom to the human realm.  This is a clear figurative comparison, not a literal statement of biological identity.
2025-09-21 10:28:40,963 - INFO -     VALIDATING instance: On prey, my son, have you grown.
2025-09-21 10:28:41,592 - INFO -       VALIDATION PASSED: Cross-domain comparison (animal to human).  The growth and success of Judah are described using the imagery of a lion cub thriving and successfully hunting prey. This is not a literal description of Judah's actions but a figurative comparison highlighting his strength and prosperity.
2025-09-21 10:28:41,593 - INFO -     VALIDATING instance: He crouches, lies down like a lion
2025-09-21 10:28:42,442 - INFO -       VALIDATION PASSED: Simile -  The passage uses "like a lion" and "like a lioness" to compare Judah's posture and demeanor to that of a powerful predator. This is a figurative comparison highlighting Judah's strength and potential for action, not a literal description of his physical resemblance to a lion.  The comparison is between Judah's behavior and that of a lion, two distinct entities, creating a new imaginative meaning.
2025-09-21 10:28:42,442 - INFO -     VALIDATING instance: Like a lioness—who dare rouse him?
2025-09-21 10:28:43,289 - INFO -       VALIDATION PASSED: Simile -  The passage uses "like a lioness" to compare Judah's strength and untouchability to that of a sleeping lioness, a powerful predator. This is a figurative comparison of two unlike things (a human leader and a wild animal) using "like" to create a vivid image of Judah's dominance and the danger of opposing him.  The rhetorical question further emphasizes the figurative nature of the comparison.
2025-09-21 10:28:43,290 - INFO -     API Metadata: {'model_used': 'gemini-2.5-flash', 'context': 'poetic_blessing', 'retries': 0, 'input_tokens': 636, 'output_tokens': 1519, 'all_detected_instances': [{'type': 'metaphor', 'hebrew_text': 'גּ֤וּר אַרְיֵה֙ יְהוּדָ֔ה', 'english_text': 'Judah is a lion’s whelp', 'explanation': 'Judah, representing the tribe, is directly identified with a young lion, symbolizing inherent strength, potential, and ferocity.', 'vehicle_level_1': 'nature', 'vehicle_level_2': "lion's whelp", 'tenor_level_1': 'people', 'tenor_level_2': 'Judah (tribe)', 'confidence': 1.0, 'speaker': 'Narrator', 'purpose': "To characterize Judah's inherent strength and future dominance.", 'original_detection_type': 'metaphor'}, {'type': 'metaphor', 'hebrew_text': 'מִטֶּ֖רֶף בְּנִ֣י עָלִ֑יתָ', 'english_text': 'On prey, my son, have you grown.', 'explanation': "Continuing the lion metaphor, Judah's growth and prosperity are described in terms of a lion's acquisition of prey, signifying spoils of war or resources that contribute to his strength.", 'vehicle_level_1': 'nature', 'vehicle_level_2': 'prey (as sustenance for a lion)', 'tenor_level_1': 'people', 'tenor_level_2': 'Judah (tribe)', 'confidence': 1.0, 'speaker': 'Narrator', 'purpose': "To describe Judah's growth and prosperity through successful acquisition, reinforcing the image of strength.", 'original_detection_type': 'metaphor'}, {'type': 'simile', 'hebrew_text': 'כָּרַ֨ע רָבַ֧ץ כְּאַרְיֵ֛ה', 'english_text': 'He crouches, lies down like a lion', 'explanation': "Judah's posture of rest or readiness is compared to that of a powerful lion, emphasizing his formidable presence and secure status even in repose.", 'vehicle_level_1': 'nature', 'vehicle_level_2': 'lion', 'tenor_level_1': 'people', 'tenor_level_2': 'Judah (tribe)', 'confidence': 1.0, 'speaker': 'Narrator', 'purpose': "To illustrate Judah's powerful and secure status, even when at rest.", 'original_detection_type': 'simile'}, {'type': 'simile', 'hebrew_text': 'וּכְלָבִ֖יא מִ֥י יְקִימֶֽנּוּ', 'english_text': 'Like a lioness—who dare rouse him?', 'explanation': "Judah's unassailable position is compared to a sleeping lioness (or powerful lion), with a rhetorical question highlighting his invincibility and the danger of challenging him.", 'vehicle_level_1': 'nature', 'vehicle_level_2': 'lioness (or powerful lion)', 'tenor_level_1': 'people', 'tenor_level_2': 'Judah (tribe)', 'confidence': 1.0, 'speaker': 'Narrator', 'purpose': "To emphasize Judah's formidable power and the danger of challenging him.", 'original_detection_type': 'simile'}], 'llm_deliberation': 'I have analyzed the provided Hebrew text and its English translation, focusing on identifying figurative language according to the given guidelines.', 'fallback_used': False}
2025-09-21 10:28:43,291 - INFO -     DETECTED: 4 instances, VALIDATED: 4 instances
2025-09-21 10:28:46,444 - INFO -     FINAL: 4 valid instances stored with validation decisions
2025-09-21 10:28:46,444 - INFO -       Instance 1: metaphor - 'Judah is a lion’s whelp'
2025-09-21 10:28:46,445 - INFO -       Instance 2: metaphor - 'On prey, my son, have you grown.'
2025-09-21 10:28:46,445 - INFO -       Instance 3: simile - 'He crouches, lies down like a lion'
2025-09-21 10:28:46,445 - INFO -       ... and 1 more instances
2025-09-21 10:28:46,445 - INFO -   Processing Genesis 49:10 (10/10)...
2025-09-21 10:29:02,367 - INFO -     API Metadata: {'model_used': 'gemini-2.5-flash', 'context': 'poetic_blessing', 'retries': 0, 'input_tokens': 638, 'output_tokens': 979, 'all_detected_instances': [], 'llm_deliberation': '1.  **"שֵׁ֙בֶט֙" (shevet) - "scepter":**\n    *   **What I considered:** I considered if "scepter" might be a metaphor for royal authority or kingship.\n    *   **Reasoning for excluding:** While a scepter is a symbol of authority, it is also a literal object of royal regalia. The instructions specify looking for "cross-domain comparisons" or "clear metaphorical relationships between people and nature/animals." A scepter representing kingship is a form of metonymy (where a symbol stands for the concept it represents), but it is not a cross-domain comparison in the sense of comparing a person to an animal or an abstract concept to a natural phenomenon. It\'s a literal object associated with a literal function. Given the instruction to "BE CONSERVATIVE WITH... historical statements" and the focus on more explicit metaphorical types, I am excluding this as figurative language according to the provided guidelines.', 'fallback_used': False}
2025-09-21 10:29:02,367 - INFO - Genesis 49 COMPLETED: 9 figurative instances from 10 verses
2025-09-21 10:29:02,405 - INFO - 
=== GENESIS PROCESSING COMPLETE ===
2025-09-21 10:29:02,405 - INFO - Database: genesis_49_multi_model_20250921_102543.db
2025-09-21 10:29:02,406 - INFO - Log file: genesis_49_multi_model_log_20250921_102543.txt
2025-09-21 10:29:02,406 - INFO - Total verses processed: 10
2025-09-21 10:29:02,406 - INFO - Total figurative instances: 9
2025-09-21 10:29:02,406 - INFO - Errors: 0
2025-09-21 10:29:02,407 - INFO - Processing time: 198.5 seconds
2025-09-21 10:29:02,407 - INFO - 
--- Multi-Model API Usage Statistics ---
2025-09-21 10:29:02,407 - INFO - Total Requests: 10
2025-09-21 10:29:02,407 - INFO - Primary Success: 10
2025-09-21 10:29:02,407 - INFO - Fallback Used: 0
2025-09-21 10:29:02,408 - INFO - Primary Success Rate: 1.0
2025-09-21 10:29:02,408 - INFO - Fallback Rate: 0.0
2025-09-21 10:29:02,408 - INFO - Total Input Tokens: 5852
2025-09-21 10:29:02,408 - INFO - Total Output Tokens: 8466
2025-09-21 10:29:02,408 - INFO - Total Tokens: 14318
2025-09-21 10:29:02,408 - INFO - Primary Model: gemini-2.5-flash
2025-09-21 10:29:02,408 - INFO - Fallback Model: gemini-1.5-flash
2025-09-21 10:29:02,409 - INFO - Restriction Reasons: []
