2025-09-21 10:32:15,336 - INFO - Successfully loaded environment variables from: C:\Users\ariro\OneDrive\Documents\Bible\.env
2025-09-21 10:32:15,337 - INFO - === PROCESSING GENESIS CHAPTER(S) [49] WITH MULTI-MODEL API ===
2025-09-21 10:32:15,337 - INFO - Initializing Sefaria client...
2025-09-21 10:32:15,338 - INFO - Creating database: genesis_49_multi_model_20250921_103215.db
2025-09-21 10:32:15,665 - INFO - Initializing Metaphor Validator...
2025-09-21 10:32:15,666 - INFO - Initializing Gemini multi-model API...
2025-09-21 10:32:15,666 - INFO - --- Processing Genesis 49 ---
2025-09-21 10:32:15,666 - INFO - Fetching text for Genesis 49...
2025-09-21 10:32:16,070 - INFO - Retrieved 33 verses for Genesis 49
2025-09-21 10:32:16,070 - INFO - Filtering to process 2 selected verse(s): [9, 10]
2025-09-21 10:32:16,070 - INFO -   Processing Genesis 49:9 (1/2)...
2025-09-21 10:32:36,991 - INFO -     VALIDATING instance: Judah is a lion’s whelp
2025-09-21 10:32:37,657 - INFO -       VALIDATION PASSED: Cross-domain comparison (people as animals).  The statement directly equates Judah with a lion's whelp, transferring characteristics of strength, power, and predatory nature from the animal kingdom to a human tribe.  This is not a literal statement; Judah is not literally a lion cub.
2025-09-21 10:32:37,658 - INFO -     VALIDATING instance: On prey, my son, have you grown.
2025-09-21 10:32:38,286 - INFO -       VALIDATION PASSED: Metaphor - The phrase uses the imagery of a lion growing strong by consuming prey to describe Judah's growth in power and influence through conquest.  This is a cross-domain comparison (animal to human) creating a figurative meaning beyond a literal description of Judah's development.
2025-09-21 10:32:38,286 - INFO -     VALIDATING instance: He crouches, lies down like a lion, Like a lioness
2025-09-21 10:32:39,130 - INFO -       VALIDATION PASSED: Simile -  The passage uses "like a lion" and "like a lioness" to compare Judah's resting posture and demeanor to that of powerful, untouchable predators. This is a figurative comparison highlighting Judah's strength and security, not a literal description of his physical appearance or actions.  The comparison is between Judah's state and the state of a lion, not a literal description of his physical actions.
2025-09-21 10:32:39,131 - INFO -     API Metadata: {'model_used': 'gemini-2.5-flash', 'context': 'poetic_blessing', 'retries': 0, 'input_tokens': 637, 'output_tokens': 1373, 'all_detected_instances': [{'type': 'metaphor', 'hebrew_text': 'גּ֤וּר אַרְיֵה֙ יְהוּדָ֔ה', 'english_text': 'Judah is a lion’s whelp', 'explanation': 'Judah is directly equated with a young lion, symbolizing inherent strength, potential, and a predatory nature.', 'vehicle_level_1': 'nature', 'vehicle_level_2': "animal (lion's whelp)", 'tenor_level_1': 'people', 'tenor_level_2': 'Judah (tribe)', 'confidence': 1.0, 'speaker': 'Jacob', 'purpose': "To characterize Judah's inherent strength and future dominance.", 'original_detection_type': 'metaphor'}, {'type': 'metaphor', 'hebrew_text': 'מִטֶּ֖רֶף בְּנִ֣י עָלִ֑יתָ', 'english_text': 'On prey, my son, have you grown.', 'explanation': "This phrase extends the lion metaphor, describing Judah's growth and acquisition of power through conquest and spoils, akin to a lion growing strong from its prey.", 'vehicle_level_1': 'nature', 'vehicle_level_2': "animal (lion's action of growing from prey)", 'tenor_level_1': 'people', 'tenor_level_2': 'Judah (tribe)', 'confidence': 0.9, 'speaker': 'Jacob', 'purpose': "To illustrate the manner of Judah's power acquisition and growth, reinforcing the predatory imagery.", 'original_detection_type': 'metaphor'}, {'type': 'simile', 'hebrew_text': 'כָּרַ֨ע רָבַ֧ץ כְּאַרְיֵ֛ה וּכְלָבִ֖יא', 'english_text': 'He crouches, lies down like a lion, Like a lioness', 'explanation': "Judah's formidable and secure repose is explicitly compared to that of a powerful lion and lioness, emphasizing his unchallengeable authority and security even when at rest.", 'vehicle_level_1': 'nature', 'vehicle_level_2': 'animal (lion/lioness)', 'tenor_level_1': 'people', 'tenor_level_2': 'Judah (tribe)', 'confidence': 1.0, 'speaker': 'Jacob', 'purpose': "To emphasize Judah's formidable power, security, and unchallengeable authority.", 'original_detection_type': 'simile'}], 'llm_deliberation': '*   **"גּ֤וּר אַרְיֵה֙ יְהוּדָ֔ה" (Judah is a lion’s whelp)**\n    *   **Considered:** This phrase was considered a direct metaphor.\n    *   **Reasoning:** The text directly equates "Judah" (the tribe or its progenitor) with "a lion\'s whelp." This falls squarely under the instruction to mark "Tribal characterizations using animals" and "Clear metaphorical relationships between people and nature/animals." It attributes the inherent characteristics of a young lion – strength, potential, and a predatory nature – to Judah. This is not a literal statement but a symbolic representation of Judah\'s character and destiny.', 'fallback_used': False}
2025-09-21 10:32:39,150 - INFO -     DETECTED: 3 instances, VALIDATED: 3 instances
2025-09-21 10:32:41,456 - INFO -     FINAL: 3 valid instances stored with validation decisions
2025-09-21 10:32:41,457 - INFO -       Instance 1: metaphor - 'Judah is a lion’s whelp'
2025-09-21 10:32:41,457 - INFO -       Instance 2: metaphor - 'On prey, my son, have you grown.'
2025-09-21 10:32:41,458 - INFO -       Instance 3: simile - 'He crouches, lies down like a lion, Like a lioness'
2025-09-21 10:32:41,458 - INFO -   Processing Genesis 49:10 (2/2)...
2025-09-21 10:33:10,223 - INFO -     VALIDATING instance: scepter
2025-09-21 10:33:10,832 - INFO -       VALIDATION PASSED: Metonymy - The scepter is a concrete object representing the abstract concept of royal authority and kingship within the context of Judah's lineage.  This is a genuine figurative use, transferring the concrete symbol to represent the abstract power it symbolizes.
2025-09-21 10:33:10,832 - INFO -     VALIDATING instance: ruler’s staff
2025-09-21 10:33:11,502 - INFO -       VALIDATION PASSED: Metonymy - The "ruler's staff" is a concrete object used to represent the abstract concept of royal authority and power, a common metonymic device.  The passage doesn't use the staff literally; it's a symbol representing the enduring nature of Judah's leadership.
2025-09-21 10:33:11,503 - INFO -     VALIDATING instance: from between his feet
2025-09-21 10:33:12,324 - INFO -       VALIDATION PASSED: Metaphor - The phrase "from between his feet" doesn't literally refer to a physical location on Judah's body.  It metaphorically represents the lineage and continued succession of rulers from his descendants.  The physical location acts as a symbol for the source and continuation of royal power within the line of Judah.  This is a metaphorical transfer from spatial location to represent genealogical succession.
2025-09-21 10:33:12,325 - INFO -     API Metadata: {'model_used': 'gemini-2.5-flash', 'context': 'poetic_blessing', 'retries': 0, 'input_tokens': 639, 'output_tokens': 1228, 'all_detected_instances': [{'type': 'metonymy', 'hebrew_text': 'שֵׁ֙בֶט֙', 'english_text': 'scepter', 'explanation': 'The scepter, a physical object, stands for the abstract concept of kingship and royal authority.', 'vehicle_level_1': 'nature', 'vehicle_level_2': 'object', 'tenor_level_1': 'abstract', 'tenor_level_2': 'kingship/authority', 'confidence': 1.0, 'speaker': 'Narrator', 'purpose': 'To symbolize the enduring royal authority of Judah.', 'original_detection_type': 'metonymy'}, {'type': 'metonymy', 'hebrew_text': 'מְחֹקֵ֖ק', 'english_text': 'ruler’s staff', 'explanation': "The ruler's staff, a physical object, stands for the abstract concept of authority and governance, parallel to 'scepter'.", 'vehicle_level_1': 'nature', 'vehicle_level_2': 'object', 'tenor_level_1': 'abstract', 'tenor_level_2': 'authority/governance', 'confidence': 1.0, 'speaker': 'Narrator', 'purpose': 'To symbolize the enduring authority and right to rule from Judah.', 'original_detection_type': 'metonymy'}, {'type': 'other', 'hebrew_text': 'מִבֵּ֣ין רַגְלָ֑יו', 'english_text': 'from between his feet', 'explanation': "This phrase, referring to a physical location, represents the source of progeny or lineage, indicating the continuity of rulers from Judah's descendants.", 'vehicle_level_1': 'human', 'vehicle_level_2': 'body part/location', 'tenor_level_1': 'people', 'tenor_level_2': 'lineage/progeny', 'confidence': 0.9, 'speaker': 'Narrator', 'purpose': "To emphasize the continuous emergence of rulers from Judah's descendants.", 'original_detection_type': 'synecdoche'}], 'llm_deliberation': '*   **"scepter" (שֵׁ֙בֶט֙) and "ruler\'s staff" (מְחֹקֵ֖ק):** I considered if these terms refer to literal objects only or if they carry a symbolic meaning. In ancient Near Eastern and biblical contexts, a scepter and a ruler\'s staff are universally recognized symbols of royal authority, power, and governance. While they are physical objects, their use here is not merely descriptive of an object but rather to represent the abstract concept of kingship and the right to rule. The statement that these will not "depart from Judah" signifies that the *authority* and *right to rule* will remain with Judah\'s lineage. Therefore, they function as metonymy, where a concrete attribute or symbol stands for the abstract institution or concept it represents. This is a clear metaphorical relationship between an object and an abstract concept.', 'fallback_used': False}
2025-09-21 10:33:12,326 - INFO -     DETECTED: 3 instances, VALIDATED: 3 instances
2025-09-21 10:33:14,410 - INFO -     FINAL: 3 valid instances stored with validation decisions
2025-09-21 10:33:14,410 - INFO -       Instance 1: metonymy - 'scepter'
2025-09-21 10:33:14,410 - INFO -       Instance 2: metonymy - 'ruler’s staff'
2025-09-21 10:33:14,411 - INFO -       Instance 3: other - 'from between his feet'
2025-09-21 10:33:14,411 - INFO - Genesis 49 COMPLETED: 6 figurative instances from 2 verses
2025-09-21 10:33:14,433 - INFO - 
=== GENESIS PROCESSING COMPLETE ===
2025-09-21 10:33:14,434 - INFO - Database: genesis_49_multi_model_20250921_103215.db
2025-09-21 10:33:14,434 - INFO - Log file: genesis_49_multi_model_log_20250921_103215.txt
2025-09-21 10:33:14,434 - INFO - Total verses processed: 2
2025-09-21 10:33:14,435 - INFO - Total figurative instances: 6
2025-09-21 10:33:14,435 - INFO - Errors: 0
2025-09-21 10:33:14,435 - INFO - Processing time: 59.1 seconds
2025-09-21 10:33:14,436 - INFO - 
--- Multi-Model API Usage Statistics ---
2025-09-21 10:33:14,436 - INFO - Total Requests: 2
2025-09-21 10:33:14,436 - INFO - Primary Success: 2
2025-09-21 10:33:14,436 - INFO - Fallback Used: 0
2025-09-21 10:33:14,436 - INFO - Primary Success Rate: 1.0
2025-09-21 10:33:14,437 - INFO - Fallback Rate: 0.0
2025-09-21 10:33:14,437 - INFO - Total Input Tokens: 1276
2025-09-21 10:33:14,437 - INFO - Total Output Tokens: 2601
2025-09-21 10:33:14,437 - INFO - Total Tokens: 3877
2025-09-21 10:33:14,438 - INFO - Primary Model: gemini-2.5-flash
2025-09-21 10:33:14,438 - INFO - Fallback Model: gemini-1.5-flash
2025-09-21 10:33:14,438 - INFO - Restriction Reasons: []
