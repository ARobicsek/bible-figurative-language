2025-09-27 21:17:05,590 - INFO - Successfully loaded environment variables from: C:\Users\ariro\OneDrive\Documents\Bible\.env
2025-09-27 21:17:05,590 - INFO - === TESTING PROBLEMATIC GENESIS VERSES ===
2025-09-27 21:17:05,590 - INFO - Verses to test: 11
2025-09-27 21:17:05,590 - INFO - Initializing Sefaria client...
2025-09-27 21:17:05,590 - INFO - Creating database: test_problematic_genesis_verses_20250927_2117.db
2025-09-27 21:17:05,671 - INFO - Initializing MetaphorValidator...
2025-09-27 21:17:05,672 - INFO - Initializing Flexible Tagging Gemini Client...
2025-09-27 21:17:05,672 - INFO - --- PROCESSING: Genesis 14 ---
2025-09-27 21:17:05,676 - DEBUG - Starting new HTTPS connection (1): www.sefaria.org:443
2025-09-27 21:17:05,974 - DEBUG - https://www.sefaria.org:443 "GET /api/texts/Genesis.14 HTTP/1.1" 200 None
2025-09-27 21:17:06,021 - INFO - Processing 1 problematic verses from Genesis 14
2025-09-27 21:17:06,022 - INFO - Worker 1: Processing Genesis 14:20
2025-09-27 21:17:26,325 - DEBUG - 🔍 API Response Debug Info:
2025-09-27 21:17:26,334 - DEBUG -   📊 Total candidates: 1
2025-09-27 21:17:26,336 - DEBUG -   🏁 Finish reason: 1
2025-09-27 21:17:26,343 - DEBUG -   📝 Finish reason type: <enum 'FinishReason'>
2025-09-27 21:17:26,345 - DEBUG -   📝 Finish reason str: '1'
2025-09-27 21:17:26,347 - DEBUG -   🪙 Usage Metadata:
2025-09-27 21:17:26,349 - DEBUG -     - Prompt Token Count: 1343
2025-09-27 21:17:26,349 - DEBUG -     - Candidates Token Count: 1027
2025-09-27 21:17:26,349 - DEBUG -     - Total Token Count: 4768
2025-09-27 21:17:26,349 - DEBUG -   🛡️ Safety ratings: None
2025-09-27 21:17:26,350 - DEBUG -   📄 Has content: True
2025-09-27 21:17:26,351 - DEBUG -   📄 Content parts count: 1
2025-09-27 21:17:26,355 - DEBUG -   📝 Response text length: 3617 characters
2025-09-27 21:17:26,356 - DEBUG -   📝 Response ends with: 'rm the completeness of Abram's triumph."
  }
]
```'
2025-09-27 21:17:26,357 - WARNING -   ⚠️ Response appears to end abruptly (no proper punctuation)
2025-09-27 21:17:26,361 - DEBUG - 🔍 PARSING DEBUG - Starting response parsing:
2025-09-27 21:17:26,364 - DEBUG -   📏 Total response length: 3617
2025-09-27 21:17:26,365 - DEBUG -   📄 Response preview (first 200 chars): 'FIGURATIVE_DETECTION:
1.  **"וּבָרוּךְ֙ אֵ֣ל עֶלְי֔וֹן" (And blessed be God Most High):**
    *   Considered: If "Most High" (עֶלְי֔וֹן) could be hyperbole or a metaphor for God's supreme status.
    '
2025-09-27 21:17:26,367 - DEBUG -   📄 Response ending (last 200 chars): '.95,
    "speaker": "Melchizedek",
    "purpose": "To emphasize God's active role in granting Abram victory and dominion over his enemies, and to affirm the completeness of Abram's triumph."
  }
]
```'
2025-09-27 21:17:26,369 - DEBUG -   📝 FIGURATIVE_DETECTION extracted: 1997 chars
2025-09-27 21:17:26,371 - DEBUG -   📝 Detection ends with: 'ative idioms as 'idiom' type" confirms its inclusion.

4.  **"וַיִּתֶּן־ל֥וֹ מַעֲשֵׂ֖ר מִכֹּֽל" (And'
2025-09-27 21:17:26,372 - DEBUG -   ⚠️ No TAGGING_ANALYSIS section found
2025-09-27 21:17:26,374 - DEBUG - 🔍 JSON EXTRACTION DEBUG:
2025-09-27 21:17:26,376 - INFO -     🔍 JSON Array Extraction:
2025-09-27 21:17:26,378 - INFO -       📄 Found JSON-like array: 7 chars
2025-09-27 21:17:26,380 - INFO -       📄 Array content: '[Abram]'
2025-09-27 21:17:26,381 - INFO -       ⚠️ Array doesn't contain objects - continuing search
2025-09-27 21:17:26,383 - INFO -       ⚠️ No JSON OUTPUT section found
2025-09-27 21:17:26,384 - INFO -       📄 Attempting sophisticated bracket matching from position 2020
2025-09-27 21:17:26,385 - INFO -       📄 Bracket matching found: 7 chars
2025-09-27 21:17:26,386 - INFO -       ⚠️ Bracket-matched array doesn't contain objects
2025-09-27 21:17:26,387 - WARNING -       ❌ No valid JSON array found - returning empty
2025-09-27 21:17:26,388 - DEBUG -   📄 JSON string extracted: 2 chars
2025-09-27 21:17:26,389 - DEBUG -   📄 JSON preview: '[]'
2025-09-27 21:17:26,391 - DEBUG -   📄 COMPLETE JSON CONTENT:
2025-09-27 21:17:26,392 - DEBUG - ---JSON-START---
2025-09-27 21:17:26,392 - DEBUG - []
2025-09-27 21:17:26,392 - DEBUG - ---JSON-END---
2025-09-27 21:17:26,392 - INFO - 🔍 FALLBACK CHECK - No instances found but have deliberation text
2025-09-27 21:17:26,393 - INFO -   📝 Has figurative indicators: True
2025-09-27 21:17:26,395 - INFO -   📝 Appears to end abruptly: True
2025-09-27 21:17:26,397 - INFO -   📝 Has substantial analysis: True
2025-09-27 21:17:26,398 - INFO -   📝 Has figurative analysis: True
2025-09-27 21:17:26,399 - INFO -   📝 Has figurative conclusions: False
2025-09-27 21:17:26,400 - INFO -   📝 Missing TAGGING_ANALYSIS: False
2025-09-27 21:17:26,401 - INFO -   📝 Analysis complete but JSON empty: False
2025-09-27 21:17:26,402 - INFO -   📝 Should trigger fallback: True
2025-09-27 21:17:26,403 - ERROR - ❌ API response was truncated. No JSON was found and fallback parsing is disabled.
2025-09-27 21:17:26,405 - ERROR - ❌ This verse must be re-processed. Returning no instances.
2025-09-27 21:17:26,406 - WARNING - Worker 1: Truncation detected in Genesis 14:20, retrying with Pro model
2025-09-27 21:17:26,406 - INFO - Using model override: gemini-2.5-pro
2025-09-27 21:17:51,480 - DEBUG - 🔍 API Response Debug Info:
2025-09-27 21:17:51,483 - DEBUG -   📊 Total candidates: 1
2025-09-27 21:17:51,486 - DEBUG -   🏁 Finish reason: 1
2025-09-27 21:17:51,487 - DEBUG -   📝 Finish reason type: <enum 'FinishReason'>
2025-09-27 21:17:51,490 - DEBUG -   📝 Finish reason str: '1'
2025-09-27 21:17:51,492 - DEBUG -   🪙 Usage Metadata:
2025-09-27 21:17:51,494 - DEBUG -     - Prompt Token Count: 1343
2025-09-27 21:17:51,494 - DEBUG -     - Candidates Token Count: 910
2025-09-27 21:17:51,495 - DEBUG -     - Total Token Count: 4355
2025-09-27 21:17:51,495 - DEBUG -   🛡️ Safety ratings: None
2025-09-27 21:17:51,497 - DEBUG -   📄 Has content: True
2025-09-27 21:17:51,498 - DEBUG -   📄 Content parts count: 1
2025-09-27 21:17:51,501 - DEBUG -   📝 Response text length: 3256 characters
2025-09-27 21:17:51,504 - DEBUG -   📝 Response ends with: 'ze the completeness of the enemies' defeat."
  }
]'
2025-09-27 21:17:51,506 - DEBUG - 🔍 PARSING DEBUG - Starting response parsing:
2025-09-27 21:17:51,508 - DEBUG -   📏 Total response length: 3256
2025-09-27 21:17:51,510 - DEBUG -   📄 Response preview (first 200 chars): 'FIGURATIVE_DETECTION:
1.  **`אֵ֣ל עֶלְי֔וֹן` (God Most High):** I considered whether "Most High" is a metaphor. I concluded it is not. It is a standard divine epithet in the Hebrew Bible and Ancient N'
2025-09-27 21:17:51,512 - DEBUG -   📄 Response ending (last 200 chars): '   "speaker": "Melchizedek",
    "purpose": "To praise God for granting Abram a total and decisive victory, using a conventional expression to emphasize the completeness of the enemies' defeat."
  }
]'
2025-09-27 21:17:51,514 - DEBUG -   📝 FIGURATIVE_DETECTION extracted: 1617 chars
2025-09-27 21:17:51,516 - DEBUG -   📝 Detection ends with: 'y that such figurative idioms should be classified as "idiom." This is the phrase I will mark in the'
2025-09-27 21:17:51,519 - DEBUG -   ⚠️ No TAGGING_ANALYSIS section found
2025-09-27 21:17:51,521 - DEBUG - 🔍 JSON EXTRACTION DEBUG:
2025-09-27 21:17:51,523 - INFO -     🔍 JSON Array Extraction:
2025-09-27 21:17:51,524 - INFO -       📄 Found JSON-like array: 7 chars
2025-09-27 21:17:51,526 - INFO -       📄 Array content: '[Abram]'
2025-09-27 21:17:51,528 - INFO -       ⚠️ Array doesn't contain objects - continuing search
2025-09-27 21:17:51,530 - INFO -       📄 Found JSON OUTPUT section: 1605 chars
2025-09-27 21:17:51,532 - WARNING -       ⚠️ JSON appears incomplete in OUTPUT section
2025-09-27 21:17:51,534 - INFO -       📄 Attempting sophisticated bracket matching from position 1699
2025-09-27 21:17:51,536 - INFO -       📄 Bracket matching found: 7 chars
2025-09-27 21:17:51,538 - INFO -       ⚠️ Bracket-matched array doesn't contain objects
2025-09-27 21:17:51,540 - WARNING -       ❌ No valid JSON array found - returning empty
2025-09-27 21:17:51,541 - DEBUG -   📄 JSON string extracted: 2 chars
2025-09-27 21:17:51,543 - DEBUG -   📄 JSON preview: '[]'
2025-09-27 21:17:51,545 - DEBUG -   📄 COMPLETE JSON CONTENT:
2025-09-27 21:17:51,546 - DEBUG - ---JSON-START---
2025-09-27 21:17:51,546 - DEBUG - []
2025-09-27 21:17:51,546 - DEBUG - ---JSON-END---
2025-09-27 21:17:51,547 - INFO - 🔍 FALLBACK CHECK - No instances found but have deliberation text
2025-09-27 21:17:51,548 - INFO -   📝 Has figurative indicators: True
2025-09-27 21:17:51,550 - INFO -   📝 Appears to end abruptly: True
2025-09-27 21:17:51,552 - INFO -   📝 Has substantial analysis: True
2025-09-27 21:17:51,555 - INFO -   📝 Has figurative analysis: True
2025-09-27 21:17:51,557 - INFO -   📝 Has figurative conclusions: True
2025-09-27 21:17:51,559 - INFO -   📝 Missing TAGGING_ANALYSIS: True
2025-09-27 21:17:51,561 - INFO -   📝 Analysis complete but JSON empty: True
2025-09-27 21:17:51,562 - INFO -   📝 Should trigger fallback: True
2025-09-27 21:17:51,564 - ERROR - ❌ API response was truncated. No JSON was found and fallback parsing is disabled.
2025-09-27 21:17:51,568 - ERROR - ❌ This verse must be re-processed. Returning no instances.
2025-09-27 21:17:51,571 - WARNING - Worker 1: Pro model also truncated for Genesis 14:20 - trying tertiary decomposition fallback
2025-09-27 21:17:51,571 - INFO - 🔄 TERTIARY FALLBACK: Using task decomposition approach
2025-09-27 21:18:18,853 - INFO -     🔍 JSON Array Extraction:
2025-09-27 21:18:18,855 - INFO -       📄 Found JSON-like array: 2259 chars
2025-09-27 21:18:18,857 - INFO -       📄 Array content: '[
- **Phrase Considered:** "delivered your foes into your hand" (אֲשֶׁר־מִגֵּ֥ן צָרֶ֖יךָ בְּיָדֶ֑ךָ). Specifically, the element "into your hand" (בְּיָדֶךָ).
- **Reasoning:** I considered if this phrase is a metaphor, metonymy, or idiom. The literal meaning would be that God physically placed Abram's enemies into his literal, anatomical hand, which is nonsensical in the context of defeating armies. The hand (יָד) is a classic biblical metonymy for power, authority, and control. Therefore, "to deliver into someone's hand" is a standard idiom meaning "to give someone victory and power over" another. This fits the instruction to mark physical concepts (a hand) applied to abstract ones (power, control, victory). While it is a very common expression in the Hebrew Bible, its figurative nature is undeniable and clear. It is not a simple divine anthropomorphism but a metaphorical idiom used by a human speaker (Melchizedek) to describe the outcome of a battle.

- **Phrase Considered:** "a tenth of everything" (מַעֲשֵׂ֖ר מִכֹּֽל).
- **Reasoning:** I considered if "everything" (מִכֹּל) could be a hyperbole. In many contexts, "all" or "everything" is used for rhetorical exaggeration. However, in this narrative, the context strongly suggests that "everything" refers to the specific set of "all the goods" (כָּל־הָרְכֻשׁ) that Abram had just recovered from the defeated kings (Genesis 14:16). It is not meant to imply a tenth of Abram's entire possessions on earth, but a tenth of the spoils of this specific victory. Therefore, it functions as standard narrative language where the scope of "everything" is defined by the immediate context, rather than as a deliberate hyperbole. Following the conservative approach, I have excluded this.

- **Phrase Considered:** "delivered" (מִגֵּן).
- **Reasoning:** I considered if the verb itself was metaphorical. Some scholars connect the root to "shield" (מָגֵן), which could imply a metaphorical origin (e.g., "to act as a shield by handing over"). However, in its usage, the verb functions as a standard term for "deliver" or "hand over." Any potential metaphorical roots are no longer active in this context. It is treated as a standard verb of action and thus excluded under the conservative guidelines.
]'
2025-09-27 21:18:18,859 - INFO -       ⚠️ Array doesn't contain objects - continuing search
2025-09-27 21:18:18,861 - INFO -       📄 Found JSON OUTPUT section: 884 chars
2025-09-27 21:18:18,865 - WARNING -       ⚠️ JSON appears incomplete in OUTPUT section
2025-09-27 21:18:18,867 - INFO -       📄 Attempting sophisticated bracket matching from position 27
2025-09-27 21:18:18,871 - INFO -       📄 Bracket matching found: 2259 chars
2025-09-27 21:18:18,875 - INFO -       ⚠️ Bracket-matched array doesn't contain objects
2025-09-27 21:18:18,879 - WARNING -       ❌ No valid JSON array found - returning empty
2025-09-27 21:18:18,883 - INFO - 🔍 STEP 1 (Detection): No figurative language detected or failed
2025-09-27 21:18:18,885 - INFO - Worker 1: Tertiary fallback completed for Genesis 14:20 - Step: detection, Instances: 0
2025-09-27 21:18:18,886 - INFO - Worker 1: Completed Genesis 14:20 - 0 instances
2025-09-27 21:18:18,902 - INFO - Completed Genesis 14:20: Truncation=yes, BothTruncated=yes, Model=gemini-2.5-pro-decomposed, Instances=0
2025-09-27 21:18:18,906 - INFO - --- PROCESSING: Genesis 35 ---
2025-09-27 21:18:18,908 - DEBUG - Starting new HTTPS connection (1): www.sefaria.org:443
2025-09-27 21:18:19,609 - DEBUG - https://www.sefaria.org:443 "GET /api/texts/Genesis.35 HTTP/1.1" 200 None
2025-09-27 21:18:19,660 - INFO - Processing 1 problematic verses from Genesis 35
2025-09-27 21:18:19,661 - INFO - Worker 1: Processing Genesis 35:13
2025-09-27 21:18:27,906 - DEBUG - 🔍 API Response Debug Info:
2025-09-27 21:18:27,909 - DEBUG -   📊 Total candidates: 1
2025-09-27 21:18:27,911 - DEBUG -   🏁 Finish reason: 1
2025-09-27 21:18:27,915 - DEBUG -   📝 Finish reason type: <enum 'FinishReason'>
2025-09-27 21:18:27,917 - DEBUG -   📝 Finish reason str: '1'
2025-09-27 21:18:27,919 - DEBUG -   🪙 Usage Metadata:
2025-09-27 21:18:27,920 - DEBUG -     - Prompt Token Count: 1306
2025-09-27 21:18:27,921 - DEBUG -     - Candidates Token Count: 312
2025-09-27 21:18:27,921 - DEBUG -     - Total Token Count: 2569
2025-09-27 21:18:27,921 - DEBUG -   🛡️ Safety ratings: None
2025-09-27 21:18:27,923 - DEBUG -   📄 Has content: True
2025-09-27 21:18:27,924 - DEBUG -   📄 Content parts count: 1
2025-09-27 21:18:27,926 - DEBUG -   📝 Response text length: 1272 characters
2025-09-27 21:18:27,929 - DEBUG -   📝 Response ends with: 'gurative language based on the given criteria.

[]'
2025-09-27 21:18:27,932 - DEBUG - 🔍 PARSING DEBUG - Starting response parsing:
2025-09-27 21:18:27,934 - DEBUG -   📏 Total response length: 1272
2025-09-27 21:18:27,935 - DEBUG -   📄 Response preview (first 200 chars): 'FIGURATIVE_DETECTION:
I examined the phrase "וַיַּ֥עַל מֵעָלָ֖יו אֱלֹהִ֑ים" (God parted from him / God went up from him). I considered if this description of God's action might be an anthropomorphism '
2025-09-27 21:18:27,937 - DEBUG -   📄 Response ending (last 200 chars): 'ty. It describes a literal act of communication. Therefore, it is not figurative.

No other elements in the verse presented themselves as potential figurative language based on the given criteria.

[]'
2025-09-27 21:18:27,939 - DEBUG -   📝 FIGURATIVE_DETECTION extracted: 787 chars
2025-09-27 21:18:27,941 - DEBUG -   📝 Detection ends with: ' context, not as figurative language.

I also considered the phrase "אֲשֶׁר־דִּבֶּ֥ר אִתּֽוֹ" (where'
2025-09-27 21:18:27,943 - DEBUG -   ⚠️ No TAGGING_ANALYSIS section found
2025-09-27 21:18:27,944 - DEBUG - 🔍 JSON EXTRACTION DEBUG:
2025-09-27 21:18:27,946 - INFO -     🔍 JSON Array Extraction:
2025-09-27 21:18:27,948 - INFO -       📄 Found JSON-like array: 5 chars
2025-09-27 21:18:27,950 - INFO -       📄 Array content: '[God]'
2025-09-27 21:18:27,952 - INFO -       ⚠️ Array doesn't contain objects - continuing search
2025-09-27 21:18:27,954 - INFO -       ⚠️ No JSON OUTPUT section found
2025-09-27 21:18:27,956 - INFO -       📄 Attempting sophisticated bracket matching from position 810
2025-09-27 21:18:27,959 - INFO -       📄 Bracket matching found: 5 chars
2025-09-27 21:18:27,961 - INFO -       ⚠️ Bracket-matched array doesn't contain objects
2025-09-27 21:18:27,963 - INFO -       📄 Empty array pattern detected
2025-09-27 21:18:27,965 - DEBUG -   📄 JSON string extracted: 2 chars
2025-09-27 21:18:27,967 - DEBUG -   📄 JSON preview: '[]'
2025-09-27 21:18:27,969 - DEBUG -   📄 COMPLETE JSON CONTENT:
2025-09-27 21:18:27,971 - DEBUG - ---JSON-START---
2025-09-27 21:18:27,971 - DEBUG - []
2025-09-27 21:18:27,971 - DEBUG - ---JSON-END---
2025-09-27 21:18:27,971 - INFO - 🔍 FALLBACK CHECK - No instances found but have deliberation text
2025-09-27 21:18:27,973 - INFO -   📝 Has figurative indicators: True
2025-09-27 21:18:27,975 - INFO -   📝 Appears to end abruptly: True
2025-09-27 21:18:27,977 - INFO -   📝 Has substantial analysis: True
2025-09-27 21:18:27,979 - INFO -   📝 Has figurative analysis: True
2025-09-27 21:18:27,982 - INFO -   📝 Has figurative conclusions: False
2025-09-27 21:18:27,984 - INFO -   📝 Missing TAGGING_ANALYSIS: False
2025-09-27 21:18:27,986 - INFO -   📝 Analysis complete but JSON empty: False
2025-09-27 21:18:27,987 - INFO -   📝 Should trigger fallback: True
2025-09-27 21:18:27,989 - ERROR - ❌ API response was truncated. No JSON was found and fallback parsing is disabled.
2025-09-27 21:18:27,991 - ERROR - ❌ This verse must be re-processed. Returning no instances.
2025-09-27 21:18:27,992 - WARNING - Worker 1: Truncation detected in Genesis 35:13, retrying with Pro model
2025-09-27 21:18:27,993 - INFO - Using model override: gemini-2.5-pro
2025-09-27 21:18:42,740 - DEBUG - 🔍 API Response Debug Info:
2025-09-27 21:18:42,743 - DEBUG -   📊 Total candidates: 1
2025-09-27 21:18:42,747 - DEBUG -   🏁 Finish reason: 1
2025-09-27 21:18:42,751 - DEBUG -   📝 Finish reason type: <enum 'FinishReason'>
2025-09-27 21:18:42,753 - DEBUG -   📝 Finish reason str: '1'
2025-09-27 21:18:42,756 - DEBUG -   🪙 Usage Metadata:
2025-09-27 21:18:42,758 - DEBUG -     - Prompt Token Count: 1306
2025-09-27 21:18:42,758 - DEBUG -     - Candidates Token Count: 360
2025-09-27 21:18:42,759 - DEBUG -     - Total Token Count: 3040
2025-09-27 21:18:42,759 - DEBUG -   🛡️ Safety ratings: None
2025-09-27 21:18:42,761 - DEBUG -   📄 Has content: True
2025-09-27 21:18:42,763 - DEBUG -   📄 Content parts count: 1
2025-09-27 21:18:42,765 - DEBUG -   📝 Response text length: 1522 characters
2025-09-27 21:18:42,767 - DEBUG -   📝 Response ends with: 'd as literal within the narrative's worldview.

[]'
2025-09-27 21:18:42,768 - DEBUG - 🔍 PARSING DEBUG - Starting response parsing:
2025-09-27 21:18:42,770 - DEBUG -   📏 Total response length: 1522
2025-09-27 21:18:42,772 - DEBUG -   📄 Response preview (first 200 chars): 'FIGURATIVE_DETECTION:
*   **Phrase 1: וַיַּ֥עַל מֵעָלָ֖יו אֱלֹהִ֑ים (God went up from him)**
    *   **Considered:** I considered whether this phrase is a metaphor for the cessation of divine communic'
2025-09-27 21:18:42,775 - DEBUG -   📄 Response ending (last 200 chars): 'les provided, no figurative language is present in this verse. The actions described are standard divine anthropomorphisms, which are to be interpreted as literal within the narrative's worldview.

[]'
2025-09-27 21:18:42,777 - DEBUG -   📝 FIGURATIVE_DETECTION extracted: 814 chars
2025-09-27 21:18:42,779 - DEBUG -   📝 Detection ends with: 'ed as a literal anthropomorphism per the guidelines.

*   **Phrase 2: אֲשֶׁר־דִּבֶּ֥ר אִתּֽוֹ (where'
2025-09-27 21:18:42,781 - DEBUG -   ⚠️ No TAGGING_ANALYSIS section found
2025-09-27 21:18:42,783 - DEBUG - 🔍 JSON EXTRACTION DEBUG:
2025-09-27 21:18:42,784 - INFO -     🔍 JSON Array Extraction:
2025-09-27 21:18:42,786 - INFO -       📄 Found JSON-like array: 5 chars
2025-09-27 21:18:42,788 - INFO -       📄 Array content: '[God]'
2025-09-27 21:18:42,790 - INFO -       ⚠️ Array doesn't contain objects - continuing search
2025-09-27 21:18:42,793 - INFO -       ⚠️ No JSON OUTPUT section found
2025-09-27 21:18:42,796 - INFO -       📄 Attempting sophisticated bracket matching from position 837
2025-09-27 21:18:42,798 - INFO -       📄 Bracket matching found: 5 chars
2025-09-27 21:18:42,799 - INFO -       ⚠️ Bracket-matched array doesn't contain objects
2025-09-27 21:18:42,801 - INFO -       📄 Empty array pattern detected
2025-09-27 21:18:42,803 - DEBUG -   📄 JSON string extracted: 2 chars
2025-09-27 21:18:42,804 - DEBUG -   📄 JSON preview: '[]'
2025-09-27 21:18:42,806 - DEBUG -   📄 COMPLETE JSON CONTENT:
2025-09-27 21:18:42,808 - DEBUG - ---JSON-START---
2025-09-27 21:18:42,808 - DEBUG - []
2025-09-27 21:18:42,808 - DEBUG - ---JSON-END---
2025-09-27 21:18:42,808 - INFO - 🔍 FALLBACK CHECK - No instances found but have deliberation text
2025-09-27 21:18:42,811 - INFO -   📝 Has figurative indicators: True
2025-09-27 21:18:42,812 - INFO -   📝 Appears to end abruptly: True
2025-09-27 21:18:42,813 - INFO -   📝 Has substantial analysis: True
2025-09-27 21:18:42,814 - INFO -   📝 Has figurative analysis: True
2025-09-27 21:18:42,816 - INFO -   📝 Has figurative conclusions: True
2025-09-27 21:18:42,818 - INFO -   📝 Missing TAGGING_ANALYSIS: True
2025-09-27 21:18:42,820 - INFO -   📝 Analysis complete but JSON empty: True
2025-09-27 21:18:42,821 - INFO -   📝 Should trigger fallback: True
2025-09-27 21:18:42,823 - ERROR - ❌ API response was truncated. No JSON was found and fallback parsing is disabled.
2025-09-27 21:18:42,825 - ERROR - ❌ This verse must be re-processed. Returning no instances.
2025-09-27 21:18:42,827 - WARNING - Worker 1: Pro model also truncated for Genesis 35:13 - trying tertiary decomposition fallback
2025-09-27 21:18:42,827 - INFO - 🔄 TERTIARY FALLBACK: Using task decomposition approach
2025-09-27 21:19:07,807 - INFO -     🔍 JSON Array Extraction:
2025-09-27 21:19:07,810 - INFO -       📄 Found JSON-like array: 5 chars
2025-09-27 21:19:07,812 - INFO -       📄 Array content: '[God]'
2025-09-27 21:19:07,814 - INFO -       ⚠️ Array doesn't contain objects - continuing search
2025-09-27 21:19:07,818 - INFO -       📄 Found JSON OUTPUT section: 757 chars
2025-09-27 21:19:07,821 - WARNING -       ⚠️ JSON appears incomplete in OUTPUT section
2025-09-27 21:19:07,823 - INFO -       📄 Attempting sophisticated bracket matching from position 1383
2025-09-27 21:19:07,826 - INFO -       📄 Bracket matching found: 5 chars
2025-09-27 21:19:07,828 - INFO -       ⚠️ Bracket-matched array doesn't contain objects
2025-09-27 21:19:07,830 - WARNING -       ❌ No valid JSON array found - returning empty
2025-09-27 21:19:07,832 - INFO - 🔍 STEP 1 (Detection): No figurative language detected or failed
2025-09-27 21:19:07,833 - INFO - Worker 1: Tertiary fallback completed for Genesis 35:13 - Step: detection, Instances: 0
2025-09-27 21:19:07,834 - INFO - Worker 1: Completed Genesis 35:13 - 0 instances
2025-09-27 21:19:07,838 - INFO - Completed Genesis 35:13: Truncation=yes, BothTruncated=yes, Model=gemini-2.5-pro-decomposed, Instances=0
2025-09-27 21:19:07,845 - INFO - --- PROCESSING: Genesis 2 ---
2025-09-27 21:19:07,847 - DEBUG - Starting new HTTPS connection (1): www.sefaria.org:443
2025-09-27 21:19:08,487 - DEBUG - https://www.sefaria.org:443 "GET /api/texts/Genesis.2 HTTP/1.1" 200 None
2025-09-27 21:19:08,535 - INFO - Processing 1 problematic verses from Genesis 2
2025-09-27 21:19:08,535 - INFO - Worker 1: Processing Genesis 2:17
2025-09-27 21:19:22,186 - DEBUG - 🔍 API Response Debug Info:
2025-09-27 21:19:22,188 - DEBUG -   📊 Total candidates: 1
2025-09-27 21:19:22,189 - DEBUG -   🏁 Finish reason: 1
2025-09-27 21:19:22,191 - DEBUG -   📝 Finish reason type: <enum 'FinishReason'>
2025-09-27 21:19:22,193 - DEBUG -   📝 Finish reason str: '1'
2025-09-27 21:19:22,195 - DEBUG -   🪙 Usage Metadata:
2025-09-27 21:19:22,197 - DEBUG -     - Prompt Token Count: 1199
2025-09-27 21:19:22,197 - DEBUG -     - Candidates Token Count: 941
2025-09-27 21:19:22,197 - DEBUG -     - Total Token Count: 3726
2025-09-27 21:19:22,197 - DEBUG -   🛡️ Safety ratings: None
2025-09-27 21:19:22,199 - DEBUG -   📄 Has content: True
2025-09-27 21:19:22,202 - DEBUG -   📄 Content parts count: 1
2025-09-27 21:19:22,204 - DEBUG -   📝 Response text length: 3765 characters
2025-09-27 21:19:22,206 - DEBUG -   📝 Response ends with: 'ly clear" or "obvious cross-domain metaphors."

[]'
2025-09-27 21:19:22,208 - DEBUG - 🔍 PARSING DEBUG - Starting response parsing:
2025-09-27 21:19:22,211 - DEBUG -   📏 Total response length: 3765
2025-09-27 21:19:22,213 - DEBUG -   📄 Response preview (first 200 chars): 'FIGURATIVE_DETECTION:
I have analyzed every phrase and concept in Genesis 2:17 according to the "ULTRA CONSERVATIVE" directive, which requires marking figurative language only if it is "absolutely cle'
2025-09-27 21:19:22,215 - DEBUG -   📄 Response ending (last 200 chars): 'd not be marked as figurative.
    *   **Conclusion**: Not figurative.

Based on the strict criteria provided, no elements in this verse are "absolutely clear" or "obvious cross-domain metaphors."

[]'
2025-09-27 21:19:22,217 - DEBUG -   📝 FIGURATIVE_DETECTION extracted: 3739 chars
2025-09-27 21:19:22,219 - DEBUG -   📝 Detection ends with: 'eria provided, no elements in this verse are "absolutely clear" or "obvious cross-domain metaphors."'
2025-09-27 21:19:22,221 - DEBUG -   ⚠️ No TAGGING_ANALYSIS section found
2025-09-27 21:19:22,222 - DEBUG - 🔍 JSON EXTRACTION DEBUG:
2025-09-27 21:19:22,224 - INFO -     🔍 JSON Array Extraction:
2025-09-27 21:19:22,226 - INFO -       📄 Found JSON-like array: 2 chars
2025-09-27 21:19:22,227 - INFO -       📄 Array content: '[]'
2025-09-27 21:19:22,229 - INFO -       ⚠️ Array doesn't contain objects - continuing search
2025-09-27 21:19:22,231 - INFO -       ⚠️ No JSON OUTPUT section found
2025-09-27 21:19:22,233 - INFO -       📄 Attempting sophisticated bracket matching from position 3763
2025-09-27 21:19:22,235 - INFO -       📄 Bracket matching found: 2 chars
2025-09-27 21:19:22,236 - INFO -       ⚠️ Bracket-matched array doesn't contain objects
2025-09-27 21:19:22,238 - INFO -       📄 Empty array pattern detected
2025-09-27 21:19:22,240 - DEBUG -   📄 JSON string extracted: 2 chars
2025-09-27 21:19:22,242 - DEBUG -   📄 JSON preview: '[]'
2025-09-27 21:19:22,245 - DEBUG -   📄 COMPLETE JSON CONTENT:
2025-09-27 21:19:22,247 - DEBUG - ---JSON-START---
2025-09-27 21:19:22,247 - DEBUG - []
2025-09-27 21:19:22,247 - DEBUG - ---JSON-END---
2025-09-27 21:19:22,247 - INFO - 🔍 FALLBACK CHECK - No instances found but have deliberation text
2025-09-27 21:19:22,249 - INFO -   📝 Has figurative indicators: True
2025-09-27 21:19:22,251 - INFO -   📝 Appears to end abruptly: True
2025-09-27 21:19:22,253 - INFO -   📝 Has substantial analysis: True
2025-09-27 21:19:22,256 - INFO -   📝 Has figurative analysis: True
2025-09-27 21:19:22,258 - INFO -   📝 Has figurative conclusions: False
2025-09-27 21:19:22,260 - INFO -   📝 Missing TAGGING_ANALYSIS: False
2025-09-27 21:19:22,262 - INFO -   📝 Analysis complete but JSON empty: False
2025-09-27 21:19:22,264 - INFO -   📝 Should trigger fallback: True
2025-09-27 21:19:22,266 - ERROR - ❌ API response was truncated. No JSON was found and fallback parsing is disabled.
2025-09-27 21:19:22,268 - ERROR - ❌ This verse must be re-processed. Returning no instances.
2025-09-27 21:19:22,270 - WARNING - Worker 1: Truncation detected in Genesis 2:17, retrying with Pro model
2025-09-27 21:19:22,270 - INFO - Using model override: gemini-2.5-pro
2025-09-27 21:19:48,362 - DEBUG - 🔍 API Response Debug Info:
2025-09-27 21:19:48,365 - DEBUG -   📊 Total candidates: 1
2025-09-27 21:19:48,367 - DEBUG -   🏁 Finish reason: 1
2025-09-27 21:19:48,369 - DEBUG -   📝 Finish reason type: <enum 'FinishReason'>
2025-09-27 21:19:48,371 - DEBUG -   📝 Finish reason str: '1'
2025-09-27 21:19:48,373 - DEBUG -   🪙 Usage Metadata:
2025-09-27 21:19:48,375 - DEBUG -     - Prompt Token Count: 1199
2025-09-27 21:19:48,375 - DEBUG -     - Candidates Token Count: 834
2025-09-27 21:19:48,375 - DEBUG -     - Total Token Count: 4292
2025-09-27 21:19:48,375 - DEBUG -   🛡️ Safety ratings: None
2025-09-27 21:19:48,377 - DEBUG -   📄 Has content: True
2025-09-27 21:19:48,381 - DEBUG -   📄 Content parts count: 1
2025-09-27 21:19:48,385 - DEBUG -   📝 Response text length: 3338 characters
2025-09-27 21:19:48,388 - DEBUG -   📝 Response ends with: 'edience using the most final concept known."
  }
]'
2025-09-27 21:19:48,397 - DEBUG - 🔍 PARSING DEBUG - Starting response parsing:
2025-09-27 21:19:48,399 - DEBUG -   📏 Total response length: 3338
2025-09-27 21:19:48,401 - DEBUG -   📄 Response preview (first 200 chars): '**FIGURATIVE_DETECTION:**
- **"the tree of the knowledge of good and bad" (עֵ֗ץ הַדַּ֙עַת֙ ט֣וֹב וָרָ֔ע):** I considered if this name is a metaphor for moral or spiritual enlightenment in general. How'
2025-09-27 21:19:48,402 - DEBUG -   📄 Response ending (last 200 chars): 'ommand"
    ],
    "confidence": 0.95,
    "speaker": "God",
    "purpose": "To convey the absolute severity and certainty of the consequence of disobedience using the most final concept known."
  }
]'
2025-09-27 21:19:48,405 - DEBUG -   📝 FIGURATIVE_DETECTION extracted: 2034 chars
2025-09-27 21:19:48,407 - DEBUG -   📝 Detection ends with: 'ts the criterion of being an "absolutely clear" cross-domain metaphor and is therefore included.

**'
2025-09-27 21:19:48,410 - DEBUG -   ⚠️ No TAGGING_ANALYSIS section found
2025-09-27 21:19:48,412 - DEBUG - 🔍 JSON EXTRACTION DEBUG:
2025-09-27 21:19:48,414 - INFO -     🔍 JSON Array Extraction:
2025-09-27 21:19:48,417 - INFO -       📄 Found JSON-like array: 762 chars
2025-09-27 21:19:48,420 - INFO -       📄 Array content: '[
  {
    "figurative_language": "yes",
    "simile": "no",
    "metaphor": "yes",
    "personification": "no",
    "idiom": "no",
    "hyperbole": "no",
    "metonymy": "no",
    "other": "no",
    "hebrew_text": "מ֥וֹת תָּמֽוּת",
    "english_text": "you shall die",
    "explanation": "The emphatic declaration of death is used metaphorically to signify immediate spiritual separation from God and the introduction of mortality, rather than an instantaneous physical death. The narrative confirms Adam did not physically die that day, making this a clear use of a physical state (death) to describe a spiritual and relational one.",
    "target": [
      "spiritual separation and mortality",
      "consequence of disobedience",
      "human condition"
    ]'
2025-09-27 21:19:48,422 - INFO -       ⚠️ Array doesn't contain objects - continuing search
2025-09-27 21:19:48,424 - INFO -       📄 Found JSON OUTPUT section: 1258 chars
2025-09-27 21:19:48,426 - WARNING -       ⚠️ JSON appears incomplete in OUTPUT section
2025-09-27 21:19:48,427 - INFO -       📄 Attempting sophisticated bracket matching from position 2083
2025-09-27 21:19:48,431 - INFO -       📄 Bracket matching found: 1255 chars
2025-09-27 21:19:48,433 - INFO -       ✅ Bracket-matched array contains objects
2025-09-27 21:19:48,435 - DEBUG -   📄 JSON string extracted: 1255 chars
2025-09-27 21:19:48,438 - DEBUG -   📄 JSON preview: '[
  {
    "figurative_language": "yes",
    "simile": "no",
    "metaphor": "yes",
    "personification": "no",
    "idiom": "no",
    "hyperbole": "no",
    "metonymy": "no",
    "other": "no",
    "'
2025-09-27 21:19:48,439 - DEBUG -   📄 COMPLETE JSON CONTENT:
2025-09-27 21:19:48,441 - DEBUG - ---JSON-START---
2025-09-27 21:19:48,441 - DEBUG - [
  {
    "figurative_language": "yes",
    "simile": "no",
    "metaphor": "yes",
    "personification": "no",
    "idiom": "no",
    "hyperbole": "no",
    "metonymy": "no",
    "other": "no",
    "hebrew_text": "מ֥וֹת תָּמֽוּת",
    "english_text": "you shall die",
    "explanation": "The emphatic declaration of death is used metaphorically to signify immediate spiritual separation from God and the introduction of mortality, rather than an instantaneous physical death. The narrative confirms Adam did not physically die that day, making this a clear use of a physical state (death) to describe a spiritual and relational one.",
    "target": [
      "spiritual separation and mortality",
      "consequence of disobedience",
      "human condition"
    ],
    "vehicle": [
      "physical death",
      "cessation of life",
      "biological state"
    ],
    "ground": [
      "separation from life source",
      "finality",
      "negative consequence"
    ],
    "posture": [
      "divine warning",
      "prohibition",
      "authoritative command"
    ],
    "confidence": 0.95,
    "speaker": "God",
    "purpose": "To convey the absolute severity and certainty of the consequence of disobedience using the most final concept known."
  }
]
2025-09-27 21:19:48,443 - DEBUG - ---JSON-END---
2025-09-27 21:19:48,455 - WARNING -   ⚠️ Found problematic characters: ["'מ' (ord=1502) at pos 215", "'֥' (ord=1445) at pos 216", "'ו' (ord=1493) at pos 217", "'ֹ' (ord=1465) at pos 218", "'ת' (ord=1514) at pos 219", "'ת' (ord=1514) at pos 221", "'ּ' (ord=1468) at pos 222", "'ָ' (ord=1464) at pos 223", "'מ' (ord=1502) at pos 224", "'ֽ' (ord=1469) at pos 225"]
2025-09-27 21:19:48,457 - INFO -   ✅ JSON parsing succeeded on first attempt
2025-09-27 21:19:48,460 - INFO - Worker 1: Completed Genesis 2:17 - 1 instances
2025-09-27 21:19:48,463 - INFO - Completed Genesis 2:17: Truncation=yes, BothTruncated=no, Model=gemini-2.5-pro, Instances=1
2025-09-27 21:19:48,470 - INFO - --- PROCESSING: Genesis 17 ---
2025-09-27 21:19:48,472 - DEBUG - Starting new HTTPS connection (1): www.sefaria.org:443
2025-09-27 21:19:49,117 - DEBUG - https://www.sefaria.org:443 "GET /api/texts/Genesis.17 HTTP/1.1" 200 None
2025-09-27 21:19:49,144 - INFO - Processing 1 problematic verses from Genesis 17
2025-09-27 21:19:49,146 - INFO - Worker 1: Processing Genesis 17:8
2025-09-27 21:20:01,196 - DEBUG - 🔍 API Response Debug Info:
2025-09-27 21:20:01,199 - DEBUG -   📊 Total candidates: 1
2025-09-27 21:20:01,201 - DEBUG -   🏁 Finish reason: 1
2025-09-27 21:20:01,203 - DEBUG -   📝 Finish reason type: <enum 'FinishReason'>
2025-09-27 21:20:01,205 - DEBUG -   📝 Finish reason str: '1'
2025-09-27 21:20:01,207 - DEBUG -   🪙 Usage Metadata:
2025-09-27 21:20:01,208 - DEBUG -     - Prompt Token Count: 1399
2025-09-27 21:20:01,208 - DEBUG -     - Candidates Token Count: 757
2025-09-27 21:20:01,208 - DEBUG -     - Total Token Count: 3570
2025-09-27 21:20:01,209 - DEBUG -   🛡️ Safety ratings: None
2025-09-27 21:20:01,209 - DEBUG -   📄 Has content: True
2025-09-27 21:20:01,210 - DEBUG -   📄 Content parts count: 1
2025-09-27 21:20:01,212 - DEBUG -   📝 Response text length: 2937 characters
2025-09-27 21:20:01,213 - DEBUG -   📝 Response ends with: 'cal descriptions, and covenantal declarations.

[]'
2025-09-27 21:20:01,213 - DEBUG - 🔍 PARSING DEBUG - Starting response parsing:
2025-09-27 21:20:01,214 - DEBUG -   📏 Total response length: 2937
2025-09-27 21:20:01,216 - DEBUG -   📄 Response preview (first 200 chars): 'FIGURATIVE_DETECTION:
I have analyzed the provided Hebrew text and its English translation for potential figurative language, adhering strictly to the conservative guidelines.

1.  **"וְנָתַתִּ֣י לְ֠ך'
2025-09-27 21:20:01,217 - DEBUG -   📄 Response ending (last 200 chars): ' meet the criteria for being marked as figurative language in this verse. The text primarily consists of direct statements of divine action, geographical descriptions, and covenantal declarations.

[]'
2025-09-27 21:20:01,219 - DEBUG -   📝 FIGURATIVE_DETECTION extracted: 2911 chars
2025-09-27 21:20:01,221 - DEBUG -   📝 Detection ends with: 'sists of direct statements of divine action, geographical descriptions, and covenantal declarations.'
2025-09-27 21:20:01,223 - DEBUG -   ⚠️ No TAGGING_ANALYSIS section found
2025-09-27 21:20:01,224 - DEBUG - 🔍 JSON EXTRACTION DEBUG:
2025-09-27 21:20:01,225 - INFO -     🔍 JSON Array Extraction:
2025-09-27 21:20:01,227 - INFO -       📄 Found JSON-like array: 2 chars
2025-09-27 21:20:01,228 - INFO -       📄 Array content: '[]'
2025-09-27 21:20:01,229 - INFO -       ⚠️ Array doesn't contain objects - continuing search
2025-09-27 21:20:01,231 - INFO -       ⚠️ No JSON OUTPUT section found
2025-09-27 21:20:01,233 - INFO -       📄 Attempting sophisticated bracket matching from position 2935
2025-09-27 21:20:01,234 - INFO -       📄 Bracket matching found: 2 chars
2025-09-27 21:20:01,236 - INFO -       ⚠️ Bracket-matched array doesn't contain objects
2025-09-27 21:20:01,237 - INFO -       📄 Empty array pattern detected
2025-09-27 21:20:01,239 - DEBUG -   📄 JSON string extracted: 2 chars
2025-09-27 21:20:01,241 - DEBUG -   📄 JSON preview: '[]'
2025-09-27 21:20:01,245 - DEBUG -   📄 COMPLETE JSON CONTENT:
2025-09-27 21:20:01,247 - DEBUG - ---JSON-START---
2025-09-27 21:20:01,247 - DEBUG - []
2025-09-27 21:20:01,247 - DEBUG - ---JSON-END---
2025-09-27 21:20:01,248 - INFO - 🔍 FALLBACK CHECK - No instances found but have deliberation text
2025-09-27 21:20:01,251 - INFO -   📝 Has figurative indicators: True
2025-09-27 21:20:01,253 - INFO -   📝 Appears to end abruptly: False
2025-09-27 21:20:01,255 - INFO -   📝 Has substantial analysis: True
2025-09-27 21:20:01,257 - INFO -   📝 Has figurative analysis: True
2025-09-27 21:20:01,258 - INFO -   📝 Has figurative conclusions: False
2025-09-27 21:20:01,259 - INFO -   📝 Missing TAGGING_ANALYSIS: False
2025-09-27 21:20:01,261 - INFO -   📝 Analysis complete but JSON empty: False
2025-09-27 21:20:01,263 - INFO -   📝 Should trigger fallback: False
2025-09-27 21:20:01,264 - INFO -   📝 Truncation criteria not met - no fallback parsing attempted
2025-09-27 21:20:01,270 - INFO - Worker 1: Completed Genesis 17:8 - 0 instances
2025-09-27 21:20:01,273 - INFO - Completed Genesis 17:8: Truncation=no, BothTruncated=no, Model=gemini-2.5-flash, Instances=0
2025-09-27 21:20:01,280 - INFO - --- PROCESSING: Genesis 18 ---
2025-09-27 21:20:01,281 - DEBUG - Starting new HTTPS connection (1): www.sefaria.org:443
2025-09-27 21:20:01,825 - DEBUG - https://www.sefaria.org:443 "GET /api/texts/Genesis.18 HTTP/1.1" 200 None
2025-09-27 21:20:01,849 - INFO - Processing 1 problematic verses from Genesis 18
2025-09-27 21:20:01,850 - INFO - Worker 1: Processing Genesis 18:29
2025-09-27 21:20:21,116 - DEBUG - 🔍 API Response Debug Info:
2025-09-27 21:20:21,117 - DEBUG -   📊 Total candidates: 1
2025-09-27 21:20:21,118 - DEBUG -   🏁 Finish reason: 1
2025-09-27 21:20:21,119 - DEBUG -   📝 Finish reason type: <enum 'FinishReason'>
2025-09-27 21:20:21,122 - DEBUG -   📝 Finish reason str: '1'
2025-09-27 21:20:21,126 - DEBUG -   🪙 Usage Metadata:
2025-09-27 21:20:21,128 - DEBUG -     - Prompt Token Count: 1383
2025-09-27 21:20:21,128 - DEBUG -     - Candidates Token Count: 1365
2025-09-27 21:20:21,128 - DEBUG -     - Total Token Count: 4476
2025-09-27 21:20:21,128 - DEBUG -   🛡️ Safety ratings: None
2025-09-27 21:20:21,130 - DEBUG -   📄 Has content: True
2025-09-27 21:20:21,131 - DEBUG -   📄 Content parts count: 1
2025-09-27 21:20:21,133 - DEBUG -   📝 Response text length: 4904 characters
2025-09-27 21:20:21,135 - DEBUG -   📝 Response ends with: 'confirming the basis for divine action."
  }
]
```'
2025-09-27 21:20:21,137 - WARNING -   ⚠️ Response appears to end abruptly (no proper punctuation)
2025-09-27 21:20:21,138 - DEBUG - 🔍 PARSING DEBUG - Starting response parsing:
2025-09-27 21:20:21,140 - DEBUG -   📏 Total response length: 4904
2025-09-27 21:20:21,142 - DEBUG -   📄 Response preview (first 200 chars): 'FIGURATIVE_DETECTION:
I have analyzed the provided Hebrew text and its English translation for figurative language, adhering to the specified guidelines.

1.  **"וַיֹּ֨סֶף ע֜וֹד לְדַבֵּ֤ר אֵלָיו֙" (Bu'
2025-09-27 21:20:21,144 - DEBUG -   📄 Response ending (last 200 chars): '    "confidence": 0.95,
    "speaker": "God",
    "purpose": "To concisely refer to the group of righteous individuals in response to Abraham's plea, confirming the basis for divine action."
  }
]
```'
2025-09-27 21:20:21,145 - DEBUG -   📝 FIGURATIVE_DETECTION extracted: 2715 chars
2025-09-27 21:20:21,146 - DEBUG -   📝 Detection ends with: 'e two instances of "forty" functioning as metonymy/synecdoche for "forty righteous people."

```json'
2025-09-27 21:20:21,148 - DEBUG -   ⚠️ No TAGGING_ANALYSIS section found
2025-09-27 21:20:21,149 - DEBUG - 🔍 JSON EXTRACTION DEBUG:
2025-09-27 21:20:21,151 - INFO -     🔍 JSON Array Extraction:
2025-09-27 21:20:21,152 - INFO -       📄 Found JSON-like array: 623 chars
2025-09-27 21:20:21,153 - INFO -       📄 Array content: '[
  {
    "figurative_language": "yes",
    "simile": "no",
    "metaphor": "no",
    "personification": "no",
    "idiom": "no",
    "hyperbole": "no",
    "metonymy": "yes",
    "other": "no",
    "hebrew_text": "אַרְבָּעִ֑ים",
    "english_text": "forty",
    "explanation": "The number 'forty' stands metonymically (specifically, synecdochically) for 'forty righteous people' in the city. This is a common biblical shorthand where the specific referent (righteous people) is clearly understood from the narrative context of Abraham's negotiation with God.",
    "target": ["righteous people", "inhabitants", "humanity"]'
2025-09-27 21:20:21,155 - INFO -       ⚠️ Array doesn't contain objects - continuing search
2025-09-27 21:20:21,157 - INFO -       ⚠️ No JSON OUTPUT section found
2025-09-27 21:20:21,160 - INFO -       📄 Attempting sophisticated bracket matching from position 2738
2025-09-27 21:20:21,162 - INFO -       📄 Bracket matching found: 2162 chars
2025-09-27 21:20:21,164 - INFO -       ✅ Bracket-matched array contains objects
2025-09-27 21:20:21,165 - DEBUG -   📄 JSON string extracted: 2162 chars
2025-09-27 21:20:21,167 - DEBUG -   📄 JSON preview: '[
  {
    "figurative_language": "yes",
    "simile": "no",
    "metaphor": "no",
    "personification": "no",
    "idiom": "no",
    "hyperbole": "no",
    "metonymy": "yes",
    "other": "no",
    "'
2025-09-27 21:20:21,168 - DEBUG -   📄 COMPLETE JSON CONTENT:
2025-09-27 21:20:21,170 - DEBUG - ---JSON-START---
2025-09-27 21:20:21,170 - DEBUG - [
  {
    "figurative_language": "yes",
    "simile": "no",
    "metaphor": "no",
    "personification": "no",
    "idiom": "no",
    "hyperbole": "no",
    "metonymy": "yes",
    "other": "no",
    "hebrew_text": "אַרְבָּעִ֑ים",
    "english_text": "forty",
    "explanation": "The number 'forty' stands metonymically (specifically, synecdochically) for 'forty righteous people' in the city. This is a common biblical shorthand where the specific referent (righteous people) is clearly understood from the narrative context of Abraham's negotiation with God.",
    "target": ["righteous people", "inhabitants", "humanity"],
    "vehicle": ["number forty", "numerical quantity", "abstract concept"],
    "ground": ["presence of righteous individuals", "condition for divine mercy", "moral quality"],
    "posture": ["intercession", "pleading", "negotiation", "persuasion"],
    "confidence": 0.95,
    "speaker": "Abraham",
    "purpose": "To concisely refer to the group of righteous individuals without explicitly stating 'people' or 'righteous' in the ongoing negotiation."
  },
  {
    "figurative_language": "yes",
    "simile": "no",
    "metaphor": "no",
    "personification": "no",
    "idiom": "no",
    "hyperbole": "no",
    "metonymy": "yes",
    "other": "no",
    "hebrew_text": "הָאַרְבָּעִֽים",
    "english_text": "the forty",
    "explanation": "Similar to Abraham's usage, 'the forty' stands metonymically (synecdochically) for 'the forty righteous people.' God's response adopts Abraham's shorthand, confirming the understanding that the number refers to the righteous individuals whose presence would avert destruction.",
    "target": ["righteous people", "inhabitants", "humanity"],
    "vehicle": ["number forty", "numerical quantity", "abstract concept"],
    "ground": ["presence of righteous individuals", "condition for divine mercy", "moral quality"],
    "posture": ["affirmation of mercy", "divine response", "conditional judgment"],
    "confidence": 0.95,
    "speaker": "God",
    "purpose": "To concisely refer to the group of righteous individuals in response to Abraham's plea, confirming the basis for divine action."
  }
]
2025-09-27 21:20:21,173 - DEBUG - ---JSON-END---
2025-09-27 21:20:21,174 - WARNING -   ⚠️ Found problematic characters: ["'א' (ord=1488) at pos 215", "'ַ' (ord=1463) at pos 216", "'ר' (ord=1512) at pos 217", "'ְ' (ord=1456) at pos 218", "'ב' (ord=1489) at pos 219", "'ּ' (ord=1468) at pos 220", "'ָ' (ord=1464) at pos 221", "'ע' (ord=1506) at pos 222", "'ִ' (ord=1460) at pos 223", "'֑' (ord=1425) at pos 224"]
2025-09-27 21:20:21,176 - INFO -   ✅ JSON parsing succeeded on first attempt
2025-09-27 21:20:21,177 - INFO - Worker 1: Completed Genesis 18:29 - 2 instances
2025-09-27 21:20:21,181 - INFO - Completed Genesis 18:29: Truncation=no, BothTruncated=no, Model=gemini-2.5-flash, Instances=2
2025-09-27 21:20:21,185 - INFO - --- PROCESSING: Genesis 24 ---
2025-09-27 21:20:21,186 - DEBUG - Starting new HTTPS connection (1): www.sefaria.org:443
2025-09-27 21:20:21,804 - DEBUG - https://www.sefaria.org:443 "GET /api/texts/Genesis.24 HTTP/1.1" 200 None
2025-09-27 21:20:21,829 - INFO - Processing 2 problematic verses from Genesis 24
2025-09-27 21:20:21,830 - INFO - Worker 1: Processing Genesis 24:4
2025-09-27 21:20:21,831 - INFO - Worker 2: Processing Genesis 24:65
2025-09-27 21:20:32,051 - DEBUG - 🔍 API Response Debug Info:
2025-09-27 21:20:32,053 - DEBUG -   📊 Total candidates: 1
2025-09-27 21:20:32,055 - DEBUG -   🏁 Finish reason: 1
2025-09-27 21:20:32,056 - DEBUG -   📝 Finish reason type: <enum 'FinishReason'>
2025-09-27 21:20:32,057 - DEBUG -   📝 Finish reason str: '1'
2025-09-27 21:20:32,058 - DEBUG -   🪙 Usage Metadata:
2025-09-27 21:20:32,060 - DEBUG -     - Prompt Token Count: 1407
2025-09-27 21:20:32,060 - DEBUG -     - Candidates Token Count: 798
2025-09-27 21:20:32,060 - DEBUG -     - Total Token Count: 3126
2025-09-27 21:20:32,060 - DEBUG -   🛡️ Safety ratings: None
2025-09-27 21:20:32,061 - DEBUG -   📄 Has content: True
2025-09-27 21:20:32,062 - DEBUG -   📄 Content parts count: 1
2025-09-27 21:20:32,062 - DEBUG -   📝 Response text length: 2847 characters
2025-09-27 21:20:32,063 - DEBUG -   📝 Response ends with: 'rding to the provided conservative guidelines.

[]'
2025-09-27 21:20:32,064 - DEBUG - 🔍 PARSING DEBUG - Starting response parsing:
2025-09-27 21:20:32,065 - DEBUG -   📏 Total response length: 2847
2025-09-27 21:20:32,066 - DEBUG -   📄 Response preview (first 200 chars): 'FIGURATIVE_DETECTION:
I have analyzed the provided Hebrew text and its English translation for any instances of figurative language, adhering strictly to the conservative guidelines provided.

1.  **"'
2025-09-27 21:20:32,066 - DEBUG -   📄 Response ending (last 200 chars): 't is literal.

Based on this analysis, I find no clear metaphors, similes, personification, hyperbole, metonymy, or biblical idioms in this verse according to the provided conservative guidelines.

[]'
2025-09-27 21:20:32,067 - DEBUG -   📝 FIGURATIVE_DETECTION extracted: 2821 chars
2025-09-27 21:20:32,068 - DEBUG -   📝 Detection ends with: 'rbole, metonymy, or biblical idioms in this verse according to the provided conservative guidelines.'
2025-09-27 21:20:32,069 - DEBUG -   ⚠️ No TAGGING_ANALYSIS section found
2025-09-27 21:20:32,069 - DEBUG - 🔍 JSON EXTRACTION DEBUG:
2025-09-27 21:20:32,070 - INFO -     🔍 JSON Array Extraction:
2025-09-27 21:20:32,070 - INFO -       📄 Found JSON-like array: 2 chars
2025-09-27 21:20:32,071 - INFO -       📄 Array content: '[]'
2025-09-27 21:20:32,072 - INFO -       ⚠️ Array doesn't contain objects - continuing search
2025-09-27 21:20:32,072 - INFO -       ⚠️ No JSON OUTPUT section found
2025-09-27 21:20:32,073 - INFO -       📄 Attempting sophisticated bracket matching from position 2845
2025-09-27 21:20:32,074 - INFO -       📄 Bracket matching found: 2 chars
2025-09-27 21:20:32,074 - INFO -       ⚠️ Bracket-matched array doesn't contain objects
2025-09-27 21:20:32,075 - INFO -       📄 Empty array pattern detected
2025-09-27 21:20:32,076 - DEBUG -   📄 JSON string extracted: 2 chars
2025-09-27 21:20:32,076 - DEBUG -   📄 JSON preview: '[]'
2025-09-27 21:20:32,077 - DEBUG -   📄 COMPLETE JSON CONTENT:
2025-09-27 21:20:32,077 - DEBUG - ---JSON-START---
2025-09-27 21:20:32,078 - DEBUG - []
2025-09-27 21:20:32,078 - DEBUG - ---JSON-END---
2025-09-27 21:20:32,078 - INFO - 🔍 FALLBACK CHECK - No instances found but have deliberation text
2025-09-27 21:20:32,078 - INFO -   📝 Has figurative indicators: True
2025-09-27 21:20:32,079 - INFO -   📝 Appears to end abruptly: False
2025-09-27 21:20:32,079 - INFO -   📝 Has substantial analysis: True
2025-09-27 21:20:32,081 - INFO -   📝 Has figurative analysis: True
2025-09-27 21:20:32,082 - INFO -   📝 Has figurative conclusions: False
2025-09-27 21:20:32,084 - INFO -   📝 Missing TAGGING_ANALYSIS: False
2025-09-27 21:20:32,085 - INFO -   📝 Analysis complete but JSON empty: False
2025-09-27 21:20:32,087 - INFO -   📝 Should trigger fallback: False
2025-09-27 21:20:32,088 - INFO -   📝 Truncation criteria not met - no fallback parsing attempted
2025-09-27 21:20:32,089 - INFO - Worker 2: Completed Genesis 24:65 - 0 instances
2025-09-27 21:20:32,092 - INFO - Completed Genesis 24:65: Truncation=no, BothTruncated=no, Model=gemini-2.5-flash, Instances=0
2025-09-27 21:20:34,169 - DEBUG - 🔍 API Response Debug Info:
2025-09-27 21:20:34,171 - DEBUG -   📊 Total candidates: 1
2025-09-27 21:20:34,172 - DEBUG -   🏁 Finish reason: 1
2025-09-27 21:20:34,173 - DEBUG -   📝 Finish reason type: <enum 'FinishReason'>
2025-09-27 21:20:34,175 - DEBUG -   📝 Finish reason str: '1'
2025-09-27 21:20:34,176 - DEBUG -   🪙 Usage Metadata:
2025-09-27 21:20:34,177 - DEBUG -     - Prompt Token Count: 1329
2025-09-27 21:20:34,178 - DEBUG -     - Candidates Token Count: 586
2025-09-27 21:20:34,178 - DEBUG -     - Total Token Count: 3630
2025-09-27 21:20:34,178 - DEBUG -   🛡️ Safety ratings: None
2025-09-27 21:20:34,179 - DEBUG -   📄 Has content: True
2025-09-27 21:20:34,180 - DEBUG -   📄 Content parts count: 1
2025-09-27 21:20:34,181 - DEBUG -   📝 Response text length: 2120 characters
2025-09-27 21:20:34,183 - DEBUG -   📝 Response ends with: 'n this verse based on the provided guidelines.

[]'
2025-09-27 21:20:34,184 - DEBUG - 🔍 PARSING DEBUG - Starting response parsing:
2025-09-27 21:20:34,186 - DEBUG -   📏 Total response length: 2120
2025-09-27 21:20:34,187 - DEBUG -   📄 Response preview (first 200 chars): 'FIGURATIVE_DETECTION:
1.  **"אֶל־אַרְצִ֛י" (to my land)**: I considered if "my land" might be a metonymy for "my people" or "my heritage." However, in this context, it refers to Abraham's literal geog'
2025-09-27 21:20:34,188 - DEBUG -   📄 Response ending (last 200 chars): ' However, these are literal identifiers of Abraham's biological son, Isaac. Therefore, they are not figurative.

No figurative language was detected in this verse based on the provided guidelines.

[]'
2025-09-27 21:20:34,190 - DEBUG -   📝 FIGURATIVE_DETECTION extracted: 2094 chars
2025-09-27 21:20:34,191 - DEBUG -   📝 Detection ends with: 'not figurative.

No figurative language was detected in this verse based on the provided guidelines.'
2025-09-27 21:20:34,192 - DEBUG -   ⚠️ No TAGGING_ANALYSIS section found
2025-09-27 21:20:34,193 - DEBUG - 🔍 JSON EXTRACTION DEBUG:
2025-09-27 21:20:34,195 - INFO -     🔍 JSON Array Extraction:
2025-09-27 21:20:34,196 - INFO -       📄 Found JSON-like array: 2 chars
2025-09-27 21:20:34,198 - INFO -       📄 Array content: '[]'
2025-09-27 21:20:34,199 - INFO -       ⚠️ Array doesn't contain objects - continuing search
2025-09-27 21:20:34,201 - INFO -       ⚠️ No JSON OUTPUT section found
2025-09-27 21:20:34,202 - INFO -       📄 Attempting sophisticated bracket matching from position 2118
2025-09-27 21:20:34,204 - INFO -       📄 Bracket matching found: 2 chars
2025-09-27 21:20:34,205 - INFO -       ⚠️ Bracket-matched array doesn't contain objects
2025-09-27 21:20:34,206 - INFO -       📄 Empty array pattern detected
2025-09-27 21:20:34,207 - DEBUG -   📄 JSON string extracted: 2 chars
2025-09-27 21:20:34,208 - DEBUG -   📄 JSON preview: '[]'
2025-09-27 21:20:34,209 - DEBUG -   📄 COMPLETE JSON CONTENT:
2025-09-27 21:20:34,209 - DEBUG - ---JSON-START---
2025-09-27 21:20:34,209 - DEBUG - []
2025-09-27 21:20:34,209 - DEBUG - ---JSON-END---
2025-09-27 21:20:34,210 - INFO - 🔍 FALLBACK CHECK - No instances found but have deliberation text
2025-09-27 21:20:34,210 - INFO -   📝 Has figurative indicators: True
2025-09-27 21:20:34,211 - INFO -   📝 Appears to end abruptly: False
2025-09-27 21:20:34,212 - INFO -   📝 Has substantial analysis: True
2025-09-27 21:20:34,212 - INFO -   📝 Has figurative analysis: True
2025-09-27 21:20:34,213 - INFO -   📝 Has figurative conclusions: False
2025-09-27 21:20:34,214 - INFO -   📝 Missing TAGGING_ANALYSIS: False
2025-09-27 21:20:34,216 - INFO -   📝 Analysis complete but JSON empty: False
2025-09-27 21:20:34,217 - INFO -   📝 Should trigger fallback: False
2025-09-27 21:20:34,219 - INFO -   📝 Truncation criteria not met - no fallback parsing attempted
2025-09-27 21:20:34,220 - INFO - Worker 1: Completed Genesis 24:4 - 0 instances
2025-09-27 21:20:34,220 - INFO - Completed Genesis 24:4: Truncation=no, BothTruncated=no, Model=gemini-2.5-flash, Instances=0
2025-09-27 21:20:34,223 - INFO - --- PROCESSING: Genesis 48 ---
2025-09-27 21:20:34,224 - DEBUG - Starting new HTTPS connection (1): www.sefaria.org:443
2025-09-27 21:20:34,608 - DEBUG - https://www.sefaria.org:443 "GET /api/texts/Genesis.48 HTTP/1.1" 200 None
2025-09-27 21:20:34,656 - INFO - Processing 1 problematic verses from Genesis 48
2025-09-27 21:20:34,657 - INFO - Worker 1: Processing Genesis 48:10
2025-09-27 21:20:45,712 - DEBUG - 🔍 API Response Debug Info:
2025-09-27 21:20:45,713 - DEBUG -   📊 Total candidates: 1
2025-09-27 21:20:45,714 - DEBUG -   🏁 Finish reason: 1
2025-09-27 21:20:45,714 - DEBUG -   📝 Finish reason type: <enum 'FinishReason'>
2025-09-27 21:20:45,715 - DEBUG -   📝 Finish reason str: '1'
2025-09-27 21:20:45,716 - DEBUG -   🪙 Usage Metadata:
2025-09-27 21:20:45,716 - DEBUG -     - Prompt Token Count: 1378
2025-09-27 21:20:45,716 - DEBUG -     - Candidates Token Count: 682
2025-09-27 21:20:45,716 - DEBUG -     - Total Token Count: 3338
2025-09-27 21:20:45,716 - DEBUG -   🛡️ Safety ratings: None
2025-09-27 21:20:45,717 - DEBUG -   📄 Has content: True
2025-09-27 21:20:45,718 - DEBUG -   📄 Content parts count: 1
2025-09-27 21:20:45,718 - DEBUG -   📝 Response text length: 2633 characters
2025-09-27 21:20:45,719 - DEBUG -   📝 Response ends with: 'nstances of figurative language in this verse.

[]'
2025-09-27 21:20:45,719 - DEBUG - 🔍 PARSING DEBUG - Starting response parsing:
2025-09-27 21:20:45,720 - DEBUG -   📏 Total response length: 2633
2025-09-27 21:20:45,721 - DEBUG -   📄 Response preview (first 200 chars): 'FIGURATIVE_DETECTION:
I have carefully analyzed the provided Hebrew text and its English translation for any instances of figurative language, adhering strictly to the conservative guidelines provided'
2025-09-27 21:20:45,721 - DEBUG -   📄 Response ending (last 200 chars): 'or personification. They are standard character actions.

Based on this thorough analysis and strict adherence to the provided guidelines, I find no instances of figurative language in this verse.

[]'
2025-09-27 21:20:45,722 - DEBUG -   📝 FIGURATIVE_DETECTION extracted: 1560 chars
2025-09-27 21:20:45,723 - DEBUG -   📝 Detection ends with: 'perceive visually, not an exaggeration or an understatement.

3.  **"וַיַּגֵּ֤שׁ אֹתָם֙ אֵלָ֔יו" (So'
2025-09-27 21:20:45,723 - DEBUG -   ⚠️ No TAGGING_ANALYSIS section found
2025-09-27 21:20:45,724 - DEBUG - 🔍 JSON EXTRACTION DEBUG:
2025-09-27 21:20:45,725 - INFO -     🔍 JSON Array Extraction:
2025-09-27 21:20:45,726 - INFO -       📄 Found JSON-like array: 8 chars
2025-09-27 21:20:45,727 - INFO -       📄 Array content: '[Joseph]'
2025-09-27 21:20:45,728 - INFO -       ⚠️ Array doesn't contain objects - continuing search
2025-09-27 21:20:45,729 - INFO -       ⚠️ No JSON OUTPUT section found
2025-09-27 21:20:45,729 - INFO -       📄 Attempting sophisticated bracket matching from position 1583
2025-09-27 21:20:45,730 - INFO -       📄 Bracket matching found: 8 chars
2025-09-27 21:20:45,731 - INFO -       ⚠️ Bracket-matched array doesn't contain objects
2025-09-27 21:20:45,731 - INFO -       📄 Empty array pattern detected
2025-09-27 21:20:45,732 - DEBUG -   📄 JSON string extracted: 2 chars
2025-09-27 21:20:45,732 - DEBUG -   📄 JSON preview: '[]'
2025-09-27 21:20:45,733 - DEBUG -   📄 COMPLETE JSON CONTENT:
2025-09-27 21:20:45,734 - DEBUG - ---JSON-START---
2025-09-27 21:20:45,734 - DEBUG - []
2025-09-27 21:20:45,734 - DEBUG - ---JSON-END---
2025-09-27 21:20:45,734 - INFO - 🔍 FALLBACK CHECK - No instances found but have deliberation text
2025-09-27 21:20:45,734 - INFO -   📝 Has figurative indicators: True
2025-09-27 21:20:45,735 - INFO -   📝 Appears to end abruptly: True
2025-09-27 21:20:45,736 - INFO -   📝 Has substantial analysis: True
2025-09-27 21:20:45,736 - INFO -   📝 Has figurative analysis: True
2025-09-27 21:20:45,737 - INFO -   📝 Has figurative conclusions: False
2025-09-27 21:20:45,738 - INFO -   📝 Missing TAGGING_ANALYSIS: False
2025-09-27 21:20:45,738 - INFO -   📝 Analysis complete but JSON empty: False
2025-09-27 21:20:45,739 - INFO -   📝 Should trigger fallback: True
2025-09-27 21:20:45,740 - ERROR - ❌ API response was truncated. No JSON was found and fallback parsing is disabled.
2025-09-27 21:20:45,740 - ERROR - ❌ This verse must be re-processed. Returning no instances.
2025-09-27 21:20:45,741 - WARNING - Worker 1: Truncation detected in Genesis 48:10, retrying with Pro model
2025-09-27 21:20:45,741 - INFO - Using model override: gemini-2.5-pro
2025-09-27 21:21:08,615 - DEBUG - 🔍 API Response Debug Info:
2025-09-27 21:21:08,618 - DEBUG -   📊 Total candidates: 1
2025-09-27 21:21:08,619 - DEBUG -   🏁 Finish reason: 1
2025-09-27 21:21:08,620 - DEBUG -   📝 Finish reason type: <enum 'FinishReason'>
2025-09-27 21:21:08,621 - DEBUG -   📝 Finish reason str: '1'
2025-09-27 21:21:08,623 - DEBUG -   🪙 Usage Metadata:
2025-09-27 21:21:08,624 - DEBUG -     - Prompt Token Count: 1378
2025-09-27 21:21:08,624 - DEBUG -     - Candidates Token Count: 887
2025-09-27 21:21:08,624 - DEBUG -     - Total Token Count: 4237
2025-09-27 21:21:08,624 - DEBUG -   🛡️ Safety ratings: None
2025-09-27 21:21:08,625 - DEBUG -   📄 Has content: True
2025-09-27 21:21:08,626 - DEBUG -   📄 Content parts count: 1
2025-09-27 21:21:08,628 - DEBUG -   📝 Response text length: 2954 characters
2025-09-27 21:21:08,629 - DEBUG -   📝 Response ends with: 'uent actions in blessing his grandsons."
  }
]
```'
2025-09-27 21:21:08,630 - WARNING -   ⚠️ Response appears to end abruptly (no proper punctuation)
2025-09-27 21:21:08,631 - DEBUG - 🔍 PARSING DEBUG - Starting response parsing:
2025-09-27 21:21:08,631 - DEBUG -   📏 Total response length: 2954
2025-09-27 21:21:08,632 - DEBUG -   📄 Response preview (first 200 chars): '**FIGURATIVE_DETECTION:**
1.  **`וְעֵינֵ֤י יִשְׂרָאֵל֙ כָּבְד֣וּ מִזֹּ֔קֶן` (Now Israel’s eyes were heavy from age):**
    *   **Consideration:** I examined whether the word `כָּבְד֣וּ` (kavedu), lite'
2025-09-27 21:21:08,633 - DEBUG -   📄 Response ending (last 200 chars): '    "speaker": "Narrator",
    "purpose": "To explain Israel's failing eyesight due to old age, which is a crucial detail for understanding his subsequent actions in blessing his grandsons."
  }
]
```'
2025-09-27 21:21:08,635 - DEBUG -   📝 FIGURATIVE_DETECTION extracted: 834 chars
2025-09-27 21:21:08,636 - DEBUG -   📝 Detection ends with: 'l hearing). Therefore, I have classified this as a metaphor.
    *   **Conclusion:** Included in the'
2025-09-27 21:21:08,637 - DEBUG -   ⚠️ No TAGGING_ANALYSIS section found
2025-09-27 21:21:08,638 - DEBUG - 🔍 JSON EXTRACTION DEBUG:
2025-09-27 21:21:08,639 - INFO -     🔍 JSON Array Extraction:
2025-09-27 21:21:08,639 - INFO -       📄 Found JSON-like array: 8 chars
2025-09-27 21:21:08,640 - INFO -       📄 Array content: '[Joseph]'
2025-09-27 21:21:08,641 - INFO -       ⚠️ Array doesn't contain objects - continuing search
2025-09-27 21:21:08,642 - INFO -       📄 Found JSON OUTPUT section: 2084 chars
2025-09-27 21:21:08,644 - WARNING -       ⚠️ JSON appears incomplete in OUTPUT section
2025-09-27 21:21:08,646 - INFO -       📄 Attempting sophisticated bracket matching from position 1321
2025-09-27 21:21:08,648 - INFO -       📄 Bracket matching found: 8 chars
2025-09-27 21:21:08,649 - INFO -       ⚠️ Bracket-matched array doesn't contain objects
2025-09-27 21:21:08,650 - WARNING -       ❌ No valid JSON array found - returning empty
2025-09-27 21:21:08,651 - DEBUG -   📄 JSON string extracted: 2 chars
2025-09-27 21:21:08,653 - DEBUG -   📄 JSON preview: '[]'
2025-09-27 21:21:08,654 - DEBUG -   📄 COMPLETE JSON CONTENT:
2025-09-27 21:21:08,655 - DEBUG - ---JSON-START---
2025-09-27 21:21:08,655 - DEBUG - []
2025-09-27 21:21:08,655 - DEBUG - ---JSON-END---
2025-09-27 21:21:08,655 - INFO - 🔍 FALLBACK CHECK - No instances found but have deliberation text
2025-09-27 21:21:08,656 - INFO -   📝 Has figurative indicators: True
2025-09-27 21:21:08,657 - INFO -   📝 Appears to end abruptly: True
2025-09-27 21:21:08,658 - INFO -   📝 Has substantial analysis: True
2025-09-27 21:21:08,659 - INFO -   📝 Has figurative analysis: True
2025-09-27 21:21:08,660 - INFO -   📝 Has figurative conclusions: True
2025-09-27 21:21:08,662 - INFO -   📝 Missing TAGGING_ANALYSIS: True
2025-09-27 21:21:08,664 - INFO -   📝 Analysis complete but JSON empty: True
2025-09-27 21:21:08,666 - INFO -   📝 Should trigger fallback: True
2025-09-27 21:21:08,667 - ERROR - ❌ API response was truncated. No JSON was found and fallback parsing is disabled.
2025-09-27 21:21:08,668 - ERROR - ❌ This verse must be re-processed. Returning no instances.
2025-09-27 21:21:08,669 - WARNING - Worker 1: Pro model also truncated for Genesis 48:10 - trying tertiary decomposition fallback
2025-09-27 21:21:08,670 - INFO - 🔄 TERTIARY FALLBACK: Using task decomposition approach
2025-09-27 21:21:32,036 - INFO -     🔍 JSON Array Extraction:
2025-09-27 21:21:32,038 - INFO -       📄 Found JSON-like array: 1725 chars
2025-09-27 21:21:32,040 - INFO -       📄 Array content: '[
- **Phrase 1:** וְעֵינֵ֤י יִשְׂרָאֵל֙ כָּבְד֣וּ מִזֹּ֔קֶן (v'einei yisrael kavdu mi-zoken) - "Now Israel’s eyes were dim with age"
- **Consideration:** I considered whether the verb כָּבְד֣וּ (*kavdu*), literally "were heavy," is a metaphor for being dim or functioning poorly.
- **Reasoning:** The application of "heaviness" to eyes to describe failing sight is a potential metaphor, as the eyes do not literally increase in weight. However, this is a very common and conventional way of describing the physical sensation and effect of age-related vision loss (e.g., cataracts, tired/heavy eyelids). It describes a physical state of a physical organ using a common physical descriptor. In contrast to a clear metaphor like applying a physical action to an abstract concept (e.g., a "heavy heart" for sadness), this is more of a physiological description. Given the instruction to be "CONSERVATIVE with standard narrative language," this expression is treated as a standard, descriptive idiom for a physical condition rather than a distinct, non-literal figure of speech. It is a borderline case, but conservatism favors classifying it as standard narrative.

- **Phrase 2:** לֹ֥א יוּכַ֖ל לִרְא֑וֹת (lo yukhal lir'ot) - "he could not see"
- **Consideration:** I considered if "seeing" was used metaphorically for understanding or perception.
- **Reasoning:** The context is entirely about physical sight. The narrative immediately follows this statement with physical actions (bringing the boys close, kissing, embracing) that are necessitated by his inability to see them from a distance. This is a literal statement of fact. It is excluded.

- **Phrase 3:** וַיַּגֵּ֤שׁ אֹתָם֙ אֵלָ֔יו (vayaggesh otam elav) - "So [Joseph]'
2025-09-27 21:21:32,042 - INFO -       ⚠️ Array doesn't contain objects - continuing search
2025-09-27 21:21:32,044 - INFO -       📄 Found JSON OUTPUT section: 5 chars
2025-09-27 21:21:32,048 - WARNING -       ⚠️ JSON appears incomplete in OUTPUT section
2025-09-27 21:21:32,050 - INFO -       📄 Attempting sophisticated bracket matching from position 28
2025-09-27 21:21:32,054 - INFO -       📄 Bracket matching found: 2390 chars
2025-09-27 21:21:32,057 - INFO -       ⚠️ Bracket-matched array doesn't contain objects
2025-09-27 21:21:32,060 - INFO -       📄 Empty array pattern detected
2025-09-27 21:21:32,062 - INFO - 🔍 STEP 1 (Detection): No figurative language detected or failed
2025-09-27 21:21:32,066 - INFO - Worker 1: Tertiary fallback completed for Genesis 48:10 - Step: detection, Instances: 0
2025-09-27 21:21:32,066 - INFO - Worker 1: Completed Genesis 48:10 - 0 instances
2025-09-27 21:21:32,080 - INFO - Completed Genesis 48:10: Truncation=yes, BothTruncated=yes, Model=gemini-2.5-pro-decomposed, Instances=0
2025-09-27 21:21:32,085 - INFO - --- PROCESSING: Genesis 30 ---
2025-09-27 21:21:32,087 - DEBUG - Starting new HTTPS connection (1): www.sefaria.org:443
2025-09-27 21:21:32,798 - DEBUG - https://www.sefaria.org:443 "GET /api/texts/Genesis.30 HTTP/1.1" 200 None
2025-09-27 21:21:32,850 - INFO - Processing 1 problematic verses from Genesis 30
2025-09-27 21:21:32,851 - INFO - Worker 1: Processing Genesis 30:6
2025-09-27 21:21:56,168 - DEBUG - 🔍 API Response Debug Info:
2025-09-27 21:21:56,172 - DEBUG -   📊 Total candidates: 1
2025-09-27 21:21:56,173 - DEBUG -   🏁 Finish reason: 1
2025-09-27 21:21:56,174 - DEBUG -   📝 Finish reason type: <enum 'FinishReason'>
2025-09-27 21:21:56,175 - DEBUG -   📝 Finish reason str: '1'
2025-09-27 21:21:56,176 - DEBUG -   🪙 Usage Metadata:
2025-09-27 21:21:56,177 - DEBUG -     - Prompt Token Count: 1383
2025-09-27 21:21:56,177 - DEBUG -     - Candidates Token Count: 1064
2025-09-27 21:21:56,178 - DEBUG -     - Total Token Count: 6087
2025-09-27 21:21:56,178 - DEBUG -   🛡️ Safety ratings: None
2025-09-27 21:21:56,179 - DEBUG -   📄 Has content: True
2025-09-27 21:21:56,180 - DEBUG -   📄 Content parts count: 1
2025-09-27 21:21:56,181 - DEBUG -   📝 Response text length: 3836 characters
2025-09-27 21:21:56,182 - DEBUG -   📝 Response ends with: 'le response to her prayers for a child."
  }
]
```'
2025-09-27 21:21:56,183 - WARNING -   ⚠️ Response appears to end abruptly (no proper punctuation)
2025-09-27 21:21:56,185 - DEBUG - 🔍 PARSING DEBUG - Starting response parsing:
2025-09-27 21:21:56,186 - DEBUG -   📏 Total response length: 3836
2025-09-27 21:21:56,187 - DEBUG -   📄 Response preview (first 200 chars): 'FIGURATIVE_DETECTION:

1.  **Phrase/Concept:** "God has vindicated me" (דָּנַ֣נִּי אֱלֹהִ֔ים)
    *   **What I considered:** I considered if this phrase, particularly in its connection to the name "Da'
2025-09-27 21:21:56,189 - DEBUG -   📄 Response ending (last 200 chars): 'tion"
    ],
    "confidence": 0.9,
    "speaker": "Rachel",
    "purpose": "To express gratitude and acknowledge God's active involvement and favorable response to her prayers for a child."
  }
]
```'
2025-09-27 21:21:56,190 - DEBUG -   📝 FIGURATIVE_DETECTION extracted: 2573 chars
2025-09-27 21:21:56,192 - DEBUG -   📝 Detection ends with: ' statement describing Rachel's action of naming her son. No figurative language is present.

```json'
2025-09-27 21:21:56,194 - DEBUG -   ⚠️ No TAGGING_ANALYSIS section found
2025-09-27 21:21:56,196 - DEBUG - 🔍 JSON EXTRACTION DEBUG:
2025-09-27 21:21:56,197 - INFO -     🔍 JSON Array Extraction:
2025-09-27 21:21:56,198 - INFO -       📄 Found JSON-like array: 261 chars
2025-09-27 21:21:56,200 - INFO -       📄 Array content: '[
  {
    "figurative_language": "yes",
    "simile": "no",
    "metaphor": "no",
    "personification": "no",
    "idiom": "yes",
    "hyperbole": "no",
    "metonymy": "no",
    "other": "no",
    "hebrew_text": "שָׁמַ֣ע בְּקֹלִ֔י",
    "english_text": "[God]'
2025-09-27 21:21:56,203 - INFO -       ⚠️ Array doesn't contain objects - continuing search
2025-09-27 21:21:56,205 - INFO -       ⚠️ No JSON OUTPUT section found
2025-09-27 21:21:56,206 - INFO -       📄 Attempting sophisticated bracket matching from position 2597
2025-09-27 21:21:56,208 - INFO -       📄 Bracket matching found: 1235 chars
2025-09-27 21:21:56,209 - INFO -       ✅ Bracket-matched array contains objects
2025-09-27 21:21:56,210 - DEBUG -   📄 JSON string extracted: 1235 chars
2025-09-27 21:21:56,212 - DEBUG -   📄 JSON preview: '[
  {
    "figurative_language": "yes",
    "simile": "no",
    "metaphor": "no",
    "personification": "no",
    "idiom": "yes",
    "hyperbole": "no",
    "metonymy": "no",
    "other": "no",
    "'
2025-09-27 21:21:56,213 - DEBUG -   📄 COMPLETE JSON CONTENT:
2025-09-27 21:21:56,215 - DEBUG - ---JSON-START---
2025-09-27 21:21:56,215 - DEBUG - [
  {
    "figurative_language": "yes",
    "simile": "no",
    "metaphor": "no",
    "personification": "no",
    "idiom": "yes",
    "hyperbole": "no",
    "metonymy": "no",
    "other": "no",
    "hebrew_text": "שָׁמַ֣ע בְּקֹלִ֔י",
    "english_text": "[God] has heeded my plea",
    "explanation": "The phrase 'to hear one's voice/plea' (שמע בקול) is an idiom signifying divine attentiveness and responsiveness to a prayer or request, implying favorable action rather than just auditory perception.",
    "target": [
      "God's responsiveness to prayer",
      "divine intervention",
      "divine attributes",
      "God's relationship with humanity"
    ],
    "vehicle": [
      "hearing a sound",
      "auditory perception",
      "sensory action",
      "human communication"
    ],
    "ground": [
      "attentiveness and action",
      "favorable consideration",
      "divine care",
      "answered prayer"
    ],
    "posture": [
      "gratitude",
      "acknowledgment",
      "positive sentiment",
      "religious devotion"
    ],
    "confidence": 0.9,
    "speaker": "Rachel",
    "purpose": "To express gratitude and acknowledge God's active involvement and favorable response to her prayers for a child."
  }
]
2025-09-27 21:21:56,217 - DEBUG - ---JSON-END---
2025-09-27 21:21:56,218 - WARNING -   ⚠️ Found problematic characters: ["'ש' (ord=1513) at pos 215", "'ׁ' (ord=1473) at pos 216", "'ָ' (ord=1464) at pos 217", "'מ' (ord=1502) at pos 218", "'ַ' (ord=1463) at pos 219", "'֣' (ord=1443) at pos 220", "'ע' (ord=1506) at pos 221", "'ב' (ord=1489) at pos 223", "'ּ' (ord=1468) at pos 224", "'ְ' (ord=1456) at pos 225"]
2025-09-27 21:21:56,219 - INFO -   ✅ JSON parsing succeeded on first attempt
2025-09-27 21:21:56,220 - INFO - Worker 1: Completed Genesis 30:6 - 1 instances
2025-09-27 21:21:56,223 - INFO - Completed Genesis 30:6: Truncation=no, BothTruncated=no, Model=gemini-2.5-flash, Instances=1
2025-09-27 21:21:56,227 - INFO - --- PROCESSING: Genesis 29 ---
2025-09-27 21:21:56,228 - DEBUG - Starting new HTTPS connection (1): www.sefaria.org:443
2025-09-27 21:21:56,771 - DEBUG - https://www.sefaria.org:443 "GET /api/texts/Genesis.29 HTTP/1.1" 200 None
2025-09-27 21:21:56,819 - INFO - Processing 1 problematic verses from Genesis 29
2025-09-27 21:21:56,820 - INFO - Worker 1: Processing Genesis 29:16
2025-09-27 21:22:01,530 - DEBUG - 🔍 API Response Debug Info:
2025-09-27 21:22:01,532 - DEBUG -   📊 Total candidates: 1
2025-09-27 21:22:01,533 - DEBUG -   🏁 Finish reason: 1
2025-09-27 21:22:01,534 - DEBUG -   📝 Finish reason type: <enum 'FinishReason'>
2025-09-27 21:22:01,536 - DEBUG -   📝 Finish reason str: '1'
2025-09-27 21:22:01,537 - DEBUG -   🪙 Usage Metadata:
2025-09-27 21:22:01,539 - DEBUG -     - Prompt Token Count: 1328
2025-09-27 21:22:01,539 - DEBUG -     - Candidates Token Count: 485
2025-09-27 21:22:01,539 - DEBUG -     - Total Token Count: 2250
2025-09-27 21:22:01,539 - DEBUG -   🛡️ Safety ratings: None
2025-09-27 21:22:01,540 - DEBUG -   📄 Has content: True
2025-09-27 21:22:01,542 - DEBUG -   📄 Content parts count: 1
2025-09-27 21:22:01,543 - DEBUG -   📝 Response text length: 1859 characters
2025-09-27 21:22:01,544 - DEBUG -   📝 Response ends with: 'tions as a plain, factual narrative statement.

[]'
2025-09-27 21:22:01,546 - DEBUG - 🔍 PARSING DEBUG - Starting response parsing:
2025-09-27 21:22:01,547 - DEBUG -   📏 Total response length: 1859
2025-09-27 21:22:01,548 - DEBUG -   📄 Response preview (first 200 chars): 'FIGURATIVE_DETECTION:
I have carefully analyzed the provided Hebrew text: "וּלְלָבָ֖ן שְׁתֵּ֣י בָנ֑וֹת שֵׁ֤ם הַגְּדֹלָה֙ לֵאָ֔ה וְשֵׁ֥ם הַקְּטַנָּ֖ה רָחֵֽל" (Now Laban had two daughters; the name of t'
2025-09-27 21:22:01,549 - DEBUG -   📄 Response ending (last 200 chars): 'delines for figurative language detection, I find no instances of clear metaphors, personification, obvious similes, or biblical idioms. The text functions as a plain, factual narrative statement.

[]'
2025-09-27 21:22:01,550 - DEBUG -   📝 FIGURATIVE_DETECTION extracted: 1833 chars
2025-09-27 21:22:01,552 - DEBUG -   📝 Detection ends with: 'on, obvious similes, or biblical idioms. The text functions as a plain, factual narrative statement.'
2025-09-27 21:22:01,553 - DEBUG -   ⚠️ No TAGGING_ANALYSIS section found
2025-09-27 21:22:01,555 - DEBUG - 🔍 JSON EXTRACTION DEBUG:
2025-09-27 21:22:01,557 - INFO -     🔍 JSON Array Extraction:
2025-09-27 21:22:01,558 - INFO -       📄 Found JSON-like array: 2 chars
2025-09-27 21:22:01,559 - INFO -       📄 Array content: '[]'
2025-09-27 21:22:01,561 - INFO -       ⚠️ Array doesn't contain objects - continuing search
2025-09-27 21:22:01,562 - INFO -       ⚠️ No JSON OUTPUT section found
2025-09-27 21:22:01,563 - INFO -       📄 Attempting sophisticated bracket matching from position 1857
2025-09-27 21:22:01,564 - INFO -       📄 Bracket matching found: 2 chars
2025-09-27 21:22:01,565 - INFO -       ⚠️ Bracket-matched array doesn't contain objects
2025-09-27 21:22:01,566 - INFO -       📄 Empty array pattern detected
2025-09-27 21:22:01,567 - DEBUG -   📄 JSON string extracted: 2 chars
2025-09-27 21:22:01,568 - DEBUG -   📄 JSON preview: '[]'
2025-09-27 21:22:01,570 - DEBUG -   📄 COMPLETE JSON CONTENT:
2025-09-27 21:22:01,571 - DEBUG - ---JSON-START---
2025-09-27 21:22:01,571 - DEBUG - []
2025-09-27 21:22:01,571 - DEBUG - ---JSON-END---
2025-09-27 21:22:01,571 - INFO - 🔍 FALLBACK CHECK - No instances found but have deliberation text
2025-09-27 21:22:01,573 - INFO -   📝 Has figurative indicators: True
2025-09-27 21:22:01,574 - INFO -   📝 Appears to end abruptly: False
2025-09-27 21:22:01,575 - INFO -   📝 Has substantial analysis: True
2025-09-27 21:22:01,576 - INFO -   📝 Has figurative analysis: True
2025-09-27 21:22:01,578 - INFO -   📝 Has figurative conclusions: False
2025-09-27 21:22:01,579 - INFO -   📝 Missing TAGGING_ANALYSIS: False
2025-09-27 21:22:01,581 - INFO -   📝 Analysis complete but JSON empty: False
2025-09-27 21:22:01,583 - INFO -   📝 Should trigger fallback: False
2025-09-27 21:22:01,584 - INFO -   📝 Truncation criteria not met - no fallback parsing attempted
2025-09-27 21:22:01,586 - INFO - Worker 1: Completed Genesis 29:16 - 0 instances
2025-09-27 21:22:01,589 - INFO - Completed Genesis 29:16: Truncation=no, BothTruncated=no, Model=gemini-2.5-flash, Instances=0
2025-09-27 21:22:01,592 - INFO - --- PROCESSING: Genesis 22 ---
2025-09-27 21:22:01,594 - DEBUG - Starting new HTTPS connection (1): www.sefaria.org:443
2025-09-27 21:22:02,132 - DEBUG - https://www.sefaria.org:443 "GET /api/texts/Genesis.22 HTTP/1.1" 200 None
2025-09-27 21:22:02,159 - INFO - Processing 1 problematic verses from Genesis 22
2025-09-27 21:22:02,159 - INFO - Worker 1: Processing Genesis 22:8
2025-09-27 21:22:14,984 - WARNING - Attempt 1 failed: 500 An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
2025-09-27 21:22:37,868 - WARNING - Attempt 2 failed: 500 An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
2025-09-27 21:22:58,341 - WARNING - Attempt 3 failed: 500 An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
2025-09-27 21:22:58,341 - INFO - Primary model failed, trying fallback...
2025-09-27 21:22:58,415 - WARNING - Attempt 1 failed: 404 models/gemini-1.5-flash-latest is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.
2025-09-27 21:22:58,541 - WARNING - Attempt 2 failed: 404 models/gemini-1.5-flash-latest is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.
2025-09-27 21:22:58,624 - WARNING - Attempt 3 failed: 404 models/gemini-1.5-flash-latest is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.
2025-09-27 21:22:58,624 - INFO - Worker 1: Completed Genesis 22:8 - 0 instances
2025-09-27 21:22:58,636 - INFO - Completed Genesis 22:8: Truncation=no, BothTruncated=no, Model=gemini-2.5-flash, Instances=0
2025-09-27 21:22:58,641 - INFO - === TEST COMPLETE ===
2025-09-27 21:22:58,641 - INFO - Tested 11 problematic verses
