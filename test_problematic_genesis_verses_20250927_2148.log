2025-09-27 21:48:51,996 - INFO - Successfully loaded environment variables from: C:\Users\ariro\OneDrive\Documents\Bible\.env
2025-09-27 21:48:51,996 - INFO - === TESTING PROBLEMATIC GENESIS VERSES ===
2025-09-27 21:48:51,996 - INFO - Verses to test: 11
2025-09-27 21:48:51,996 - INFO - Initializing Sefaria client...
2025-09-27 21:48:51,996 - INFO - Creating database: test_problematic_genesis_verses_20250927_2148.db
2025-09-27 21:48:52,086 - INFO - Initializing MetaphorValidator...
2025-09-27 21:48:52,086 - INFO - Initializing Flexible Tagging Gemini Client...
2025-09-27 21:48:52,361 - INFO - Claude Sonnet 4 client initialized successfully
2025-09-27 21:48:52,361 - INFO - --- PROCESSING: Genesis 14 ---
2025-09-27 21:48:52,365 - DEBUG - Starting new HTTPS connection (1): www.sefaria.org:443
2025-09-27 21:48:52,690 - DEBUG - https://www.sefaria.org:443 "GET /api/texts/Genesis.14 HTTP/1.1" 200 None
2025-09-27 21:48:52,738 - INFO - Processing 1 problematic verses from Genesis 14
2025-09-27 21:48:52,739 - INFO - Worker 1: Processing Genesis 14:20
2025-09-27 21:49:04,678 - DEBUG - ğŸ” API Response Debug Info:
2025-09-27 21:49:04,683 - DEBUG -   ğŸ“Š Total candidates: 1
2025-09-27 21:49:04,684 - DEBUG -   ğŸ Finish reason: 1
2025-09-27 21:49:04,685 - DEBUG -   ğŸ“ Finish reason type: <enum 'FinishReason'>
2025-09-27 21:49:04,686 - DEBUG -   ğŸ“ Finish reason str: '1'
2025-09-27 21:49:04,687 - DEBUG -   ğŸª™ Usage Metadata:
2025-09-27 21:49:04,688 - DEBUG -     - Prompt Token Count: 1343
2025-09-27 21:49:04,688 - DEBUG -     - Candidates Token Count: 792
2025-09-27 21:49:04,688 - DEBUG -     - Total Token Count: 3881
2025-09-27 21:49:04,688 - DEBUG -   ğŸ›¡ï¸ Safety ratings: None
2025-09-27 21:49:04,689 - DEBUG -   ğŸ“„ Has content: True
2025-09-27 21:49:04,690 - DEBUG -   ğŸ“„ Content parts count: 1
2025-09-27 21:49:04,690 - DEBUG -   ğŸ“ Response text length: 2770 characters
2025-09-27 21:49:04,691 - DEBUG -   ğŸ“ Response ends with: 'nd authority over his defeated enemies."
  }
]
```'
2025-09-27 21:49:04,692 - WARNING -   âš ï¸ Response appears to end abruptly (no proper punctuation)
2025-09-27 21:49:04,693 - DEBUG - ğŸ” PARSING DEBUG - Starting response parsing:
2025-09-27 21:49:04,693 - DEBUG -   ğŸ“ Total response length: 2770
2025-09-27 21:49:04,694 - DEBUG -   ğŸ“„ Response preview (first 200 chars): 'FIGURATIVE_DETECTION:
*   **"×ÖµÖ£×œ ×¢Ö¶×œÖ°×™Ö”×•Ö¹×Ÿ" (God Most High):** I considered if this title might be a metaphor or hyperbole. However, "Most High" (×¢Ö¶×œÖ°×™Ö”×•Ö¹×Ÿ) is a literal descriptive adjective for God'
2025-09-27 21:49:04,695 - DEBUG -   ğŸ“„ Response ending (last 200 chars): 'dence": 0.95,
    "speaker": "Melchizedek",
    "purpose": "To declare God's role in granting Abram victory and to emphasize Abram's resulting power and authority over his defeated enemies."
  }
]
```'
2025-09-27 21:49:04,695 - DEBUG -   ğŸ“ FIGURATIVE_DETECTION extracted: 1335 chars
2025-09-27 21:49:04,696 - DEBUG -   ğŸ“ Detection ends with: ' I am including it as an idiom and a type of metonymy.
*   **"×•Ö·×™Ö¼Ö´×ªÖ¼Ö¶×ŸÖ¾×œÖ¥×•Ö¹ ×Ö·×¢Ö²×©×‚ÖµÖ–×¨ ×Ö´×›Ö¼Ö¹Ö½×œ" (And'
2025-09-27 21:49:04,697 - DEBUG -   âš ï¸ No TAGGING_ANALYSIS section found
2025-09-27 21:49:04,698 - DEBUG - ğŸ” JSON EXTRACTION DEBUG:
2025-09-27 21:49:04,698 - INFO -     ğŸ” JSON Array Extraction:
2025-09-27 21:49:04,699 - INFO -       ğŸ“„ Found JSON-like array: 7 chars
2025-09-27 21:49:04,700 - INFO -       ğŸ“„ Array content: '[Abram]'
2025-09-27 21:49:04,700 - INFO -       âš ï¸ Array doesn't contain objects - continuing search
2025-09-27 21:49:04,701 - INFO -       âš ï¸ No JSON OUTPUT section found
2025-09-27 21:49:04,702 - INFO -       ğŸ“„ Attempting sophisticated bracket matching from position 1358
2025-09-27 21:49:04,702 - INFO -       ğŸ“„ Bracket matching found: 7 chars
2025-09-27 21:49:04,704 - INFO -       âš ï¸ Bracket-matched array doesn't contain objects
2025-09-27 21:49:04,705 - WARNING -       âŒ No valid JSON array found - returning empty
2025-09-27 21:49:04,707 - DEBUG -   ğŸ“„ JSON string extracted: 2 chars
2025-09-27 21:49:04,708 - DEBUG -   ğŸ“„ JSON preview: '[]'
2025-09-27 21:49:04,709 - DEBUG -   ğŸ“„ COMPLETE JSON CONTENT:
2025-09-27 21:49:04,710 - DEBUG - ---JSON-START---
2025-09-27 21:49:04,710 - DEBUG - []
2025-09-27 21:49:04,711 - DEBUG - ---JSON-END---
2025-09-27 21:49:04,711 - INFO - ğŸ” FALLBACK CHECK - No instances found but have deliberation text
2025-09-27 21:49:04,712 - INFO -   ğŸ“ Has figurative indicators: True
2025-09-27 21:49:04,713 - INFO -   ğŸ“ Appears to end abruptly: True
2025-09-27 21:49:04,714 - INFO -   ğŸ“ Has substantial analysis: True
2025-09-27 21:49:04,714 - INFO -   ğŸ“ Has figurative analysis: True
2025-09-27 21:49:04,715 - INFO -   ğŸ“ Has figurative conclusions: False
2025-09-27 21:49:04,715 - INFO -   ğŸ“ Missing TAGGING_ANALYSIS: False
2025-09-27 21:49:04,716 - INFO -   ğŸ“ Analysis complete but JSON empty: False
2025-09-27 21:49:04,717 - INFO -   ğŸ“ Should trigger fallback: True
2025-09-27 21:49:04,719 - ERROR - âŒ API response was truncated. No JSON was found and fallback parsing is disabled.
2025-09-27 21:49:04,720 - ERROR - âŒ This verse must be re-processed. Returning no instances.
2025-09-27 21:49:04,721 - WARNING - Worker 1: Truncation detected in Genesis 14:20, retrying with Pro model
2025-09-27 21:49:04,721 - INFO - Using model override: gemini-2.5-pro
2025-09-27 21:49:31,463 - DEBUG - ğŸ” API Response Debug Info:
2025-09-27 21:49:31,465 - DEBUG -   ğŸ“Š Total candidates: 1
2025-09-27 21:49:31,467 - DEBUG -   ğŸ Finish reason: 1
2025-09-27 21:49:31,469 - DEBUG -   ğŸ“ Finish reason type: <enum 'FinishReason'>
2025-09-27 21:49:31,470 - DEBUG -   ğŸ“ Finish reason str: '1'
2025-09-27 21:49:31,471 - DEBUG -   ğŸª™ Usage Metadata:
2025-09-27 21:49:31,473 - DEBUG -     - Prompt Token Count: 1343
2025-09-27 21:49:31,473 - DEBUG -     - Candidates Token Count: 781
2025-09-27 21:49:31,473 - DEBUG -     - Total Token Count: 4570
2025-09-27 21:49:31,473 - DEBUG -   ğŸ›¡ï¸ Safety ratings: None
2025-09-27 21:49:31,474 - DEBUG -   ğŸ“„ Has content: True
2025-09-27 21:49:31,476 - DEBUG -   ğŸ“„ Content parts count: 1
2025-09-27 21:49:31,477 - DEBUG -   ğŸ“ Response text length: 2713 characters
2025-09-27 21:49:31,479 - DEBUG -   ğŸ“ Response ends with: 's a complete transfer of power and control."
  }
]'
2025-09-27 21:49:31,480 - DEBUG - ğŸ” PARSING DEBUG - Starting response parsing:
2025-09-27 21:49:31,481 - DEBUG -   ğŸ“ Total response length: 2713
2025-09-27 21:49:31,482 - DEBUG -   ğŸ“„ Response preview (first 200 chars): 'FIGURATIVE_DETECTION:
- **×•Ö¼×‘Ö¸×¨×•Ö¼×šÖ°Ö™ ×ÖµÖ£×œ ×¢Ö¶×œÖ°×™Ö”×•Ö¹×Ÿ (And blessed be God Most High)**: I considered if the epithet `×¢Ö¶×œÖ°×™Ö”×•Ö¹×Ÿ` (Most High) could be figurative. I concluded it is not. In the context of '
2025-09-27 21:49:31,483 - DEBUG -   ğŸ“„ Response ending (last 200 chars): ' 1.0,
    "speaker": "Melchizedek",
    "purpose": "To emphasize the totality of the victory God granted to Abram, framing the defeat of the enemies as a complete transfer of power and control."
  }
]'
2025-09-27 21:49:31,484 - DEBUG -   ğŸ“ FIGURATIVE_DETECTION extracted: 1367 chars
2025-09-27 21:49:31,486 - DEBUG -   ğŸ“ Detection ends with: ' rules. This is the only phrase I will mark as figurative.
- **×•Ö·×™Ö¼Ö´×ªÖ¼Ö¶×ŸÖ¾×œÖ¥×•Ö¹ ×Ö·×¢Ö²×©×‚ÖµÖ–×¨ ×Ö´×›Ö¼Ö¹Ö½×œ (And'
2025-09-27 21:49:31,487 - DEBUG -   âš ï¸ No TAGGING_ANALYSIS section found
2025-09-27 21:49:31,488 - DEBUG - ğŸ” JSON EXTRACTION DEBUG:
2025-09-27 21:49:31,490 - INFO -     ğŸ” JSON Array Extraction:
2025-09-27 21:49:31,491 - INFO -       ğŸ“„ Found JSON-like array: 7 chars
2025-09-27 21:49:31,492 - INFO -       ğŸ“„ Array content: '[Abram]'
2025-09-27 21:49:31,493 - INFO -       âš ï¸ Array doesn't contain objects - continuing search
2025-09-27 21:49:31,494 - INFO -       âš ï¸ No JSON OUTPUT section found
2025-09-27 21:49:31,495 - INFO -       ğŸ“„ Attempting sophisticated bracket matching from position 1390
2025-09-27 21:49:31,496 - INFO -       ğŸ“„ Bracket matching found: 7 chars
2025-09-27 21:49:31,497 - INFO -       âš ï¸ Bracket-matched array doesn't contain objects
2025-09-27 21:49:31,498 - WARNING -       âŒ No valid JSON array found - returning empty
2025-09-27 21:49:31,499 - DEBUG -   ğŸ“„ JSON string extracted: 2 chars
2025-09-27 21:49:31,499 - DEBUG -   ğŸ“„ JSON preview: '[]'
2025-09-27 21:49:31,500 - DEBUG -   ğŸ“„ COMPLETE JSON CONTENT:
2025-09-27 21:49:31,501 - DEBUG - ---JSON-START---
2025-09-27 21:49:31,501 - DEBUG - []
2025-09-27 21:49:31,501 - DEBUG - ---JSON-END---
2025-09-27 21:49:31,501 - INFO - ğŸ” FALLBACK CHECK - No instances found but have deliberation text
2025-09-27 21:49:31,502 - INFO -   ğŸ“ Has figurative indicators: True
2025-09-27 21:49:31,503 - INFO -   ğŸ“ Appears to end abruptly: True
2025-09-27 21:49:31,505 - INFO -   ğŸ“ Has substantial analysis: True
2025-09-27 21:49:31,506 - INFO -   ğŸ“ Has figurative analysis: True
2025-09-27 21:49:31,507 - INFO -   ğŸ“ Has figurative conclusions: True
2025-09-27 21:49:31,509 - INFO -   ğŸ“ Missing TAGGING_ANALYSIS: True
2025-09-27 21:49:31,510 - INFO -   ğŸ“ Analysis complete but JSON empty: True
2025-09-27 21:49:31,511 - INFO -   ğŸ“ Should trigger fallback: True
2025-09-27 21:49:31,512 - ERROR - âŒ API response was truncated. No JSON was found and fallback parsing is disabled.
2025-09-27 21:49:31,514 - ERROR - âŒ This verse must be re-processed. Returning no instances.
2025-09-27 21:49:31,515 - WARNING - Worker 1: Pro model also truncated for Genesis 14:20 - trying tertiary decomposition fallback
2025-09-27 21:49:31,515 - INFO - ğŸ¤– CLAUDE FALLBACK: Using Claude Sonnet 4 for complex verse analysis
2025-09-27 21:49:31,516 - INFO - Making request to Claude Sonnet 4 for figurative language analysis
2025-09-27 21:49:31,522 - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': Timeout(connect=5.0, read=600, write=600, pool=600), 'files': None, 'idempotency_key': 'stainless-python-retry-e9030575-9ac7-48e7-8265-da98e9c2877b', 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': 'You are an expert in biblical Hebrew linguistics and figurative language analysis. I need you to analyze a verse from Genesis 14 for figurative language using a CONSERVATIVE approach.\n\n**Hebrew Text:** ×•Ö¼×‘Ö¸×¨×•Ö¼×šÖ°Ö™ ×ÖµÖ£×œ ×¢Ö¶×œÖ°×™Ö”×•Ö¹×Ÿ ×Ö²×©×Ö¶×¨Ö¾×Ö´×’Ö¼ÖµÖ¥×Ÿ ×¦Ö¸×¨Ö¶Ö–×™×šÖ¸ ×‘Ö¼Ö°×™Ö¸×“Ö¶Ö‘×šÖ¸ ×•Ö·×™Ö¼Ö´×ªÖ¼Ö¶×ŸÖ¾×œÖ¥×•Ö¹ ×Ö·×¢Ö²×©×‚ÖµÖ–×¨ ×Ö´×›Ö¼Ö¹Ö½×œ\n**English Translation:** And blessed be God Most High,Who has delivered your foes into your hand.â€ And [Abram] gave him a tenth of everything.\n\n**TASK:** Identify ALL instances of figurative language in this verse using these guidelines:\n\n**CONSERVATIVE DETECTION GUIDELINES:**\n1. **MARK** physical verbs/concepts applied to spiritual/abstract concepts\n2. **MARK** clear metaphors, similes, personification, idioms, hyperbole, metonymy\n3. **BE CONSERVATIVE** with divine anthropomorphisms (only mark if clearly figurative beyond standard narrative language)\n4. **EXCLUDE** proper names, standard titles, conventional expressions unless clearly figurative\n5. **FOCUS** on Hebrew text primarily, use English for clarification\n\n**OUTPUT FORMAT:**\nFirst provide your **DETECTION DELIBERATION** - explain what you considered and why you included/excluded each potential figurative element.\n\nThen provide **HIERARCHICAL TAGGING ANALYSIS** for any instances you found.\n\nFinally, provide a **JSON array** with this structure for each instance:\n```json\n[\n  {\n    "instance_id": 1,\n    "figurative_language": "yes",\n    "simile": "yes/no",\n    "metaphor": "yes/no",\n    "personification": "yes/no",\n    "idiom": "yes/no",\n    "hyperbole": "yes/no",\n    "metonymy": "yes/no",\n    "other": "yes/no",\n    "confidence": 0.8,\n    "english_text": "the relevant English phrase",\n    "hebrew_text": "the relevant Hebrew phrase",\n    "explanation": "detailed explanation of the figurative language",\n    "speaker": "who is speaking",\n    "purpose": "why this figurative language is used",\n    "target": ["specific target", "target category", "general domain"],\n    "vehicle": ["specific vehicle", "vehicle category", "general domain"],\n    "ground": ["specific quality", "quality category", "general domain"],\n    "posture": ["specific attitude", "attitude category", "general domain"]\n  }\n]\n```\n\n**If NO figurative language is found, return an empty array: []**\n\nBegin your analysis:'}], 'model': 'claude-sonnet-4@20250514'}}
2025-09-27 21:49:31,581 - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-09-27 21:49:31,581 - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-27 21:49:31,601 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000026E6E665400>
2025-09-27 21:49:31,601 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000026E6E5BCA70> server_hostname='api.anthropic.com' timeout=5.0
2025-09-27 21:49:31,610 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000026E6E51FC50>
2025-09-27 21:49:31,610 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-27 21:49:31,611 - DEBUG - send_request_headers.complete
2025-09-27 21:49:31,611 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-27 21:49:31,611 - DEBUG - send_request_body.complete
2025-09-27 21:49:31,611 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-27 21:49:31,841 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Date', b'Sun, 28 Sep 2025 01:49:31 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'x-should-retry', b'false'), (b'request-id', b'req_011CTZxZaM777GE18sEA3Fzh'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'224d8e00-c63e-4f31-b7f9-b80cca99cc00'), (b'x-envoy-upstream-service-time', b'181'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'985f95b01c9f8fab-BOS')])
2025-09-27 21:49:31,842 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 404 Not Found"
2025-09-27 21:49:31,843 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-27 21:49:31,843 - DEBUG - receive_response_body.complete
2025-09-27 21:49:31,843 - DEBUG - response_closed.started
2025-09-27 21:49:31,843 - DEBUG - response_closed.complete
2025-09-27 21:49:31,844 - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "404 Not Found" Headers({'date': 'Sun, 28 Sep 2025 01:49:31 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'x-should-retry': 'false', 'request-id': 'req_011CTZxZaM777GE18sEA3Fzh', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '224d8e00-c63e-4f31-b7f9-b80cca99cc00', 'x-envoy-upstream-service-time': '181', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '985f95b01c9f8fab-BOS'})
2025-09-27 21:49:31,844 - DEBUG - request_id: req_011CTZxZaM777GE18sEA3Fzh
2025-09-27 21:49:31,844 - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "C:\Users\ariro\AppData\Roaming\Python\Python313\site-packages\anthropic\_base_client.py", line 1092, in request
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\ariro\AppData\Roaming\Python\Python313\site-packages\httpx\_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '404 Not Found' for url 'https://api.anthropic.com/v1/messages'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2025-09-27 21:49:31,846 - DEBUG - Not retrying as header `x-should-retry` is set to `false`
2025-09-27 21:49:31,846 - DEBUG - Re-raising status error
2025-09-27 21:49:31,847 - ERROR - Claude Sonnet API error: Error code: 404 - {'type': 'error', 'error': {'type': 'not_found_error', 'message': 'model: claude-sonnet-4@20250514'}, 'request_id': 'req_011CTZxZaM777GE18sEA3Fzh'}
2025-09-27 21:49:31,847 - ERROR - ğŸ¤– CLAUDE FALLBACK: Failed - Claude Sonnet API error: Error code: 404 - {'type': 'error', 'error': {'type': 'not_found_error', 'message': 'model: claude-sonnet-4@20250514'}, 'request_id': 'req_011CTZxZaM777GE18sEA3Fzh'}
2025-09-27 21:49:31,849 - INFO - Worker 1: Claude fallback completed for Genesis 14:20 - Success: False, Instances: 0
2025-09-27 21:49:31,849 - INFO - Worker 1: Completed Genesis 14:20 - 0 instances
2025-09-27 21:49:31,862 - INFO - Completed Genesis 14:20: Truncation=yes, BothTruncated=yes, Model=claude-sonnet-4, Instances=0
2025-09-27 21:49:31,866 - INFO - --- PROCESSING: Genesis 35 ---
2025-09-27 21:49:31,867 - DEBUG - Starting new HTTPS connection (1): www.sefaria.org:443
2025-09-27 21:49:32,208 - DEBUG - https://www.sefaria.org:443 "GET /api/texts/Genesis.35 HTTP/1.1" 200 None
2025-09-27 21:49:32,259 - INFO - Processing 1 problematic verses from Genesis 35
2025-09-27 21:49:32,260 - INFO - Worker 1: Processing Genesis 35:13
2025-09-27 21:49:41,516 - DEBUG - ğŸ” API Response Debug Info:
2025-09-27 21:49:41,518 - DEBUG -   ğŸ“Š Total candidates: 1
2025-09-27 21:49:41,520 - DEBUG -   ğŸ Finish reason: 1
2025-09-27 21:49:41,521 - DEBUG -   ğŸ“ Finish reason type: <enum 'FinishReason'>
2025-09-27 21:49:41,522 - DEBUG -   ğŸ“ Finish reason str: '1'
2025-09-27 21:49:41,524 - DEBUG -   ğŸª™ Usage Metadata:
2025-09-27 21:49:41,525 - DEBUG -     - Prompt Token Count: 1306
2025-09-27 21:49:41,525 - DEBUG -     - Candidates Token Count: 499
2025-09-27 21:49:41,525 - DEBUG -     - Total Token Count: 2797
2025-09-27 21:49:41,525 - DEBUG -   ğŸ›¡ï¸ Safety ratings: None
2025-09-27 21:49:41,527 - DEBUG -   ğŸ“„ Has content: True
2025-09-27 21:49:41,528 - DEBUG -   ğŸ“„ Content parts count: 1
2025-09-27 21:49:41,529 - DEBUG -   ğŸ“ Response text length: 2071 characters
2025-09-27 21:49:41,531 - DEBUG -   ğŸ“ Response ends with: 'ry potential figurative element in this verse.

[]'
2025-09-27 21:49:41,532 - DEBUG - ğŸ” PARSING DEBUG - Starting response parsing:
2025-09-27 21:49:41,533 - DEBUG -   ğŸ“ Total response length: 2071
2025-09-27 21:49:41,534 - DEBUG -   ğŸ“„ Response preview (first 200 chars): 'FIGURATIVE_DETECTION:
I considered two main phrases for potential figurative language:

1.  **"×•Ö·×™Ö¼Ö·Ö¥×¢Ö·×œ ×Öµ×¢Ö¸×œÖ¸Ö–×™×• ×Ö±×œÖ¹×”Ö´Ö‘×™×" (God parted from him / God went up from him):**
    *   **What I considere'
2025-09-27 21:49:41,534 - DEBUG -   ğŸ“„ Response ending (last 200 chars): 'iteral act of communication.

**Borderline cases:** None. The instructions regarding anthropomorphisms are quite clear and directly apply to the primary potential figurative element in this verse.

[]'
2025-09-27 21:49:41,535 - DEBUG -   ğŸ“ FIGURATIVE_DETECTION extracted: 1326 chars
2025-09-27 21:49:41,536 - DEBUG -   ğŸ“ Detection ends with: 'eral description of a divine event within the ANE worldview.

2.  **"×Ö²×©×Ö¶×¨Ö¾×“Ö¼Ö´×‘Ö¼Ö¶Ö¥×¨ ×Ö´×ªÖ¼Ö½×•Ö¹" (where'
2025-09-27 21:49:41,537 - DEBUG -   âš ï¸ No TAGGING_ANALYSIS section found
2025-09-27 21:49:41,537 - DEBUG - ğŸ” JSON EXTRACTION DEBUG:
2025-09-27 21:49:41,538 - INFO -     ğŸ” JSON Array Extraction:
2025-09-27 21:49:41,538 - INFO -       ğŸ“„ Found JSON-like array: 5 chars
2025-09-27 21:49:41,539 - INFO -       ğŸ“„ Array content: '[God]'
2025-09-27 21:49:41,540 - INFO -       âš ï¸ Array doesn't contain objects - continuing search
2025-09-27 21:49:41,540 - INFO -       âš ï¸ No JSON OUTPUT section found
2025-09-27 21:49:41,541 - INFO -       ğŸ“„ Attempting sophisticated bracket matching from position 1349
2025-09-27 21:49:41,542 - INFO -       ğŸ“„ Bracket matching found: 5 chars
2025-09-27 21:49:41,543 - INFO -       âš ï¸ Bracket-matched array doesn't contain objects
2025-09-27 21:49:41,543 - INFO -       ğŸ“„ Empty array pattern detected
2025-09-27 21:49:41,544 - DEBUG -   ğŸ“„ JSON string extracted: 2 chars
2025-09-27 21:49:41,545 - DEBUG -   ğŸ“„ JSON preview: '[]'
2025-09-27 21:49:41,546 - DEBUG -   ğŸ“„ COMPLETE JSON CONTENT:
2025-09-27 21:49:41,548 - DEBUG - ---JSON-START---
2025-09-27 21:49:41,548 - DEBUG - []
2025-09-27 21:49:41,548 - DEBUG - ---JSON-END---
2025-09-27 21:49:41,548 - INFO - ğŸ” FALLBACK CHECK - No instances found but have deliberation text
2025-09-27 21:49:41,549 - INFO -   ğŸ“ Has figurative indicators: True
2025-09-27 21:49:41,551 - INFO -   ğŸ“ Appears to end abruptly: True
2025-09-27 21:49:41,552 - INFO -   ğŸ“ Has substantial analysis: True
2025-09-27 21:49:41,553 - INFO -   ğŸ“ Has figurative analysis: True
2025-09-27 21:49:41,555 - INFO -   ğŸ“ Has figurative conclusions: False
2025-09-27 21:49:41,556 - INFO -   ğŸ“ Missing TAGGING_ANALYSIS: False
2025-09-27 21:49:41,557 - INFO -   ğŸ“ Analysis complete but JSON empty: False
2025-09-27 21:49:41,558 - INFO -   ğŸ“ Should trigger fallback: True
2025-09-27 21:49:41,559 - ERROR - âŒ API response was truncated. No JSON was found and fallback parsing is disabled.
2025-09-27 21:49:41,560 - ERROR - âŒ This verse must be re-processed. Returning no instances.
2025-09-27 21:49:41,561 - WARNING - Worker 1: Truncation detected in Genesis 35:13, retrying with Pro model
2025-09-27 21:49:41,561 - INFO - Using model override: gemini-2.5-pro
2025-09-27 21:50:01,244 - DEBUG - ğŸ” API Response Debug Info:
2025-09-27 21:50:01,246 - DEBUG -   ğŸ“Š Total candidates: 1
2025-09-27 21:50:01,248 - DEBUG -   ğŸ Finish reason: 1
2025-09-27 21:50:01,249 - DEBUG -   ğŸ“ Finish reason type: <enum 'FinishReason'>
2025-09-27 21:50:01,250 - DEBUG -   ğŸ“ Finish reason str: '1'
2025-09-27 21:50:01,251 - DEBUG -   ğŸª™ Usage Metadata:
2025-09-27 21:50:01,253 - DEBUG -     - Prompt Token Count: 1306
2025-09-27 21:50:01,253 - DEBUG -     - Candidates Token Count: 342
2025-09-27 21:50:01,253 - DEBUG -     - Total Token Count: 3536
2025-09-27 21:50:01,253 - DEBUG -   ğŸ›¡ï¸ Safety ratings: None
2025-09-27 21:50:01,254 - DEBUG -   ğŸ“„ Has content: True
2025-09-27 21:50:01,255 - DEBUG -   ğŸ“„ Content parts count: 1
2025-09-27 21:50:01,257 - DEBUG -   ğŸ“ Response text length: 1530 characters
2025-09-27 21:50:01,258 - DEBUG -   ğŸ“ Response ends with: 'd as literal within the narrative's framework.

[]'
2025-09-27 21:50:01,260 - DEBUG - ğŸ” PARSING DEBUG - Starting response parsing:
2025-09-27 21:50:01,261 - DEBUG -   ğŸ“ Total response length: 1530
2025-09-27 21:50:01,262 - DEBUG -   ğŸ“„ Response preview (first 200 chars): 'FIGURATIVE_DETECTION:
*   **Phrase 1: ×•Ö·×™Ö¼Ö·Ö¥×¢Ö·×œ ... ×Ö±×œÖ¹×”Ö´Ö‘×™× (God went up)**
    *   **Considered:** I examined this phrase to determine if it was a metaphor for the withdrawal of divine presence or '
2025-09-27 21:50:01,263 - DEBUG -   ğŸ“„ Response ending (last 200 chars): 's figurative.

Based on the provided conservative rules, no figurative language is present in this verse. The descriptions of God's actions are treated as literal within the narrative's framework.

[]'
2025-09-27 21:50:01,265 - DEBUG -   ğŸ“ FIGURATIVE_DETECTION extracted: 836 chars
2025-09-27 21:50:01,266 - DEBUG -   ğŸ“ Detection ends with: ' in the rules. Therefore, it is excluded as figurative language.

*   **Phrase 2: ×“Ö¼Ö´×‘Ö¼Ö¶Ö¥×¨ ×Ö´×ªÖ¼Ö½×•Ö¹ ('
2025-09-27 21:50:01,267 - DEBUG -   âš ï¸ No TAGGING_ANALYSIS section found
2025-09-27 21:50:01,268 - DEBUG - ğŸ” JSON EXTRACTION DEBUG:
2025-09-27 21:50:01,270 - INFO -     ğŸ” JSON Array Extraction:
2025-09-27 21:50:01,271 - INFO -       ğŸ“„ Found JSON-like array: 5 chars
2025-09-27 21:50:01,272 - INFO -       ğŸ“„ Array content: '[God]'
2025-09-27 21:50:01,274 - INFO -       âš ï¸ Array doesn't contain objects - continuing search
2025-09-27 21:50:01,275 - INFO -       âš ï¸ No JSON OUTPUT section found
2025-09-27 21:50:01,277 - INFO -       ğŸ“„ Attempting sophisticated bracket matching from position 858
2025-09-27 21:50:01,279 - INFO -       ğŸ“„ Bracket matching found: 5 chars
2025-09-27 21:50:01,281 - INFO -       âš ï¸ Bracket-matched array doesn't contain objects
2025-09-27 21:50:01,283 - INFO -       ğŸ“„ Empty array pattern detected
2025-09-27 21:50:01,284 - DEBUG -   ğŸ“„ JSON string extracted: 2 chars
2025-09-27 21:50:01,285 - DEBUG -   ğŸ“„ JSON preview: '[]'
2025-09-27 21:50:01,286 - DEBUG -   ğŸ“„ COMPLETE JSON CONTENT:
2025-09-27 21:50:01,287 - DEBUG - ---JSON-START---
2025-09-27 21:50:01,287 - DEBUG - []
2025-09-27 21:50:01,288 - DEBUG - ---JSON-END---
2025-09-27 21:50:01,288 - INFO - ğŸ” FALLBACK CHECK - No instances found but have deliberation text
2025-09-27 21:50:01,288 - INFO -   ğŸ“ Has figurative indicators: True
2025-09-27 21:50:01,289 - INFO -   ğŸ“ Appears to end abruptly: True
2025-09-27 21:50:01,290 - INFO -   ğŸ“ Has substantial analysis: True
2025-09-27 21:50:01,291 - INFO -   ğŸ“ Has figurative analysis: True
2025-09-27 21:50:01,291 - INFO -   ğŸ“ Has figurative conclusions: False
2025-09-27 21:50:01,292 - INFO -   ğŸ“ Missing TAGGING_ANALYSIS: False
2025-09-27 21:50:01,294 - INFO -   ğŸ“ Analysis complete but JSON empty: False
2025-09-27 21:50:01,295 - INFO -   ğŸ“ Should trigger fallback: True
2025-09-27 21:50:01,296 - ERROR - âŒ API response was truncated. No JSON was found and fallback parsing is disabled.
2025-09-27 21:50:01,298 - ERROR - âŒ This verse must be re-processed. Returning no instances.
2025-09-27 21:50:01,299 - WARNING - Worker 1: Pro model also truncated for Genesis 35:13 - trying tertiary decomposition fallback
2025-09-27 21:50:01,299 - INFO - ğŸ¤– CLAUDE FALLBACK: Using Claude Sonnet 4 for complex verse analysis
2025-09-27 21:50:01,300 - INFO - Making request to Claude Sonnet 4 for figurative language analysis
2025-09-27 21:50:01,301 - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': Timeout(connect=5.0, read=600, write=600, pool=600), 'files': None, 'idempotency_key': 'stainless-python-retry-9349dc53-df46-4e90-8641-8e3669ed65f7', 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': 'You are an expert in biblical Hebrew linguistics and figurative language analysis. I need you to analyze a verse from Genesis 35 for figurative language using a CONSERVATIVE approach.\n\n**Hebrew Text:** ×•Ö·×™Ö¼Ö·Ö¥×¢Ö·×œ ×Öµ×¢Ö¸×œÖ¸Ö–×™×• ×Ö±×œÖ¹×”Ö´Ö‘×™× ×‘Ö¼Ö·×Ö¼Ö¸×§Ö–×•Ö¹× ×Ö²×©×Ö¶×¨Ö¾×“Ö¼Ö´×‘Ö¼Ö¶Ö¥×¨ ×Ö´×ªÖ¼Ö½×•Ö¹\n**English Translation:** God parted from him at the spot where [God] had spoken to him;\n\n**TASK:** Identify ALL instances of figurative language in this verse using these guidelines:\n\n**CONSERVATIVE DETECTION GUIDELINES:**\n1. **MARK** physical verbs/concepts applied to spiritual/abstract concepts\n2. **MARK** clear metaphors, similes, personification, idioms, hyperbole, metonymy\n3. **BE CONSERVATIVE** with divine anthropomorphisms (only mark if clearly figurative beyond standard narrative language)\n4. **EXCLUDE** proper names, standard titles, conventional expressions unless clearly figurative\n5. **FOCUS** on Hebrew text primarily, use English for clarification\n\n**OUTPUT FORMAT:**\nFirst provide your **DETECTION DELIBERATION** - explain what you considered and why you included/excluded each potential figurative element.\n\nThen provide **HIERARCHICAL TAGGING ANALYSIS** for any instances you found.\n\nFinally, provide a **JSON array** with this structure for each instance:\n```json\n[\n  {\n    "instance_id": 1,\n    "figurative_language": "yes",\n    "simile": "yes/no",\n    "metaphor": "yes/no",\n    "personification": "yes/no",\n    "idiom": "yes/no",\n    "hyperbole": "yes/no",\n    "metonymy": "yes/no",\n    "other": "yes/no",\n    "confidence": 0.8,\n    "english_text": "the relevant English phrase",\n    "hebrew_text": "the relevant Hebrew phrase",\n    "explanation": "detailed explanation of the figurative language",\n    "speaker": "who is speaking",\n    "purpose": "why this figurative language is used",\n    "target": ["specific target", "target category", "general domain"],\n    "vehicle": ["specific vehicle", "vehicle category", "general domain"],\n    "ground": ["specific quality", "quality category", "general domain"],\n    "posture": ["specific attitude", "attitude category", "general domain"]\n  }\n]\n```\n\n**If NO figurative language is found, return an empty array: []**\n\nBegin your analysis:'}], 'model': 'claude-sonnet-4@20250514'}}
2025-09-27 21:50:01,302 - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-09-27 21:50:01,303 - DEBUG - close.started
2025-09-27 21:50:01,303 - DEBUG - close.complete
2025-09-27 21:50:01,303 - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-27 21:50:01,326 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000026E6EB74F50>
2025-09-27 21:50:01,327 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000026E6E5BCA70> server_hostname='api.anthropic.com' timeout=5.0
2025-09-27 21:50:01,337 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000026E6E58FBB0>
2025-09-27 21:50:01,337 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-27 21:50:01,337 - DEBUG - send_request_headers.complete
2025-09-27 21:50:01,338 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-27 21:50:01,338 - DEBUG - send_request_body.complete
2025-09-27 21:50:01,338 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-27 21:50:01,409 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Date', b'Sun, 28 Sep 2025 01:50:01 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'x-should-retry', b'false'), (b'request-id', b'req_011CTZxbmTQAvuHcosnhZSV1'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'224d8e00-c63e-4f31-b7f9-b80cca99cc00'), (b'x-envoy-upstream-service-time', b'20'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'985f9669de2e901d-BOS')])
2025-09-27 21:50:01,409 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 404 Not Found"
2025-09-27 21:50:01,409 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-27 21:50:01,410 - DEBUG - receive_response_body.complete
2025-09-27 21:50:01,410 - DEBUG - response_closed.started
2025-09-27 21:50:01,410 - DEBUG - response_closed.complete
2025-09-27 21:50:01,410 - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "404 Not Found" Headers({'date': 'Sun, 28 Sep 2025 01:50:01 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'x-should-retry': 'false', 'request-id': 'req_011CTZxbmTQAvuHcosnhZSV1', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '224d8e00-c63e-4f31-b7f9-b80cca99cc00', 'x-envoy-upstream-service-time': '20', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '985f9669de2e901d-BOS'})
2025-09-27 21:50:01,410 - DEBUG - request_id: req_011CTZxbmTQAvuHcosnhZSV1
2025-09-27 21:50:01,410 - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "C:\Users\ariro\AppData\Roaming\Python\Python313\site-packages\anthropic\_base_client.py", line 1092, in request
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\ariro\AppData\Roaming\Python\Python313\site-packages\httpx\_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '404 Not Found' for url 'https://api.anthropic.com/v1/messages'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2025-09-27 21:50:01,412 - DEBUG - Not retrying as header `x-should-retry` is set to `false`
2025-09-27 21:50:01,412 - DEBUG - Re-raising status error
2025-09-27 21:50:01,412 - ERROR - Claude Sonnet API error: Error code: 404 - {'type': 'error', 'error': {'type': 'not_found_error', 'message': 'model: claude-sonnet-4@20250514'}, 'request_id': 'req_011CTZxbmTQAvuHcosnhZSV1'}
2025-09-27 21:50:01,412 - ERROR - ğŸ¤– CLAUDE FALLBACK: Failed - Claude Sonnet API error: Error code: 404 - {'type': 'error', 'error': {'type': 'not_found_error', 'message': 'model: claude-sonnet-4@20250514'}, 'request_id': 'req_011CTZxbmTQAvuHcosnhZSV1'}
2025-09-27 21:50:01,413 - INFO - Worker 1: Claude fallback completed for Genesis 35:13 - Success: False, Instances: 0
2025-09-27 21:50:01,414 - INFO - Worker 1: Completed Genesis 35:13 - 0 instances
2025-09-27 21:50:01,427 - INFO - Completed Genesis 35:13: Truncation=yes, BothTruncated=yes, Model=claude-sonnet-4, Instances=0
2025-09-27 21:50:01,431 - INFO - --- PROCESSING: Genesis 2 ---
2025-09-27 21:50:01,432 - DEBUG - Starting new HTTPS connection (1): www.sefaria.org:443
2025-09-27 21:50:01,766 - DEBUG - https://www.sefaria.org:443 "GET /api/texts/Genesis.2 HTTP/1.1" 200 None
2025-09-27 21:50:01,816 - INFO - Processing 1 problematic verses from Genesis 2
2025-09-27 21:50:01,817 - INFO - Worker 1: Processing Genesis 2:17
2025-09-27 21:50:12,430 - DEBUG - ğŸ” API Response Debug Info:
2025-09-27 21:50:12,432 - DEBUG -   ğŸ“Š Total candidates: 1
2025-09-27 21:50:12,433 - DEBUG -   ğŸ Finish reason: 1
2025-09-27 21:50:12,435 - DEBUG -   ğŸ“ Finish reason type: <enum 'FinishReason'>
2025-09-27 21:50:12,436 - DEBUG -   ğŸ“ Finish reason str: '1'
2025-09-27 21:50:12,437 - DEBUG -   ğŸª™ Usage Metadata:
2025-09-27 21:50:12,438 - DEBUG -     - Prompt Token Count: 1199
2025-09-27 21:50:12,438 - DEBUG -     - Candidates Token Count: 578
2025-09-27 21:50:12,438 - DEBUG -     - Total Token Count: 3166
2025-09-27 21:50:12,438 - DEBUG -   ğŸ›¡ï¸ Safety ratings: None
2025-09-27 21:50:12,439 - DEBUG -   ğŸ“„ Has content: True
2025-09-27 21:50:12,440 - DEBUG -   ğŸ“„ Content parts count: 1
2025-09-27 21:50:12,441 - DEBUG -   ğŸ“ Response text length: 2493 characters
2025-09-27 21:50:12,442 - DEBUG -   ğŸ“ Response ends with: 'y clear" and "obvious cross-domain metaphors."

[]'
2025-09-27 21:50:12,442 - DEBUG - ğŸ” PARSING DEBUG - Starting response parsing:
2025-09-27 21:50:12,443 - DEBUG -   ğŸ“ Total response length: 2493
2025-09-27 21:50:12,444 - DEBUG -   ğŸ“„ Response preview (first 200 chars): 'FIGURATIVE_DETECTION:
- **"the tree of knowledge of good and bad" (×¢Öµ×¥ ×”Ö·×“Ö¼Ö·×¢Ö·×ª ×˜×•Ö¹×‘ ×•Ö¸×¨Ö¸×¢)**:
    - **What I considered**: I considered if "tree of knowledge" or "knowledge of good and bad" might be '
2025-09-27 21:50:12,444 - DEBUG -   ğŸ“„ Response ending (last 200 chars): 'vative guidelines and the explicit prohibitions against marking certain categories as figurative, I find no elements in this verse that are "absolutely clear" and "obvious cross-domain metaphors."

[]'
2025-09-27 21:50:12,445 - DEBUG -   ğŸ“ FIGURATIVE_DETECTION extracted: 2467 chars
2025-09-27 21:50:12,446 - DEBUG -   ğŸ“ Detection ends with: ', I find no elements in this verse that are "absolutely clear" and "obvious cross-domain metaphors."'
2025-09-27 21:50:12,446 - DEBUG -   âš ï¸ No TAGGING_ANALYSIS section found
2025-09-27 21:50:12,447 - DEBUG - ğŸ” JSON EXTRACTION DEBUG:
2025-09-27 21:50:12,447 - INFO -     ğŸ” JSON Array Extraction:
2025-09-27 21:50:12,448 - INFO -       ğŸ“„ Found JSON-like array: 2 chars
2025-09-27 21:50:12,449 - INFO -       ğŸ“„ Array content: '[]'
2025-09-27 21:50:12,449 - INFO -       âš ï¸ Array doesn't contain objects - continuing search
2025-09-27 21:50:12,450 - INFO -       âš ï¸ No JSON OUTPUT section found
2025-09-27 21:50:12,451 - INFO -       ğŸ“„ Attempting sophisticated bracket matching from position 2491
2025-09-27 21:50:12,451 - INFO -       ğŸ“„ Bracket matching found: 2 chars
2025-09-27 21:50:12,452 - INFO -       âš ï¸ Bracket-matched array doesn't contain objects
2025-09-27 21:50:12,453 - INFO -       ğŸ“„ Empty array pattern detected
2025-09-27 21:50:12,453 - DEBUG -   ğŸ“„ JSON string extracted: 2 chars
2025-09-27 21:50:12,454 - DEBUG -   ğŸ“„ JSON preview: '[]'
2025-09-27 21:50:12,454 - DEBUG -   ğŸ“„ COMPLETE JSON CONTENT:
2025-09-27 21:50:12,455 - DEBUG - ---JSON-START---
2025-09-27 21:50:12,455 - DEBUG - []
2025-09-27 21:50:12,455 - DEBUG - ---JSON-END---
2025-09-27 21:50:12,455 - INFO - ğŸ” FALLBACK CHECK - No instances found but have deliberation text
2025-09-27 21:50:12,456 - INFO -   ğŸ“ Has figurative indicators: True
2025-09-27 21:50:12,456 - INFO -   ğŸ“ Appears to end abruptly: True
2025-09-27 21:50:12,457 - INFO -   ğŸ“ Has substantial analysis: True
2025-09-27 21:50:12,458 - INFO -   ğŸ“ Has figurative analysis: True
2025-09-27 21:50:12,458 - INFO -   ğŸ“ Has figurative conclusions: False
2025-09-27 21:50:12,459 - INFO -   ğŸ“ Missing TAGGING_ANALYSIS: False
2025-09-27 21:50:12,460 - INFO -   ğŸ“ Analysis complete but JSON empty: False
2025-09-27 21:50:12,460 - INFO -   ğŸ“ Should trigger fallback: True
2025-09-27 21:50:12,461 - ERROR - âŒ API response was truncated. No JSON was found and fallback parsing is disabled.
2025-09-27 21:50:12,461 - ERROR - âŒ This verse must be re-processed. Returning no instances.
2025-09-27 21:50:12,462 - WARNING - Worker 1: Truncation detected in Genesis 2:17, retrying with Pro model
2025-09-27 21:50:12,462 - INFO - Using model override: gemini-2.5-pro
2025-09-27 21:50:36,012 - DEBUG - ğŸ” API Response Debug Info:
2025-09-27 21:50:36,014 - DEBUG -   ğŸ“Š Total candidates: 1
2025-09-27 21:50:36,015 - DEBUG -   ğŸ Finish reason: 1
2025-09-27 21:50:36,016 - DEBUG -   ğŸ“ Finish reason type: <enum 'FinishReason'>
2025-09-27 21:50:36,017 - DEBUG -   ğŸ“ Finish reason str: '1'
2025-09-27 21:50:36,017 - DEBUG -   ğŸª™ Usage Metadata:
2025-09-27 21:50:36,018 - DEBUG -     - Prompt Token Count: 1199
2025-09-27 21:50:36,018 - DEBUG -     - Candidates Token Count: 618
2025-09-27 21:50:36,018 - DEBUG -     - Total Token Count: 3803
2025-09-27 21:50:36,018 - DEBUG -   ğŸ›¡ï¸ Safety ratings: None
2025-09-27 21:50:36,019 - DEBUG -   ğŸ“„ Has content: True
2025-09-27 21:50:36,020 - DEBUG -   ğŸ“„ Content parts count: 1
2025-09-27 21:50:36,022 - DEBUG -   ğŸ“ Response text length: 2533 characters
2025-09-27 21:50:36,023 - DEBUG -   ğŸ“ Response ends with: 'eted as direct, legal, and procedural warning.

[]'
2025-09-27 21:50:36,024 - DEBUG - ğŸ” PARSING DEBUG - Starting response parsing:
2025-09-27 21:50:36,026 - DEBUG -   ğŸ“ Total response length: 2533
2025-09-27 21:50:36,027 - DEBUG -   ğŸ“„ Response preview (first 200 chars): '**FIGURATIVE_DETECTION:**
1.  **×•Ö¼×Öµ×¢ÖµÖ—×¥ ×”Ö·×“Ö¼Ö·Ö™×¢Ö·×ªÖ™ ×˜Ö£×•Ö¹×‘ ×•Ö¸×¨Ö¸Ö”×¢ (as for the tree of knowledge of good and bad):** I considered if the name of the tree is a metaphor or metonymy, where the tree stands'
2025-09-27 21:50:36,028 - DEBUG -   ğŸ“„ Response ending (last 200 chars): 'ding of the creation narrative, I have found no language in this verse that qualifies as "absolutely clear" figurative speech. The phrasing is interpreted as direct, legal, and procedural warning.

[]'
2025-09-27 21:50:36,030 - DEBUG -   ğŸ“ FIGURATIVE_DETECTION extracted: 2506 chars
2025-09-27 21:50:36,031 - DEBUG -   ğŸ“ Detection ends with: 'tely clear" figurative speech. The phrasing is interpreted as direct, legal, and procedural warning.'
2025-09-27 21:50:36,032 - DEBUG -   âš ï¸ No TAGGING_ANALYSIS section found
2025-09-27 21:50:36,034 - DEBUG - ğŸ” JSON EXTRACTION DEBUG:
2025-09-27 21:50:36,035 - INFO -     ğŸ” JSON Array Extraction:
2025-09-27 21:50:36,036 - INFO -       ğŸ“„ Found JSON-like array: 2 chars
2025-09-27 21:50:36,037 - INFO -       ğŸ“„ Array content: '[]'
2025-09-27 21:50:36,038 - INFO -       âš ï¸ Array doesn't contain objects - continuing search
2025-09-27 21:50:36,038 - INFO -       âš ï¸ No JSON OUTPUT section found
2025-09-27 21:50:36,039 - INFO -       ğŸ“„ Attempting sophisticated bracket matching from position 2531
2025-09-27 21:50:36,040 - INFO -       ğŸ“„ Bracket matching found: 2 chars
2025-09-27 21:50:36,040 - INFO -       âš ï¸ Bracket-matched array doesn't contain objects
2025-09-27 21:50:36,041 - INFO -       ğŸ“„ Empty array pattern detected
2025-09-27 21:50:36,042 - DEBUG -   ğŸ“„ JSON string extracted: 2 chars
2025-09-27 21:50:36,042 - DEBUG -   ğŸ“„ JSON preview: '[]'
2025-09-27 21:50:36,043 - DEBUG -   ğŸ“„ COMPLETE JSON CONTENT:
2025-09-27 21:50:36,043 - DEBUG - ---JSON-START---
2025-09-27 21:50:36,043 - DEBUG - []
2025-09-27 21:50:36,044 - DEBUG - ---JSON-END---
2025-09-27 21:50:36,044 - INFO - ğŸ” FALLBACK CHECK - No instances found but have deliberation text
2025-09-27 21:50:36,044 - INFO -   ğŸ“ Has figurative indicators: True
2025-09-27 21:50:36,045 - INFO -   ğŸ“ Appears to end abruptly: False
2025-09-27 21:50:36,045 - INFO -   ğŸ“ Has substantial analysis: True
2025-09-27 21:50:36,046 - INFO -   ğŸ“ Has figurative analysis: True
2025-09-27 21:50:36,047 - INFO -   ğŸ“ Has figurative conclusions: False
2025-09-27 21:50:36,047 - INFO -   ğŸ“ Missing TAGGING_ANALYSIS: False
2025-09-27 21:50:36,048 - INFO -   ğŸ“ Analysis complete but JSON empty: False
2025-09-27 21:50:36,049 - INFO -   ğŸ“ Should trigger fallback: False
2025-09-27 21:50:36,051 - INFO -   ğŸ“ Truncation criteria not met - no fallback parsing attempted
2025-09-27 21:50:36,052 - INFO - Worker 1: Completed Genesis 2:17 - 0 instances
2025-09-27 21:50:36,055 - INFO - Completed Genesis 2:17: Truncation=yes, BothTruncated=no, Model=gemini-2.5-pro, Instances=0
2025-09-27 21:50:36,059 - INFO - --- PROCESSING: Genesis 17 ---
2025-09-27 21:50:36,060 - DEBUG - Starting new HTTPS connection (1): www.sefaria.org:443
2025-09-27 21:50:36,370 - DEBUG - https://www.sefaria.org:443 "GET /api/texts/Genesis.17 HTTP/1.1" 200 None
2025-09-27 21:50:36,419 - INFO - Processing 1 problematic verses from Genesis 17
2025-09-27 21:50:36,419 - INFO - Worker 1: Processing Genesis 17:8
2025-09-27 21:50:49,902 - DEBUG - ğŸ” API Response Debug Info:
2025-09-27 21:50:49,904 - DEBUG -   ğŸ“Š Total candidates: 1
2025-09-27 21:50:49,906 - DEBUG -   ğŸ Finish reason: 1
2025-09-27 21:50:49,907 - DEBUG -   ğŸ“ Finish reason type: <enum 'FinishReason'>
2025-09-27 21:50:49,908 - DEBUG -   ğŸ“ Finish reason str: '1'
2025-09-27 21:50:49,910 - DEBUG -   ğŸª™ Usage Metadata:
2025-09-27 21:50:49,911 - DEBUG -     - Prompt Token Count: 1399
2025-09-27 21:50:49,911 - DEBUG -     - Candidates Token Count: 625
2025-09-27 21:50:49,911 - DEBUG -     - Total Token Count: 3728
2025-09-27 21:50:49,911 - DEBUG -   ğŸ›¡ï¸ Safety ratings: None
2025-09-27 21:50:49,912 - DEBUG -   ğŸ“„ Has content: True
2025-09-27 21:50:49,914 - DEBUG -   ğŸ“„ Content parts count: 1
2025-09-27 21:50:49,915 - DEBUG -   ğŸ“ Response text length: 2368 characters
2025-09-27 21:50:49,916 - DEBUG -   ğŸ“ Response ends with: 'eclarative, establishing a covenantal promise.

[]'
2025-09-27 21:50:49,917 - DEBUG - ğŸ” PARSING DEBUG - Starting response parsing:
2025-09-27 21:50:49,919 - DEBUG -   ğŸ“ Total response length: 2368
2025-09-27 21:50:49,919 - DEBUG -   ğŸ“„ Response preview (first 200 chars): 'FIGURATIVE_DETECTION:
I examined the entire verse for any potential instances of figurative language, adhering strictly to the conservative guidelines provided.

1.  **"×•Ö°× Ö¸×ªÖ·×ªÖ¼Ö´Ö£×™ ×œÖ°Ö ×šÖ¸Ö  ×•Ö¼×œÖ°×–Ö·×¨Ö°×¢Ö²×šÖ¸'
2025-09-27 21:50:49,920 - DEBUG -   ğŸ“„ Response ending (last 200 chars): 'al comparisons, I find no clear metaphors, similes, personification, or other forms of figurative language in this verse. The language is direct and declarative, establishing a covenantal promise.

[]'
2025-09-27 21:50:49,921 - DEBUG -   ğŸ“ FIGURATIVE_DETECTION extracted: 2342 chars
2025-09-27 21:50:49,922 - DEBUG -   ğŸ“ Detection ends with: 'e language in this verse. The language is direct and declarative, establishing a covenantal promise.'
2025-09-27 21:50:49,923 - DEBUG -   âš ï¸ No TAGGING_ANALYSIS section found
2025-09-27 21:50:49,923 - DEBUG - ğŸ” JSON EXTRACTION DEBUG:
2025-09-27 21:50:49,924 - INFO -     ğŸ” JSON Array Extraction:
2025-09-27 21:50:49,925 - INFO -       ğŸ“„ Found JSON-like array: 2 chars
2025-09-27 21:50:49,925 - INFO -       ğŸ“„ Array content: '[]'
2025-09-27 21:50:49,926 - INFO -       âš ï¸ Array doesn't contain objects - continuing search
2025-09-27 21:50:49,927 - INFO -       âš ï¸ No JSON OUTPUT section found
2025-09-27 21:50:49,927 - INFO -       ğŸ“„ Attempting sophisticated bracket matching from position 2366
2025-09-27 21:50:49,928 - INFO -       ğŸ“„ Bracket matching found: 2 chars
2025-09-27 21:50:49,929 - INFO -       âš ï¸ Bracket-matched array doesn't contain objects
2025-09-27 21:50:49,929 - INFO -       ğŸ“„ Empty array pattern detected
2025-09-27 21:50:49,930 - DEBUG -   ğŸ“„ JSON string extracted: 2 chars
2025-09-27 21:50:49,930 - DEBUG -   ğŸ“„ JSON preview: '[]'
2025-09-27 21:50:49,931 - DEBUG -   ğŸ“„ COMPLETE JSON CONTENT:
2025-09-27 21:50:49,931 - DEBUG - ---JSON-START---
2025-09-27 21:50:49,932 - DEBUG - []
2025-09-27 21:50:49,932 - DEBUG - ---JSON-END---
2025-09-27 21:50:49,932 - INFO - ğŸ” FALLBACK CHECK - No instances found but have deliberation text
2025-09-27 21:50:49,932 - INFO -   ğŸ“ Has figurative indicators: True
2025-09-27 21:50:49,933 - INFO -   ğŸ“ Appears to end abruptly: False
2025-09-27 21:50:49,934 - INFO -   ğŸ“ Has substantial analysis: True
2025-09-27 21:50:49,934 - INFO -   ğŸ“ Has figurative analysis: True
2025-09-27 21:50:49,936 - INFO -   ğŸ“ Has figurative conclusions: False
2025-09-27 21:50:49,936 - INFO -   ğŸ“ Missing TAGGING_ANALYSIS: False
2025-09-27 21:50:49,937 - INFO -   ğŸ“ Analysis complete but JSON empty: False
2025-09-27 21:50:49,937 - INFO -   ğŸ“ Should trigger fallback: False
2025-09-27 21:50:49,938 - INFO -   ğŸ“ Truncation criteria not met - no fallback parsing attempted
2025-09-27 21:50:49,939 - INFO - Worker 1: Completed Genesis 17:8 - 0 instances
2025-09-27 21:50:49,941 - INFO - Completed Genesis 17:8: Truncation=no, BothTruncated=no, Model=gemini-2.5-flash, Instances=0
2025-09-27 21:50:49,944 - INFO - --- PROCESSING: Genesis 18 ---
2025-09-27 21:50:49,945 - DEBUG - Starting new HTTPS connection (1): www.sefaria.org:443
2025-09-27 21:50:50,274 - DEBUG - https://www.sefaria.org:443 "GET /api/texts/Genesis.18 HTTP/1.1" 200 None
2025-09-27 21:50:50,320 - INFO - Processing 1 problematic verses from Genesis 18
2025-09-27 21:50:50,321 - INFO - Worker 1: Processing Genesis 18:29
2025-09-27 21:51:07,657 - DEBUG - ğŸ” API Response Debug Info:
2025-09-27 21:51:07,659 - DEBUG -   ğŸ“Š Total candidates: 1
2025-09-27 21:51:07,661 - DEBUG -   ğŸ Finish reason: 1
2025-09-27 21:51:07,662 - DEBUG -   ğŸ“ Finish reason type: <enum 'FinishReason'>
2025-09-27 21:51:07,663 - DEBUG -   ğŸ“ Finish reason str: '1'
2025-09-27 21:51:07,665 - DEBUG -   ğŸª™ Usage Metadata:
2025-09-27 21:51:07,666 - DEBUG -     - Prompt Token Count: 1383
2025-09-27 21:51:07,666 - DEBUG -     - Candidates Token Count: 1134
2025-09-27 21:51:07,666 - DEBUG -     - Total Token Count: 4641
2025-09-27 21:51:07,667 - DEBUG -   ğŸ›¡ï¸ Safety ratings: None
2025-09-27 21:51:07,668 - DEBUG -   ğŸ“„ Has content: True
2025-09-27 21:51:07,669 - DEBUG -   ğŸ“„ Content parts count: 1
2025-09-27 21:51:07,670 - DEBUG -   ğŸ“ Response text length: 4131 characters
2025-09-27 21:51:07,672 - DEBUG -   ğŸ“ Response ends with: 'are the city, confirming the condition."
  }
]
```'
2025-09-27 21:51:07,673 - WARNING -   âš ï¸ Response appears to end abruptly (no proper punctuation)
2025-09-27 21:51:07,675 - DEBUG - ğŸ” PARSING DEBUG - Starting response parsing:
2025-09-27 21:51:07,676 - DEBUG -   ğŸ“ Total response length: 4131
2025-09-27 21:51:07,677 - DEBUG -   ğŸ“„ Response preview (first 200 chars): 'FIGURATIVE_DETECTION:
I examined the entire verse for any potential figurative language, adhering strictly to the provided guidelines.

1.  **"×•Ö·×™Ö¼Ö¹Ö¨×¡Ö¶×£ ×¢Öœ×•Ö¹×“ ×œÖ°×“Ö·×‘Ö¼ÖµÖ¤×¨ ×Öµ×œÖ¸×™×•Ö™" (But he spoke up again'
2025-09-27 21:51:07,678 - DEBUG -   ğŸ“„ Response ending (last 200 chars): 'rmation"],
    "confidence": 0.9,
    "speaker": "God",
    "purpose": "To concisely refer to the specific group of people for whose sake God would spare the city, confirming the condition."
  }
]
```'
2025-09-27 21:51:07,680 - DEBUG -   ğŸ“ FIGURATIVE_DETECTION extracted: 1979 chars
2025-09-27 21:51:07,682 - DEBUG -   ğŸ“ Detection ends with: ' obvious similes, or other forms of figurative language as per the conservative guidelines.

```json'
2025-09-27 21:51:07,684 - DEBUG -   âš ï¸ No TAGGING_ANALYSIS section found
2025-09-27 21:51:07,685 - DEBUG - ğŸ” JSON EXTRACTION DEBUG:
2025-09-27 21:51:07,686 - INFO -     ğŸ” JSON Array Extraction:
2025-09-27 21:51:07,688 - INFO -       ğŸ“„ Found JSON-like array: 651 chars
2025-09-27 21:51:07,689 - INFO -       ğŸ“„ Array content: '[
  {
    "figurative_language": "yes",
    "simile": "no",
    "metaphor": "no",
    "personification": "no",
    "idiom": "no",
    "hyperbole": "no",
    "metonymy": "yes",
    "other": "no",
    "hebrew_text": "×Ö·×¨Ö°×‘Ö¼Ö¸×¢Ö´Ö‘×™×",
    "english_text": "forty",
    "explanation": "The number 'forty' stands metonymically (specifically, synecdochically) for 'forty righteous people.' The quality of righteousness is implicitly understood from the narrative context of Abraham's intercession for Sodom, where the presence of such individuals is the condition for sparing the city.",
    "target": ["righteous inhabitants", "moral individuals", "humanity"]'
2025-09-27 21:51:07,690 - INFO -       âš ï¸ Array doesn't contain objects - continuing search
2025-09-27 21:51:07,691 - INFO -       âš ï¸ No JSON OUTPUT section found
2025-09-27 21:51:07,692 - INFO -       ğŸ“„ Attempting sophisticated bracket matching from position 2002
2025-09-27 21:51:07,693 - INFO -       ğŸ“„ Bracket matching found: 2125 chars
2025-09-27 21:51:07,694 - INFO -       âœ… Bracket-matched array contains objects
2025-09-27 21:51:07,695 - DEBUG -   ğŸ“„ JSON string extracted: 2125 chars
2025-09-27 21:51:07,695 - DEBUG -   ğŸ“„ JSON preview: '[
  {
    "figurative_language": "yes",
    "simile": "no",
    "metaphor": "no",
    "personification": "no",
    "idiom": "no",
    "hyperbole": "no",
    "metonymy": "yes",
    "other": "no",
    "'
2025-09-27 21:51:07,697 - DEBUG -   ğŸ“„ COMPLETE JSON CONTENT:
2025-09-27 21:51:07,698 - DEBUG - ---JSON-START---
2025-09-27 21:51:07,698 - DEBUG - [
  {
    "figurative_language": "yes",
    "simile": "no",
    "metaphor": "no",
    "personification": "no",
    "idiom": "no",
    "hyperbole": "no",
    "metonymy": "yes",
    "other": "no",
    "hebrew_text": "×Ö·×¨Ö°×‘Ö¼Ö¸×¢Ö´Ö‘×™×",
    "english_text": "forty",
    "explanation": "The number 'forty' stands metonymically (specifically, synecdochically) for 'forty righteous people.' The quality of righteousness is implicitly understood from the narrative context of Abraham's intercession for Sodom, where the presence of such individuals is the condition for sparing the city.",
    "target": ["righteous inhabitants", "moral individuals", "humanity"],
    "vehicle": ["the number forty", "a specific quantity", "numerical representation"],
    "ground": ["numerical threshold", "sufficient quantity", "condition for sparing"],
    "posture": ["negotiation", "pleading", "intercession", "persuasion"],
    "confidence": 0.9,
    "speaker": "Abraham",
    "purpose": "To concisely refer to the specific group of people whose presence is the condition for sparing the city, relying on contextual understanding."
  },
  {
    "figurative_language": "yes",
    "simile": "no",
    "metaphor": "no",
    "personification": "no",
    "idiom": "no",
    "hyperbole": "no",
    "metonymy": "yes",
    "other": "no",
    "hebrew_text": "×”Ö¸×Ö·×¨Ö°×‘Ö¼Ö¸×¢Ö´Ö½×™×",
    "english_text": "the forty",
    "explanation": "Similar to the previous instance, 'the forty' stands metonymically (synecdochically) for 'the forty righteous people.' God's response confirms the condition based on the implied moral quality of these individuals.",
    "target": ["righteous inhabitants", "moral individuals", "humanity"],
    "vehicle": ["the number forty", "a specific quantity", "numerical representation"],
    "ground": ["numerical threshold", "sufficient quantity", "condition for sparing"],
    "posture": ["concession", "agreement", "divine promise", "affirmation"],
    "confidence": 0.9,
    "speaker": "God",
    "purpose": "To concisely refer to the specific group of people for whose sake God would spare the city, confirming the condition."
  }
]
2025-09-27 21:51:07,700 - DEBUG - ---JSON-END---
2025-09-27 21:51:07,700 - WARNING -   âš ï¸ Found problematic characters: ["'×' (ord=1488) at pos 215", "'Ö·' (ord=1463) at pos 216", "'×¨' (ord=1512) at pos 217", "'Ö°' (ord=1456) at pos 218", "'×‘' (ord=1489) at pos 219", "'Ö¼' (ord=1468) at pos 220", "'Ö¸' (ord=1464) at pos 221", "'×¢' (ord=1506) at pos 222", "'Ö´' (ord=1460) at pos 223", "'Ö‘' (ord=1425) at pos 224"]
2025-09-27 21:51:07,701 - INFO -   âœ… JSON parsing succeeded on first attempt
2025-09-27 21:51:07,703 - INFO - Worker 1: Completed Genesis 18:29 - 2 instances
2025-09-27 21:51:07,715 - INFO - Completed Genesis 18:29: Truncation=no, BothTruncated=no, Model=gemini-2.5-flash, Instances=2
2025-09-27 21:51:07,719 - INFO - --- PROCESSING: Genesis 24 ---
2025-09-27 21:51:07,720 - DEBUG - Starting new HTTPS connection (1): www.sefaria.org:443
2025-09-27 21:51:08,048 - DEBUG - https://www.sefaria.org:443 "GET /api/texts/Genesis.24 HTTP/1.1" 200 None
2025-09-27 21:51:08,098 - INFO - Processing 2 problematic verses from Genesis 24
2025-09-27 21:51:08,099 - INFO - Worker 1: Processing Genesis 24:4
2025-09-27 21:51:08,101 - INFO - Worker 2: Processing Genesis 24:65
2025-09-27 21:51:14,729 - DEBUG - ğŸ” API Response Debug Info:
2025-09-27 21:51:14,730 - DEBUG -   ğŸ“Š Total candidates: 1
2025-09-27 21:51:14,732 - DEBUG -   ğŸ Finish reason: 1
2025-09-27 21:51:14,733 - DEBUG -   ğŸ“ Finish reason type: <enum 'FinishReason'>
2025-09-27 21:51:14,734 - DEBUG -   ğŸ“ Finish reason str: '1'
2025-09-27 21:51:14,735 - DEBUG -   ğŸª™ Usage Metadata:
2025-09-27 21:51:14,736 - DEBUG -     - Prompt Token Count: 1329
2025-09-27 21:51:14,737 - DEBUG -     - Candidates Token Count: 302
2025-09-27 21:51:14,737 - DEBUG -     - Total Token Count: 2540
2025-09-27 21:51:14,737 - DEBUG -   ğŸ›¡ï¸ Safety ratings: None
2025-09-27 21:51:14,737 - DEBUG -   ğŸ“„ Has content: True
2025-09-27 21:51:14,738 - DEBUG -   ğŸ“„ Content parts count: 1
2025-09-27 21:51:14,739 - DEBUG -   ğŸ“ Response text length: 1179 characters
2025-09-27 21:51:14,740 - DEBUG -   ğŸ“ Response ends with: 'arding a physical journey and a specific task.

[]'
2025-09-27 21:51:14,741 - DEBUG - ğŸ” PARSING DEBUG - Starting response parsing:
2025-09-27 21:51:14,741 - DEBUG -   ğŸ“ Total response length: 1179
2025-09-27 21:51:14,742 - DEBUG -   ğŸ“„ Response preview (first 200 chars): 'FIGURATIVE_DETECTION:
I considered the phrase "land of my birth" (×Ö·×¨Ö°×¦Ö´Ö›×™ ×•Ö°×Ö¶×œÖ¾××•Ö¹×œÖ·×“Ö°×ªÖ¼Ö´Ö–×™) to see if it might be a metonymy or metaphor for one's heritage or origin in a non-literal sense. However'
2025-09-27 21:51:14,743 - DEBUG -   ğŸ“„ Response ending (last 200 chars): 'e verse presented any potential for figurative interpretation based on the provided guidelines. The text is a straightforward, literal instruction regarding a physical journey and a specific task.

[]'
2025-09-27 21:51:14,743 - DEBUG -   ğŸ“ FIGURATIVE_DETECTION extracted: 1153 chars
2025-09-27 21:51:14,744 - DEBUG -   ğŸ“ Detection ends with: 'The text is a straightforward, literal instruction regarding a physical journey and a specific task.'
2025-09-27 21:51:14,745 - DEBUG -   âš ï¸ No TAGGING_ANALYSIS section found
2025-09-27 21:51:14,745 - DEBUG - ğŸ” JSON EXTRACTION DEBUG:
2025-09-27 21:51:14,746 - INFO -     ğŸ” JSON Array Extraction:
2025-09-27 21:51:14,747 - INFO -       ğŸ“„ Found JSON-like array: 2 chars
2025-09-27 21:51:14,747 - INFO -       ğŸ“„ Array content: '[]'
2025-09-27 21:51:14,748 - INFO -       âš ï¸ Array doesn't contain objects - continuing search
2025-09-27 21:51:14,749 - INFO -       âš ï¸ No JSON OUTPUT section found
2025-09-27 21:51:14,749 - INFO -       ğŸ“„ Attempting sophisticated bracket matching from position 1177
2025-09-27 21:51:14,750 - INFO -       ğŸ“„ Bracket matching found: 2 chars
2025-09-27 21:51:14,751 - INFO -       âš ï¸ Bracket-matched array doesn't contain objects
2025-09-27 21:51:14,751 - INFO -       ğŸ“„ Empty array pattern detected
2025-09-27 21:51:14,752 - DEBUG -   ğŸ“„ JSON string extracted: 2 chars
2025-09-27 21:51:14,754 - DEBUG -   ğŸ“„ JSON preview: '[]'
2025-09-27 21:51:14,755 - DEBUG -   ğŸ“„ COMPLETE JSON CONTENT:
2025-09-27 21:51:14,756 - DEBUG - ---JSON-START---
2025-09-27 21:51:14,757 - DEBUG - []
2025-09-27 21:51:14,757 - DEBUG - ---JSON-END---
2025-09-27 21:51:14,757 - INFO - ğŸ” FALLBACK CHECK - No instances found but have deliberation text
2025-09-27 21:51:14,758 - INFO -   ğŸ“ Has figurative indicators: True
2025-09-27 21:51:14,759 - INFO -   ğŸ“ Appears to end abruptly: False
2025-09-27 21:51:14,760 - INFO -   ğŸ“ Has substantial analysis: True
2025-09-27 21:51:14,762 - INFO -   ğŸ“ Has figurative analysis: True
2025-09-27 21:51:14,763 - INFO -   ğŸ“ Has figurative conclusions: False
2025-09-27 21:51:14,764 - INFO -   ğŸ“ Missing TAGGING_ANALYSIS: False
2025-09-27 21:51:14,766 - INFO -   ğŸ“ Analysis complete but JSON empty: False
2025-09-27 21:51:14,767 - INFO -   ğŸ“ Should trigger fallback: False
2025-09-27 21:51:14,768 - INFO -   ğŸ“ Truncation criteria not met - no fallback parsing attempted
2025-09-27 21:51:14,769 - INFO - Worker 1: Completed Genesis 24:4 - 0 instances
2025-09-27 21:51:14,788 - INFO - Completed Genesis 24:4: Truncation=no, BothTruncated=no, Model=gemini-2.5-flash, Instances=0
2025-09-27 21:51:17,574 - DEBUG - ğŸ” API Response Debug Info:
2025-09-27 21:51:17,575 - DEBUG -   ğŸ“Š Total candidates: 1
2025-09-27 21:51:17,577 - DEBUG -   ğŸ Finish reason: 1
2025-09-27 21:51:17,578 - DEBUG -   ğŸ“ Finish reason type: <enum 'FinishReason'>
2025-09-27 21:51:17,579 - DEBUG -   ğŸ“ Finish reason str: '1'
2025-09-27 21:51:17,581 - DEBUG -   ğŸª™ Usage Metadata:
2025-09-27 21:51:17,582 - DEBUG -     - Prompt Token Count: 1407
2025-09-27 21:51:17,582 - DEBUG -     - Candidates Token Count: 514
2025-09-27 21:51:17,582 - DEBUG -     - Total Token Count: 3025
2025-09-27 21:51:17,582 - DEBUG -   ğŸ›¡ï¸ Safety ratings: None
2025-09-27 21:51:17,584 - DEBUG -   ğŸ“„ Has content: True
2025-09-27 21:51:17,585 - DEBUG -   ğŸ“„ Content parts count: 1
2025-09-27 21:51:17,586 - DEBUG -   ğŸ“ Response text length: 1858 characters
2025-09-27 21:51:17,588 - DEBUG -   ğŸ“ Response ends with: 'figurative language is detected in this verse.

[]'
2025-09-27 21:51:17,589 - DEBUG - ğŸ” PARSING DEBUG - Starting response parsing:
2025-09-27 21:51:17,590 - DEBUG -   ğŸ“ Total response length: 1858
2025-09-27 21:51:17,590 - DEBUG -   ğŸ“„ Response preview (first 200 chars): 'FIGURATIVE_DETECTION:
I have analyzed every phrase in the provided Hebrew text and its English translation for potential figurative language, adhering strictly to the conservative guidelines provided.'
2025-09-27 21:51:17,591 - DEBUG -   ğŸ“„ Response ending (last 200 chars): ' the guidelines (e.g., "mouth of the sword"), are present. The text is a straightforward narrative description of actions and dialogue. Therefore, no figurative language is detected in this verse.

[]'
2025-09-27 21:51:17,592 - DEBUG -   ğŸ“ FIGURATIVE_DETECTION extracted: 1832 chars
2025-09-27 21:51:17,593 - DEBUG -   ğŸ“ Detection ends with: 've description of actions and dialogue. Therefore, no figurative language is detected in this verse.'
2025-09-27 21:51:17,593 - DEBUG -   âš ï¸ No TAGGING_ANALYSIS section found
2025-09-27 21:51:17,594 - DEBUG - ğŸ” JSON EXTRACTION DEBUG:
2025-09-27 21:51:17,594 - INFO -     ğŸ” JSON Array Extraction:
2025-09-27 21:51:17,595 - INFO -       ğŸ“„ Found JSON-like array: 2 chars
2025-09-27 21:51:17,596 - INFO -       ğŸ“„ Array content: '[]'
2025-09-27 21:51:17,596 - INFO -       âš ï¸ Array doesn't contain objects - continuing search
2025-09-27 21:51:17,597 - INFO -       âš ï¸ No JSON OUTPUT section found
2025-09-27 21:51:17,598 - INFO -       ğŸ“„ Attempting sophisticated bracket matching from position 1856
2025-09-27 21:51:17,598 - INFO -       ğŸ“„ Bracket matching found: 2 chars
2025-09-27 21:51:17,599 - INFO -       âš ï¸ Bracket-matched array doesn't contain objects
2025-09-27 21:51:17,600 - INFO -       ğŸ“„ Empty array pattern detected
2025-09-27 21:51:17,600 - DEBUG -   ğŸ“„ JSON string extracted: 2 chars
2025-09-27 21:51:17,601 - DEBUG -   ğŸ“„ JSON preview: '[]'
2025-09-27 21:51:17,601 - DEBUG -   ğŸ“„ COMPLETE JSON CONTENT:
2025-09-27 21:51:17,602 - DEBUG - ---JSON-START---
2025-09-27 21:51:17,602 - DEBUG - []
2025-09-27 21:51:17,602 - DEBUG - ---JSON-END---
2025-09-27 21:51:17,602 - INFO - ğŸ” FALLBACK CHECK - No instances found but have deliberation text
2025-09-27 21:51:17,603 - INFO -   ğŸ“ Has figurative indicators: True
2025-09-27 21:51:17,603 - INFO -   ğŸ“ Appears to end abruptly: False
2025-09-27 21:51:17,604 - INFO -   ğŸ“ Has substantial analysis: True
2025-09-27 21:51:17,606 - INFO -   ğŸ“ Has figurative analysis: True
2025-09-27 21:51:17,607 - INFO -   ğŸ“ Has figurative conclusions: False
2025-09-27 21:51:17,609 - INFO -   ğŸ“ Missing TAGGING_ANALYSIS: False
2025-09-27 21:51:17,610 - INFO -   ğŸ“ Analysis complete but JSON empty: False
2025-09-27 21:51:17,611 - INFO -   ğŸ“ Should trigger fallback: False
2025-09-27 21:51:17,612 - INFO -   ğŸ“ Truncation criteria not met - no fallback parsing attempted
2025-09-27 21:51:17,614 - INFO - Worker 2: Completed Genesis 24:65 - 0 instances
2025-09-27 21:51:17,614 - INFO - Completed Genesis 24:65: Truncation=no, BothTruncated=no, Model=gemini-2.5-flash, Instances=0
2025-09-27 21:51:17,628 - INFO - --- PROCESSING: Genesis 48 ---
2025-09-27 21:51:17,629 - DEBUG - Starting new HTTPS connection (1): www.sefaria.org:443
2025-09-27 21:51:17,988 - DEBUG - https://www.sefaria.org:443 "GET /api/texts/Genesis.48 HTTP/1.1" 200 None
2025-09-27 21:51:18,039 - INFO - Processing 1 problematic verses from Genesis 48
2025-09-27 21:51:18,040 - INFO - Worker 1: Processing Genesis 48:10
2025-09-27 21:51:28,672 - DEBUG - ğŸ” API Response Debug Info:
2025-09-27 21:51:28,674 - DEBUG -   ğŸ“Š Total candidates: 1
2025-09-27 21:51:28,675 - DEBUG -   ğŸ Finish reason: 1
2025-09-27 21:51:28,677 - DEBUG -   ğŸ“ Finish reason type: <enum 'FinishReason'>
2025-09-27 21:51:28,678 - DEBUG -   ğŸ“ Finish reason str: '1'
2025-09-27 21:51:28,679 - DEBUG -   ğŸª™ Usage Metadata:
2025-09-27 21:51:28,681 - DEBUG -     - Prompt Token Count: 1378
2025-09-27 21:51:28,681 - DEBUG -     - Candidates Token Count: 604
2025-09-27 21:51:28,682 - DEBUG -     - Total Token Count: 3192
2025-09-27 21:51:28,682 - DEBUG -   ğŸ›¡ï¸ Safety ratings: None
2025-09-27 21:51:28,683 - DEBUG -   ğŸ“„ Has content: True
2025-09-27 21:51:28,685 - DEBUG -   ğŸ“„ Content parts count: 1
2025-09-27 21:51:28,686 - DEBUG -   ğŸ“ Response text length: 2206 characters
2025-09-27 21:51:28,688 - DEBUG -   ğŸ“ Response ends with: 'rding to the provided conservative guidelines.

[]'
2025-09-27 21:51:28,689 - DEBUG - ğŸ” PARSING DEBUG - Starting response parsing:
2025-09-27 21:51:28,690 - DEBUG -   ğŸ“ Total response length: 2206
2025-09-27 21:51:28,692 - DEBUG -   ğŸ“„ Response preview (first 200 chars): 'FIGURATIVE_DETECTION:
I have analyzed the provided Hebrew and English text for figurative language, adhering to the conservative guidelines.

1.  **×•Ö°×¢Öµ×™× ÖµÖ¤×™ ×™Ö´×©×‚Ö°×¨Ö¸×Öµ×œÖ™ ×›Ö¼Ö¸×‘Ö°×“Ö£×•Ö¼ ×Ö´×–Ö¼Ö¹Ö”×§Ö¶×Ÿ / Israelâ€™s'
2025-09-27 21:51:28,693 - DEBUG -   ğŸ“„ Response ending (last 200 chars): 'lysis, no clear instances of metaphor, simile, personification, or distinct idioms (beyond standard descriptive language) are found in this verse according to the provided conservative guidelines.

[]'
2025-09-27 21:51:28,694 - DEBUG -   ğŸ“ FIGURATIVE_DETECTION extracted: 1288 chars
2025-09-27 21:51:28,696 - DEBUG -   ğŸ“ Detection ends with: 'physical inability to see. No figurative language is present.

3.  **×•Ö·×™Ö¼Ö·×’Ö¼ÖµÖ¤×©× ×Ö¹×ªÖ¸×Ö™ ×Öµ×œÖ¸Ö”×™×• / So'
2025-09-27 21:51:28,697 - DEBUG -   âš ï¸ No TAGGING_ANALYSIS section found
2025-09-27 21:51:28,698 - DEBUG - ğŸ” JSON EXTRACTION DEBUG:
2025-09-27 21:51:28,700 - INFO -     ğŸ” JSON Array Extraction:
2025-09-27 21:51:28,701 - INFO -       ğŸ“„ Found JSON-like array: 8 chars
2025-09-27 21:51:28,702 - INFO -       ğŸ“„ Array content: '[Joseph]'
2025-09-27 21:51:28,703 - INFO -       âš ï¸ Array doesn't contain objects - continuing search
2025-09-27 21:51:28,705 - INFO -       âš ï¸ No JSON OUTPUT section found
2025-09-27 21:51:28,706 - INFO -       ğŸ“„ Attempting sophisticated bracket matching from position 1311
2025-09-27 21:51:28,707 - INFO -       ğŸ“„ Bracket matching found: 8 chars
2025-09-27 21:51:28,708 - INFO -       âš ï¸ Bracket-matched array doesn't contain objects
2025-09-27 21:51:28,709 - INFO -       ğŸ“„ Empty array pattern detected
2025-09-27 21:51:28,710 - DEBUG -   ğŸ“„ JSON string extracted: 2 chars
2025-09-27 21:51:28,711 - DEBUG -   ğŸ“„ JSON preview: '[]'
2025-09-27 21:51:28,712 - DEBUG -   ğŸ“„ COMPLETE JSON CONTENT:
2025-09-27 21:51:28,713 - DEBUG - ---JSON-START---
2025-09-27 21:51:28,713 - DEBUG - []
2025-09-27 21:51:28,714 - DEBUG - ---JSON-END---
2025-09-27 21:51:28,714 - INFO - ğŸ” FALLBACK CHECK - No instances found but have deliberation text
2025-09-27 21:51:28,715 - INFO -   ğŸ“ Has figurative indicators: True
2025-09-27 21:51:28,716 - INFO -   ğŸ“ Appears to end abruptly: True
2025-09-27 21:51:28,718 - INFO -   ğŸ“ Has substantial analysis: True
2025-09-27 21:51:28,719 - INFO -   ğŸ“ Has figurative analysis: True
2025-09-27 21:51:28,720 - INFO -   ğŸ“ Has figurative conclusions: False
2025-09-27 21:51:28,722 - INFO -   ğŸ“ Missing TAGGING_ANALYSIS: False
2025-09-27 21:51:28,723 - INFO -   ğŸ“ Analysis complete but JSON empty: False
2025-09-27 21:51:28,724 - INFO -   ğŸ“ Should trigger fallback: True
2025-09-27 21:51:28,725 - ERROR - âŒ API response was truncated. No JSON was found and fallback parsing is disabled.
2025-09-27 21:51:28,726 - ERROR - âŒ This verse must be re-processed. Returning no instances.
2025-09-27 21:51:28,727 - WARNING - Worker 1: Truncation detected in Genesis 48:10, retrying with Pro model
2025-09-27 21:51:28,727 - INFO - Using model override: gemini-2.5-pro
2025-09-27 21:51:52,512 - DEBUG - ğŸ” API Response Debug Info:
2025-09-27 21:51:52,513 - DEBUG -   ğŸ“Š Total candidates: 1
2025-09-27 21:51:52,515 - DEBUG -   ğŸ Finish reason: 1
2025-09-27 21:51:52,516 - DEBUG -   ğŸ“ Finish reason type: <enum 'FinishReason'>
2025-09-27 21:51:52,518 - DEBUG -   ğŸ“ Finish reason str: '1'
2025-09-27 21:51:52,519 - DEBUG -   ğŸª™ Usage Metadata:
2025-09-27 21:51:52,521 - DEBUG -     - Prompt Token Count: 1378
2025-09-27 21:51:52,521 - DEBUG -     - Candidates Token Count: 994
2025-09-27 21:51:52,521 - DEBUG -     - Total Token Count: 4326
2025-09-27 21:51:52,521 - DEBUG -   ğŸ›¡ï¸ Safety ratings: None
2025-09-27 21:51:52,522 - DEBUG -   ğŸ“„ Has content: True
2025-09-27 21:51:52,524 - DEBUG -   ğŸ“„ Content parts count: 1
2025-09-27 21:51:52,525 - DEBUG -   ğŸ“ Response text length: 3210 characters
2025-09-27 21:51:52,526 - DEBUG -   ğŸ“ Response ends with: 's on touch for identification and blessing."
  }
]'
2025-09-27 21:51:52,528 - DEBUG - ğŸ” PARSING DEBUG - Starting response parsing:
2025-09-27 21:51:52,529 - DEBUG -   ğŸ“ Total response length: 3210
2025-09-27 21:51:52,530 - DEBUG -   ğŸ“„ Response preview (first 200 chars): '**FIRST, provide your deliberation in a FIGURATIVE_DETECTION section:**

FIGURATIVE_DETECTION:
I have analyzed the verse `×•Ö°×¢Öµ×™× ÖµÖ¤×™ ×™Ö´×©×‚Ö°×¨Ö¸×Öµ×œÖ™ ×›Ö¼Ö¸×‘Ö°×“Ö£×•Ö¼ ×Ö´×–Ö¼Ö¹Ö”×§Ö¶×Ÿ ×œÖ¹Ö¥× ×™×•Ö¼×›Ö·Ö–×œ ×œÖ´×¨Ö°×Ö‘×•Ö¹×ª ×•Ö·×™Ö¼Ö·×’Ö¼ÖµÖ¤×©× ×'
2025-09-27 21:51:52,531 - DEBUG -   ğŸ“„ Response ending (last 200 chars): 'vidly describe Jacob's physical frailty and blindness due to old age, setting the context for why Joseph must bring the boys close and why Jacob relies on touch for identification and blessing."
  }
]'
2025-09-27 21:51:52,533 - DEBUG -   ğŸ“ FIGURATIVE_DETECTION extracted: 1375 chars
2025-09-27 21:51:52,534 - DEBUG -   ğŸ“ Detection ends with: 'guage. It is excluded.

3.  **`×•Ö·×™Ö¼Ö·×’Ö¼ÖµÖ¤×©× ×Ö¹×ªÖ¸×Ö™ ×Öµ×œÖ¸Ö”×™×• ×•Ö·×™Ö¼Ö´×©×Ö¼Ö·Ö¥×§ ×œÖ¸×”Ö¶Ö–× ×•Ö·×™Ö°×—Ö·×‘Ö¼ÖµÖ¥×§ ×œÖ¸×”Ö½Ö¶×` (So'
2025-09-27 21:51:52,536 - DEBUG -   âš ï¸ No TAGGING_ANALYSIS section found
2025-09-27 21:51:52,537 - DEBUG - ğŸ” JSON EXTRACTION DEBUG:
2025-09-27 21:51:52,538 - INFO -     ğŸ” JSON Array Extraction:
2025-09-27 21:51:52,540 - INFO -       ğŸ“„ Found JSON-like array: 8 chars
2025-09-27 21:51:52,541 - INFO -       ğŸ“„ Array content: '[Joseph]'
2025-09-27 21:51:52,543 - INFO -       âš ï¸ Array doesn't contain objects - continuing search
2025-09-27 21:51:52,544 - INFO -       ğŸ“„ Found JSON OUTPUT section: 1372 chars
2025-09-27 21:51:52,545 - WARNING -       âš ï¸ JSON appears incomplete in OUTPUT section
2025-09-27 21:51:52,546 - INFO -       ğŸ“„ Attempting sophisticated bracket matching from position 1437
2025-09-27 21:51:52,547 - INFO -       ğŸ“„ Bracket matching found: 8 chars
2025-09-27 21:51:52,548 - INFO -       âš ï¸ Bracket-matched array doesn't contain objects
2025-09-27 21:51:52,549 - WARNING -       âŒ No valid JSON array found - returning empty
2025-09-27 21:51:52,550 - DEBUG -   ğŸ“„ JSON string extracted: 2 chars
2025-09-27 21:51:52,551 - DEBUG -   ğŸ“„ JSON preview: '[]'
2025-09-27 21:51:52,551 - DEBUG -   ğŸ“„ COMPLETE JSON CONTENT:
2025-09-27 21:51:52,552 - DEBUG - ---JSON-START---
2025-09-27 21:51:52,552 - DEBUG - []
2025-09-27 21:51:52,552 - DEBUG - ---JSON-END---
2025-09-27 21:51:52,552 - INFO - ğŸ” FALLBACK CHECK - No instances found but have deliberation text
2025-09-27 21:51:52,553 - INFO -   ğŸ“ Has figurative indicators: True
2025-09-27 21:51:52,553 - INFO -   ğŸ“ Appears to end abruptly: True
2025-09-27 21:51:52,554 - INFO -   ğŸ“ Has substantial analysis: True
2025-09-27 21:51:52,555 - INFO -   ğŸ“ Has figurative analysis: True
2025-09-27 21:51:52,555 - INFO -   ğŸ“ Has figurative conclusions: True
2025-09-27 21:51:52,556 - INFO -   ğŸ“ Missing TAGGING_ANALYSIS: True
2025-09-27 21:51:52,557 - INFO -   ğŸ“ Analysis complete but JSON empty: True
2025-09-27 21:51:52,557 - INFO -   ğŸ“ Should trigger fallback: True
2025-09-27 21:51:52,558 - ERROR - âŒ API response was truncated. No JSON was found and fallback parsing is disabled.
2025-09-27 21:51:52,559 - ERROR - âŒ This verse must be re-processed. Returning no instances.
2025-09-27 21:51:52,559 - WARNING - Worker 1: Pro model also truncated for Genesis 48:10 - trying tertiary decomposition fallback
2025-09-27 21:51:52,559 - INFO - ğŸ¤– CLAUDE FALLBACK: Using Claude Sonnet 4 for complex verse analysis
2025-09-27 21:51:52,560 - INFO - Making request to Claude Sonnet 4 for figurative language analysis
2025-09-27 21:51:52,560 - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': Timeout(connect=5.0, read=600, write=600, pool=600), 'files': None, 'idempotency_key': 'stainless-python-retry-b1a4309e-e0f5-42bb-bf9b-3d62d0af41a3', 'json_data': {'max_tokens': 8000, 'messages': [{'role': 'user', 'content': 'You are an expert in biblical Hebrew linguistics and figurative language analysis. I need you to analyze a verse from Genesis 48 for figurative language using a CONSERVATIVE approach.\n\n**Hebrew Text:** ×•Ö°×¢Öµ×™× ÖµÖ¤×™ ×™Ö´×©×‚Ö°×¨Ö¸×Öµ×œÖ™ ×›Ö¼Ö¸×‘Ö°×“Ö£×•Ö¼ ×Ö´×–Ö¼Ö¹Ö”×§Ö¶×Ÿ ×œÖ¹Ö¥× ×™×•Ö¼×›Ö·Ö–×œ ×œÖ´×¨Ö°×Ö‘×•Ö¹×ª ×•Ö·×™Ö¼Ö·×’Ö¼ÖµÖ¤×©× ×Ö¹×ªÖ¸×Ö™ ×Öµ×œÖ¸Ö”×™×• ×•Ö·×™Ö¼Ö´×©×Ö¼Ö·Ö¥×§ ×œÖ¸×”Ö¶Ö–× ×•Ö·×™Ö°×—Ö·×‘Ö¼ÖµÖ¥×§ ×œÖ¸×”Ö¶Ö½×\n**English Translation:** Now Israelâ€™s eyes were dim with age; he could not see. So [Joseph] brought them close to him, and he kissed them and embraced them.\n\n**TASK:** Identify ALL instances of figurative language in this verse using these guidelines:\n\n**CONSERVATIVE DETECTION GUIDELINES:**\n1. **MARK** physical verbs/concepts applied to spiritual/abstract concepts\n2. **MARK** clear metaphors, similes, personification, idioms, hyperbole, metonymy\n3. **BE CONSERVATIVE** with divine anthropomorphisms (only mark if clearly figurative beyond standard narrative language)\n4. **EXCLUDE** proper names, standard titles, conventional expressions unless clearly figurative\n5. **FOCUS** on Hebrew text primarily, use English for clarification\n\n**OUTPUT FORMAT:**\nFirst provide your **DETECTION DELIBERATION** - explain what you considered and why you included/excluded each potential figurative element.\n\nThen provide **HIERARCHICAL TAGGING ANALYSIS** for any instances you found.\n\nFinally, provide a **JSON array** with this structure for each instance:\n```json\n[\n  {\n    "instance_id": 1,\n    "figurative_language": "yes",\n    "simile": "yes/no",\n    "metaphor": "yes/no",\n    "personification": "yes/no",\n    "idiom": "yes/no",\n    "hyperbole": "yes/no",\n    "metonymy": "yes/no",\n    "other": "yes/no",\n    "confidence": 0.8,\n    "english_text": "the relevant English phrase",\n    "hebrew_text": "the relevant Hebrew phrase",\n    "explanation": "detailed explanation of the figurative language",\n    "speaker": "who is speaking",\n    "purpose": "why this figurative language is used",\n    "target": ["specific target", "target category", "general domain"],\n    "vehicle": ["specific vehicle", "vehicle category", "general domain"],\n    "ground": ["specific quality", "quality category", "general domain"],\n    "posture": ["specific attitude", "attitude category", "general domain"]\n  }\n]\n```\n\n**If NO figurative language is found, return an empty array: []**\n\nBegin your analysis:'}], 'model': 'claude-sonnet-4@20250514'}}
2025-09-27 21:51:52,562 - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-09-27 21:51:52,562 - DEBUG - close.started
2025-09-27 21:51:52,562 - DEBUG - close.complete
2025-09-27 21:51:52,562 - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-09-27 21:51:52,583 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000026E6E58F6F0>
2025-09-27 21:51:52,583 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000026E6E5BCA70> server_hostname='api.anthropic.com' timeout=5.0
2025-09-27 21:51:52,597 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000026E6E582690>
2025-09-27 21:51:52,598 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-09-27 21:51:52,598 - DEBUG - send_request_headers.complete
2025-09-27 21:51:52,598 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-09-27 21:51:52,598 - DEBUG - send_request_body.complete
2025-09-27 21:51:52,598 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-09-27 21:51:52,798 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Date', b'Sun, 28 Sep 2025 01:51:52 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'x-should-retry', b'false'), (b'request-id', b'req_011CTZxjyKFjiXST1URVS5CW'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'224d8e00-c63e-4f31-b7f9-b80cca99cc00'), (b'x-envoy-upstream-service-time', b'109'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'985f99213d809021-BOS')])
2025-09-27 21:51:52,798 - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 404 Not Found"
2025-09-27 21:51:52,798 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-09-27 21:51:52,800 - DEBUG - receive_response_body.complete
2025-09-27 21:51:52,800 - DEBUG - response_closed.started
2025-09-27 21:51:52,800 - DEBUG - response_closed.complete
2025-09-27 21:51:52,801 - DEBUG - HTTP Response: POST https://api.anthropic.com/v1/messages "404 Not Found" Headers({'date': 'Sun, 28 Sep 2025 01:51:52 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'x-should-retry': 'false', 'request-id': 'req_011CTZxjyKFjiXST1URVS5CW', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '224d8e00-c63e-4f31-b7f9-b80cca99cc00', 'x-envoy-upstream-service-time': '109', 'via': '1.1 google', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '985f99213d809021-BOS'})
2025-09-27 21:51:52,801 - DEBUG - request_id: req_011CTZxjyKFjiXST1URVS5CW
2025-09-27 21:51:52,801 - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "C:\Users\ariro\AppData\Roaming\Python\Python313\site-packages\anthropic\_base_client.py", line 1092, in request
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\ariro\AppData\Roaming\Python\Python313\site-packages\httpx\_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '404 Not Found' for url 'https://api.anthropic.com/v1/messages'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2025-09-27 21:51:52,802 - DEBUG - Not retrying as header `x-should-retry` is set to `false`
2025-09-27 21:51:52,802 - DEBUG - Re-raising status error
2025-09-27 21:51:52,802 - ERROR - Claude Sonnet API error: Error code: 404 - {'type': 'error', 'error': {'type': 'not_found_error', 'message': 'model: claude-sonnet-4@20250514'}, 'request_id': 'req_011CTZxjyKFjiXST1URVS5CW'}
2025-09-27 21:51:52,802 - ERROR - ğŸ¤– CLAUDE FALLBACK: Failed - Claude Sonnet API error: Error code: 404 - {'type': 'error', 'error': {'type': 'not_found_error', 'message': 'model: claude-sonnet-4@20250514'}, 'request_id': 'req_011CTZxjyKFjiXST1URVS5CW'}
2025-09-27 21:51:52,804 - INFO - Worker 1: Claude fallback completed for Genesis 48:10 - Success: False, Instances: 0
2025-09-27 21:51:52,804 - INFO - Worker 1: Completed Genesis 48:10 - 0 instances
2025-09-27 21:51:52,817 - INFO - Completed Genesis 48:10: Truncation=yes, BothTruncated=yes, Model=claude-sonnet-4, Instances=0
2025-09-27 21:51:52,822 - INFO - --- PROCESSING: Genesis 30 ---
2025-09-27 21:51:52,824 - DEBUG - Starting new HTTPS connection (1): www.sefaria.org:443
2025-09-27 21:51:53,153 - DEBUG - https://www.sefaria.org:443 "GET /api/texts/Genesis.30 HTTP/1.1" 200 None
2025-09-27 21:51:53,201 - INFO - Processing 1 problematic verses from Genesis 30
2025-09-27 21:51:53,202 - INFO - Worker 1: Processing Genesis 30:6
2025-09-27 21:52:10,184 - DEBUG - ğŸ” API Response Debug Info:
2025-09-27 21:52:10,186 - DEBUG -   ğŸ“Š Total candidates: 1
2025-09-27 21:52:10,187 - DEBUG -   ğŸ Finish reason: 1
2025-09-27 21:52:10,189 - DEBUG -   ğŸ“ Finish reason type: <enum 'FinishReason'>
2025-09-27 21:52:10,190 - DEBUG -   ğŸ“ Finish reason str: '1'
2025-09-27 21:52:10,191 - DEBUG -   ğŸª™ Usage Metadata:
2025-09-27 21:52:10,193 - DEBUG -     - Prompt Token Count: 1383
2025-09-27 21:52:10,193 - DEBUG -     - Candidates Token Count: 1002
2025-09-27 21:52:10,193 - DEBUG -     - Total Token Count: 4492
2025-09-27 21:52:10,193 - DEBUG -   ğŸ›¡ï¸ Safety ratings: None
2025-09-27 21:52:10,194 - DEBUG -   ğŸ“„ Has content: True
2025-09-27 21:52:10,195 - DEBUG -   ğŸ“„ Content parts count: 1
2025-09-27 21:52:10,197 - DEBUG -   ğŸ“ Response text length: 3459 characters
2025-09-27 21:52:10,197 - DEBUG -   ğŸ“ Response ends with: 'onsiveness to her suffering and prayer."
  }
]
```'
2025-09-27 21:52:10,199 - WARNING -   âš ï¸ Response appears to end abruptly (no proper punctuation)
2025-09-27 21:52:10,200 - DEBUG - ğŸ” PARSING DEBUG - Starting response parsing:
2025-09-27 21:52:10,202 - DEBUG -   ğŸ“ Total response length: 3459
2025-09-27 21:52:10,203 - DEBUG -   ğŸ“„ Response preview (first 200 chars): 'FIGURATIVE_DETECTION:
1.  **"×“Ö¼Ö¸× Ö·Ö£× Ö¼Ö´×™ ×Ö±×œÖ¹×”Ö´Ö”×™×" (God has vindicated me):**
    *   Considered if this might be a metaphor or an idiom.
    *   Reasoning: This is a literal statement of God's action'
2025-09-27 21:52:10,204 - DEBUG -   ğŸ“„ Response ending (last 200 chars): 'rpose": "To express Rachel's gratitude and acknowledgment that God not only heard her words but also acted upon her request, demonstrating divine responsiveness to her suffering and prayer."
  }
]
```'
2025-09-27 21:52:10,206 - DEBUG -   ğŸ“ FIGURATIVE_DETECTION extracted: 2065 chars
2025-09-27 21:52:10,207 - DEBUG -   ğŸ“ Detection ends with: 'due to the wordplay with "vindicated me." Therefore, it is excluded as figurative language.

```json'
2025-09-27 21:52:10,208 - DEBUG -   âš ï¸ No TAGGING_ANALYSIS section found
2025-09-27 21:52:10,210 - DEBUG - ğŸ” JSON EXTRACTION DEBUG:
2025-09-27 21:52:10,211 - INFO -     ğŸ” JSON Array Extraction:
2025-09-27 21:52:10,212 - INFO -       ğŸ“„ Found JSON-like array: 730 chars
2025-09-27 21:52:10,212 - INFO -       ğŸ“„ Array content: '[
  {
    "figurative_language": "yes",
    "simile": "no",
    "metaphor": "no",
    "personification": "no",
    "idiom": "yes",
    "hyperbole": "no",
    "metonymy": "yes",
    "other": "no",
    "hebrew_text": "×©×Ö¸×Ö·Ö£×¢ ×‘Ö¼Ö°×§Ö¹×œÖ´Ö”×™",
    "english_text": "has heeded my plea (lit. \"heard in my voice\")",
    "explanation": "This is a common biblical idiom meaning 'to listen to,' 'to obey,' or 'to heed a request/plea.' The 'voice' (×§×•×œ) here metonymically represents the plea or request made through it, as one does not literally hear 'in' a voice but rather hears and responds to the message conveyed by it.",
    "target": [
      "Rachel's plea",
      "human request",
      "communication",
      "abstract concept"
    ]'
2025-09-27 21:52:10,213 - INFO -       âš ï¸ Array doesn't contain objects - continuing search
2025-09-27 21:52:10,214 - INFO -       âš ï¸ No JSON OUTPUT section found
2025-09-27 21:52:10,216 - INFO -       ğŸ“„ Attempting sophisticated bracket matching from position 2088
2025-09-27 21:52:10,217 - INFO -       ğŸ“„ Bracket matching found: 1367 chars
2025-09-27 21:52:10,219 - INFO -       âœ… Bracket-matched array contains objects
2025-09-27 21:52:10,220 - DEBUG -   ğŸ“„ JSON string extracted: 1367 chars
2025-09-27 21:52:10,221 - DEBUG -   ğŸ“„ JSON preview: '[
  {
    "figurative_language": "yes",
    "simile": "no",
    "metaphor": "no",
    "personification": "no",
    "idiom": "yes",
    "hyperbole": "no",
    "metonymy": "yes",
    "other": "no",
    '
2025-09-27 21:52:10,223 - DEBUG -   ğŸ“„ COMPLETE JSON CONTENT:
2025-09-27 21:52:10,224 - DEBUG - ---JSON-START---
2025-09-27 21:52:10,224 - DEBUG - [
  {
    "figurative_language": "yes",
    "simile": "no",
    "metaphor": "no",
    "personification": "no",
    "idiom": "yes",
    "hyperbole": "no",
    "metonymy": "yes",
    "other": "no",
    "hebrew_text": "×©×Ö¸×Ö·Ö£×¢ ×‘Ö¼Ö°×§Ö¹×œÖ´Ö”×™",
    "english_text": "has heeded my plea (lit. \"heard in my voice\")",
    "explanation": "This is a common biblical idiom meaning 'to listen to,' 'to obey,' or 'to heed a request/plea.' The 'voice' (×§×•×œ) here metonymically represents the plea or request made through it, as one does not literally hear 'in' a voice but rather hears and responds to the message conveyed by it.",
    "target": [
      "Rachel's plea",
      "human request",
      "communication",
      "abstract concept"
    ],
    "vehicle": [
      "hearing in the voice",
      "auditory perception",
      "sensory experience",
      "divine action"
    ],
    "ground": [
      "divine responsiveness",
      "attentiveness",
      "divine attribute",
      "relationship quality"
    ],
    "posture": [
      "gratitude",
      "thankfulness",
      "positive sentiment",
      "religious emotion"
    ],
    "confidence": 0.9,
    "speaker": "Rachel",
    "purpose": "To express Rachel's gratitude and acknowledgment that God not only heard her words but also acted upon her request, demonstrating divine responsiveness to her suffering and prayer."
  }
]
2025-09-27 21:52:10,225 - DEBUG - ---JSON-END---
2025-09-27 21:52:10,226 - WARNING -   âš ï¸ Found problematic characters: ["'×©' (ord=1513) at pos 216", "'×' (ord=1473) at pos 217", "'Ö¸' (ord=1464) at pos 218", "'×' (ord=1502) at pos 219", "'Ö·' (ord=1463) at pos 220", "'Ö£' (ord=1443) at pos 221", "'×¢' (ord=1506) at pos 222", "'×‘' (ord=1489) at pos 224", "'Ö¼' (ord=1468) at pos 225", "'Ö°' (ord=1456) at pos 226"]
2025-09-27 21:52:10,227 - INFO -   âœ… JSON parsing succeeded on first attempt
2025-09-27 21:52:10,228 - INFO - Worker 1: Completed Genesis 30:6 - 1 instances
2025-09-27 21:52:10,231 - INFO - Completed Genesis 30:6: Truncation=no, BothTruncated=no, Model=gemini-2.5-flash, Instances=1
2025-09-27 21:52:10,234 - INFO - --- PROCESSING: Genesis 29 ---
2025-09-27 21:52:10,235 - DEBUG - Starting new HTTPS connection (1): www.sefaria.org:443
2025-09-27 21:52:10,570 - DEBUG - https://www.sefaria.org:443 "GET /api/texts/Genesis.29 HTTP/1.1" 200 None
2025-09-27 21:52:10,620 - INFO - Processing 1 problematic verses from Genesis 29
2025-09-27 21:52:10,620 - INFO - Worker 1: Processing Genesis 29:16
2025-09-27 21:52:16,760 - DEBUG - ğŸ” API Response Debug Info:
2025-09-27 21:52:16,762 - DEBUG -   ğŸ“Š Total candidates: 1
2025-09-27 21:52:16,763 - DEBUG -   ğŸ Finish reason: 1
2025-09-27 21:52:16,765 - DEBUG -   ğŸ“ Finish reason type: <enum 'FinishReason'>
2025-09-27 21:52:16,765 - DEBUG -   ğŸ“ Finish reason str: '1'
2025-09-27 21:52:16,766 - DEBUG -   ğŸª™ Usage Metadata:
2025-09-27 21:52:16,767 - DEBUG -     - Prompt Token Count: 1328
2025-09-27 21:52:16,767 - DEBUG -     - Candidates Token Count: 534
2025-09-27 21:52:16,767 - DEBUG -     - Total Token Count: 2519
2025-09-27 21:52:16,767 - DEBUG -   ğŸ›¡ï¸ Safety ratings: None
2025-09-27 21:52:16,768 - DEBUG -   ğŸ“„ Has content: True
2025-09-27 21:52:16,769 - DEBUG -   ğŸ“„ Content parts count: 1
2025-09-27 21:52:16,770 - DEBUG -   ğŸ“ Response text length: 1804 characters
2025-09-27 21:52:16,772 - DEBUG -   ğŸ“ Response ends with: ' genealogical information in a literal manner.

[]'
2025-09-27 21:52:16,773 - DEBUG - ğŸ” PARSING DEBUG - Starting response parsing:
2025-09-27 21:52:16,774 - DEBUG -   ğŸ“ Total response length: 1804
2025-09-27 21:52:16,775 - DEBUG -   ğŸ“„ Response preview (first 200 chars): 'FIGURATIVE_DETECTION:
I have carefully analyzed the provided Hebrew text: "×•Ö¼×œÖ°×œÖ¸×‘Ö¸Ö–×Ÿ ×©×Ö°×ªÖ¼ÖµÖ£×™ ×‘Ö¸× Ö‘×•Ö¹×ª ×©×ÖµÖ¤× ×”Ö·×’Ö¼Ö°×“Ö¹×œÖ¸×”Ö™ ×œÖµ×Ö¸Ö”×” ×•Ö°×©×ÖµÖ¥× ×”Ö·×§Ö¼Ö°×˜Ö·× Ö¼Ö¸Ö–×” ×¨Ö¸×—ÖµÖ½×œ" (Now Laban had two daughters; the name of t'
2025-09-27 21:52:16,775 - DEBUG -   ğŸ“„ Response ending (last 200 chars): 'nstances of clear metaphors, personification, obvious similes, or biblical idioms in this verse. The text is purely descriptive and factual, providing genealogical information in a literal manner.

[]'
2025-09-27 21:52:16,776 - DEBUG -   ğŸ“ FIGURATIVE_DETECTION extracted: 1778 chars
2025-09-27 21:52:16,777 - DEBUG -   ğŸ“ Detection ends with: ' The text is purely descriptive and factual, providing genealogical information in a literal manner.'
2025-09-27 21:52:16,778 - DEBUG -   âš ï¸ No TAGGING_ANALYSIS section found
2025-09-27 21:52:16,778 - DEBUG - ğŸ” JSON EXTRACTION DEBUG:
2025-09-27 21:52:16,779 - INFO -     ğŸ” JSON Array Extraction:
2025-09-27 21:52:16,779 - INFO -       ğŸ“„ Found JSON-like array: 2 chars
2025-09-27 21:52:16,780 - INFO -       ğŸ“„ Array content: '[]'
2025-09-27 21:52:16,781 - INFO -       âš ï¸ Array doesn't contain objects - continuing search
2025-09-27 21:52:16,781 - INFO -       âš ï¸ No JSON OUTPUT section found
2025-09-27 21:52:16,782 - INFO -       ğŸ“„ Attempting sophisticated bracket matching from position 1802
2025-09-27 21:52:16,783 - INFO -       ğŸ“„ Bracket matching found: 2 chars
2025-09-27 21:52:16,783 - INFO -       âš ï¸ Bracket-matched array doesn't contain objects
2025-09-27 21:52:16,784 - INFO -       ğŸ“„ Empty array pattern detected
2025-09-27 21:52:16,785 - DEBUG -   ğŸ“„ JSON string extracted: 2 chars
2025-09-27 21:52:16,785 - DEBUG -   ğŸ“„ JSON preview: '[]'
2025-09-27 21:52:16,787 - DEBUG -   ğŸ“„ COMPLETE JSON CONTENT:
2025-09-27 21:52:16,788 - DEBUG - ---JSON-START---
2025-09-27 21:52:16,788 - DEBUG - []
2025-09-27 21:52:16,789 - DEBUG - ---JSON-END---
2025-09-27 21:52:16,789 - INFO - ğŸ” FALLBACK CHECK - No instances found but have deliberation text
2025-09-27 21:52:16,790 - INFO -   ğŸ“ Has figurative indicators: True
2025-09-27 21:52:16,791 - INFO -   ğŸ“ Appears to end abruptly: False
2025-09-27 21:52:16,793 - INFO -   ğŸ“ Has substantial analysis: True
2025-09-27 21:52:16,794 - INFO -   ğŸ“ Has figurative analysis: True
2025-09-27 21:52:16,795 - INFO -   ğŸ“ Has figurative conclusions: False
2025-09-27 21:52:16,796 - INFO -   ğŸ“ Missing TAGGING_ANALYSIS: False
2025-09-27 21:52:16,797 - INFO -   ğŸ“ Analysis complete but JSON empty: False
2025-09-27 21:52:16,798 - INFO -   ğŸ“ Should trigger fallback: False
2025-09-27 21:52:16,799 - INFO -   ğŸ“ Truncation criteria not met - no fallback parsing attempted
2025-09-27 21:52:16,800 - INFO - Worker 1: Completed Genesis 29:16 - 0 instances
2025-09-27 21:52:16,803 - INFO - Completed Genesis 29:16: Truncation=no, BothTruncated=no, Model=gemini-2.5-flash, Instances=0
2025-09-27 21:52:16,806 - INFO - --- PROCESSING: Genesis 22 ---
2025-09-27 21:52:16,807 - DEBUG - Starting new HTTPS connection (1): www.sefaria.org:443
2025-09-27 21:52:17,155 - DEBUG - https://www.sefaria.org:443 "GET /api/texts/Genesis.22 HTTP/1.1" 200 None
2025-09-27 21:52:17,205 - INFO - Processing 1 problematic verses from Genesis 22
2025-09-27 21:52:17,206 - INFO - Worker 1: Processing Genesis 22:8
2025-09-27 21:52:35,599 - WARNING - Attempt 1 failed: 500 An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
2025-09-27 21:52:49,039 - WARNING - Attempt 2 failed: 500 An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
2025-09-27 21:53:12,929 - WARNING - Attempt 3 failed: 500 An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
2025-09-27 21:53:12,930 - INFO - Primary model failed, trying fallback...
2025-09-27 21:53:13,008 - WARNING - Attempt 1 failed: 404 models/gemini-1.5-flash-latest is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.
2025-09-27 21:53:13,129 - WARNING - Attempt 2 failed: 404 models/gemini-1.5-flash-latest is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.
2025-09-27 21:53:13,215 - WARNING - Attempt 3 failed: 404 models/gemini-1.5-flash-latest is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.
2025-09-27 21:53:13,215 - INFO - Worker 1: Completed Genesis 22:8 - 0 instances
2025-09-27 21:53:13,228 - INFO - Completed Genesis 22:8: Truncation=no, BothTruncated=no, Model=gemini-2.5-flash, Instances=0
2025-09-27 21:53:13,233 - INFO - === TEST COMPLETE ===
2025-09-27 21:53:13,233 - INFO - Tested 11 problematic verses
2025-09-27 21:53:13,301 - DEBUG - close.started
2025-09-27 21:53:13,303 - DEBUG - close.complete
